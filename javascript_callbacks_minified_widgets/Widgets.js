if(!OffAmazonPayments||"undefined"==typeof OffAmazonPayments)var OffAmazonPayments={};OffAmazonPayments.ZERO_TIME=(new Date).getTime();var __cba__buttonversion=0;"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,s,r,a=gap,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof rep&&(d=rep.call(t,e,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(d)){for(s=d.length,n=0;s>n;n+=1)r[n]=str(n,d)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,d),o&&r.push(quote(i)+(gap?": ":":")+o));else for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(o=str(i,d),o&&r.push(quote(i)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){function n(){if(!T.isReady){try{A.documentElement.doScroll("left")}catch(e){return void setTimeout(n,1)}T.ready()}}function i(e,t){t.src?T.ajax({url:t.src,async:!1,dataType:"script"}):T.globalEval(t.text||t.textContent||t.innerHTML||""),t.parentNode&&t.parentNode.removeChild(t)}function o(e,n,i,s,r,a){var d=e.length;if("object"==typeof n){for(var l in n)o(e,l,n[l],s,r,i);return e}if(i!==t){for(s=!a&&s&&T.isFunction(i),l=0;d>l;l++)r(e[l],n,s?i.call(e[l],l,r(e[l],n)):i,a);return e}return d?r(e[0],n):t}function s(){return(new Date).getTime()}function r(){return!1}function a(){return!0}function d(e,t,n){return n[0].type=e,T.event.handle.apply(t,n)}function l(e){var t,n,i,o,s,r,a,d=[],l=[],u=arguments;if(i=T.data(this,"events"),e.liveFired!==this&&i&&i.live&&(!e.button||"click"!==e.type)){e.liveFired=this;var c=i.live.slice(0);for(s=0;s<c.length;s++)i=c[s],i.origType.replace(Q,"")===e.type?l.push(i.selector):c.splice(s--,1);for(n=T(e.target).closest(l,e.currentTarget),r=0,a=n.length;a>r;r++)for(s=0;s<c.length;s++)i=c[s],n[r].selector===i.selector&&(o=n[r].elem,l=null,("mouseenter"===i.preType||"mouseleave"===i.preType)&&(l=T(e.relatedTarget).closest(i.selector)[0]),l&&l===o||d.push({elem:o,handleObj:i}));for(r=0,a=d.length;a>r;r++)if(n=d[r],e.currentTarget=n.elem,e.data=n.handleObj.data,e.handleObj=n.handleObj,n.handleObj.origHandler.apply(n.elem,u)===!1){t=!1;break}return t}}function u(e,t){return"live."+(e&&"*"!==e?e+".":"")+t.replace(/\./g,"`").replace(/ /g,"&")}function c(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function g(e,t){var n=0;t.each(function(){if(this.nodeName===(e[n]&&e[n].nodeName)){var t=T.data(e[n++]),i=T.data(this,t);if(t=t&&t.events){delete i.handle,i.events={};for(var o in t)for(var s in t[o])T.event.add(this,o,t[o][s],t[o][s].data)}}})}function p(e,t,n){var i,o,s;return t=t&&t[0]?t[0].ownerDocument||t[0]:A,1===e.length&&"string"==typeof e[0]&&e[0].length<512&&t===A&&!pe.test(e[0])&&(T.support.checkClone||!fe.test(e[0]))&&(o=!0,(s=T.fragments[e[0]])&&1!==s&&(i=s)),i||(i=t.createDocumentFragment(),T.clean(e,t,i,n)),o&&(T.fragments[e[0]]=s?i:1),{fragment:i,cacheable:o}}function f(e,t){var n={};return T.each(Ve.concat.apply([],Ve.slice(0,t)),function(){n[this]=e}),n}function h(e){return"scrollTo"in e&&e.document?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var m,E,T=function(e,t){return new T.fn.init(e,t)},y=e.jQuery,_=e.$,A=e.document,v=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,S=/^.[^:#\[\.,]*$/,I=/\S/,C=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,O=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,N=navigator.userAgent,D=!1,b=[],P=Object.prototype.toString,L=Object.prototype.hasOwnProperty,W=Array.prototype.push,R=Array.prototype.slice,w=Array.prototype.indexOf;T.fn=T.prototype={init:function(e,n){var i,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!n)return this.context=A,this[0]=A.body,this.selector="body",this.length=1,this;if("string"==typeof e){if(!(i=v.exec(e))||!i[1]&&n)return!n&&/^\w+$/.test(e)?(this.selector=e,this.context=A,e=A.getElementsByTagName(e),T.merge(this,e)):!n||n.jquery?(n||m).find(e):T(n).find(e);if(i[1])return o=n?n.ownerDocument||n:A,(e=O.exec(e))?T.isPlainObject(n)?(e=[A.createElement(e[1])],T.fn.attr.call(e,n,!0)):e=[o.createElement(e[1])]:(e=p([i[1]],[o]),e=(e.cacheable?e.fragment.cloneNode(!0):e.fragment).childNodes),T.merge(this,e);if(n=A.getElementById(i[2])){if(n.id!==i[2])return m.find(e);this.length=1,this[0]=n}return this.context=A,this.selector=e,this}return T.isFunction(e)?m.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),T.makeArray(e,this))},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return R.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this.slice(e)[0]:this[e]},pushStack:function(e,t,n){var i=T();return T.isArray(e)?W.apply(i,e):T.merge(i,e),i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return T.each(this,e,t)},ready:function(e){return T.bindReady(),T.isReady?e.call(A,T):b&&b.push(e),this},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(e){return this.pushStack(T.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||T(null)},push:W,sort:[].sort,splice:[].splice},T.fn.init.prototype=T.fn,T.extend=T.fn.extend=function(){var e,n,i,o,s=arguments[0]||{},r=1,a=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[1]||{},r=2),"object"==typeof s||T.isFunction(s)||(s={}),a===r&&(s=this,--r);a>r;r++)if(null!=(e=arguments[r]))for(n in e)i=s[n],o=e[n],s!==o&&(d&&o&&(T.isPlainObject(o)||T.isArray(o))?(i=i&&(T.isPlainObject(i)||T.isArray(i))?i:T.isArray(o)?[]:{},s[n]=T.extend(d,i,o)):o!==t&&(s[n]=o));return s},T.extend({noConflict:function(t){return e.$=_,t&&(e.jQuery=y),T},isReady:!1,ready:function(){if(!T.isReady){if(!A.body)return setTimeout(T.ready,13);if(T.isReady=!0,b){for(var e,t=0;e=b[t++];)e.call(A,T);b=null}T.fn.triggerHandler&&T(A).triggerHandler("ready")}},bindReady:function(){if(!D){if(D=!0,"complete"===A.readyState)return T.ready();if(A.addEventListener)A.addEventListener("DOMContentLoaded",E,!1),e.addEventListener("load",T.ready,!1);else if(A.attachEvent){A.attachEvent("onreadystatechange",E),e.attachEvent("onload",T.ready);var t=!1;try{t=null==e.frameElement}catch(i){}A.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return"[object Function]"===P.call(e)},isArray:function(e){return"[object Array]"===P.call(e)},isPlainObject:function(e){if(!e||"[object Object]"!==P.call(e)||e.nodeType||e.setInterval)return!1;if(e.constructor&&!L.call(e,"constructor")&&!L.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(n in e);return n===t||L.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw e},parseJSON:function(t){return"string"==typeof t&&t?(t=T.trim(t),/^[\],:{}\s]*$/.test(t.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?e.JSON&&e.JSON.parse?e.JSON.parse(t):new Function("return "+t)():void T.error("Invalid JSON: "+t)):null},noop:function(){},globalEval:function(e){if(e&&I.test(e)){var t=A.getElementsByTagName("head")[0]||A.documentElement,n=A.createElement("script");n.type="text/javascript",T.support.scriptEval?n.appendChild(A.createTextNode(e)):n.text=e,t.insertBefore(n,t.firstChild),t.removeChild(n)}},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var o,s=0,r=e.length,a=r===t||T.isFunction(e);if(i)if(a){for(o in e)if(n.apply(e[o],i)===!1)break}else for(;r>s&&n.apply(e[s++],i)!==!1;);else if(a){for(o in e)if(n.call(e[o],o,e[o])===!1)break}else for(i=e[0];r>s&&n.call(i,s,i)!==!1;i=e[++s]);return e},trim:function(e){return(e||"").replace(C,"")},makeArray:function(e,t){return t=t||[],null!=e&&(null==e.length||"string"==typeof e||T.isFunction(e)||"function"!=typeof e&&e.setInterval?W.call(t,e):T.merge(t,e)),t},inArray:function(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},merge:function(e,n){var i=e.length,o=0;if("number"==typeof n.length)for(var s=n.length;s>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){for(var i=[],o=0,s=e.length;s>o;o++)!n!=!t(e[o],o)&&i.push(e[o]);return i},map:function(e,t,n){for(var i,o=[],s=0,r=e.length;r>s;s++)i=t(e[s],s,n),null!=i&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n,i){return 2===arguments.length&&("string"==typeof n?(i=e,e=i[n],n=t):n&&!T.isFunction(n)&&(i=n,n=t)),!n&&e&&(n=function(){return e.apply(i||this,arguments)}),e&&(n.guid=e.guid=e.guid||n.guid||T.guid++),n},uaMatch:function(e){return e=e.toLowerCase(),e=/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||!/compatible/.test(e)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[],{browser:e[1]||"",version:e[2]||"0"}},browser:{}}),N=T.uaMatch(N),N.browser&&(T.browser[N.browser]=!0,T.browser.version=N.version),T.browser.webkit&&(T.browser.safari=!0),w&&(T.inArray=function(e,t){return w.call(t,e)}),m=T(A),A.addEventListener?E=function(){A.removeEventListener("DOMContentLoaded",E,!1),T.ready()}:A.attachEvent&&(E=function(){"complete"===A.readyState&&(A.detachEvent("onreadystatechange",E),T.ready())}),function(){T.support={};var t=A.documentElement,n=A.createElement("script"),i=A.createElement("div"),o="script"+s();i.style.display="none",i.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var r=i.getElementsByTagName("*"),a=i.getElementsByTagName("a")[0];if(r&&r.length&&a){T.support={leadingWhitespace:3===i.firstChild.nodeType,tbody:!i.getElementsByTagName("tbody").length,htmlSerialize:!!i.getElementsByTagName("link").length,style:/red/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===i.getElementsByTagName("input")[0].value,optSelected:A.createElement("select").appendChild(A.createElement("option")).selected,parentNode:null===i.removeChild(i.appendChild(A.createElement("div"))).parentNode,deleteExpando:!0,checkClone:!1,scriptEval:!1,noCloneEvent:!0,boxModel:null},n.type="text/javascript";try{n.appendChild(A.createTextNode("window."+o+"=1;"))}catch(d){}t.insertBefore(n,t.firstChild),e[o]&&(T.support.scriptEval=!0,delete e[o]);try{delete n.test}catch(l){T.support.deleteExpando=!1}t.removeChild(n),i.attachEvent&&i.fireEvent&&(i.attachEvent("onclick",function u(){T.support.noCloneEvent=!1,i.detachEvent("onclick",u)}),i.cloneNode(!0).fireEvent("onclick")),i=A.createElement("div"),i.innerHTML="<input type='radio' name='radiotest' checked='checked'/>",t=A.createDocumentFragment(),t.appendChild(i.firstChild),T.support.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,T(function(){var e=A.createElement("div");e.style.width=e.style.paddingLeft="1px",A.body.appendChild(e),T.boxModel=T.support.boxModel=2===e.offsetWidth,A.body.removeChild(e).style.display="none"}),t=function(e){var t=A.createElement("div");e="on"+e;var n=e in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),n},T.support.submitBubbles=t("submit"),T.support.changeBubbles=t("change"),t=n=i=r=a=null}}(),T.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var M="jQuery"+s(),B=0,U={};T.extend({cache:{},expando:M,noData:{embed:!0,object:!0,applet:!0},data:function(n,i,o){if(!n.nodeName||!T.noData[n.nodeName.toLowerCase()]){n=n==e?U:n;var s=n[M],r=T.cache;return s||"string"!=typeof i||o!==t?(s||(s=++B),"object"==typeof i?(n[M]=s,r[s]=T.extend(!0,{},i)):r[s]||(n[M]=s,r[s]={}),n=r[s],o!==t&&(n[i]=o),"string"==typeof i?n[i]:n):null}},removeData:function(t,n){if(!t.nodeName||!T.noData[t.nodeName.toLowerCase()]){t=t==e?U:t;var i=t[M],o=T.cache,s=o[i];n?s&&(delete s[n],T.isEmptyObject(s)&&T.removeData(t)):(T.support.deleteExpando?delete t[T.expando]:t.removeAttribute&&t.removeAttribute(T.expando),delete o[i])}}}),T.fn.extend({data:function(e,n){if("undefined"==typeof e&&this.length)return T.data(this[0]);if("object"==typeof e)return this.each(function(){T.data(this,e)});var i=e.split(".");if(i[1]=i[1]?"."+i[1]:"",n===t){var o=this.triggerHandler("getData"+i[1]+"!",[i[0]]);return o===t&&this.length&&(o=T.data(this[0],e)),o===t&&i[1]?this.data(i[0]):o}return this.trigger("setData"+i[1]+"!",[i[0],n]).each(function(){T.data(this,e,n)})},removeData:function(e){return this.each(function(){T.removeData(this,e)})}}),T.extend({queue:function(e,t,n){if(e){t=(t||"fx")+"queue";var i=T.data(e,t);return n?(!i||T.isArray(n)?i=T.data(e,t,T.makeArray(n)):i.push(n),i):i||[]}},dequeue:function(e,t){t=t||"fx";var n=T.queue(e,t),i=n.shift();"inprogress"===i&&(i=n.shift()),i&&("fx"===t&&n.unshift("inprogress"),i.call(e,function(){T.dequeue(e,t)}))}}),T.fn.extend({queue:function(e,n){return"string"!=typeof e&&(n=e,e="fx"),n===t?T.queue(this[0],e):this.each(function(){var t=T.queue(this,e,n);"fx"===e&&"inprogress"!==t[0]&&T.dequeue(this,e)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},delay:function(e,t){return e=T.fx?T.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(){var n=this;setTimeout(function(){T.dequeue(n,t)},e)})},clearQueue:function(e){return this.queue(e||"fx",[])}});var x=/[\n\t]/g,H=/\s+/,k=/\r/g,G=/href|src|style/,F=/(button|input)/i,j=/(button|input|object|select|textarea)/i,z=/^(a|area)$/i,V=/radio|checkbox/;T.fn.extend({attr:function(e,t){return o(this,e,t,!0,T.attr)},removeAttr:function(e){return this.each(function(){T.attr(this,e,""),1===this.nodeType&&this.removeAttribute(e)})},addClass:function(e){if(T.isFunction(e))return this.each(function(t){var n=T(this);n.addClass(e.call(this,t,n.attr("class")))});if(e&&"string"==typeof e)for(var t=(e||"").split(H),n=0,i=this.length;i>n;n++){var o=this[n];if(1===o.nodeType)if(o.className){for(var s=" "+o.className+" ",r=o.className,a=0,d=t.length;d>a;a++)s.indexOf(" "+t[a]+" ")<0&&(r+=" "+t[a]);o.className=T.trim(r)}else o.className=e}return this},removeClass:function(e){if(T.isFunction(e))return this.each(function(t){var n=T(this);n.removeClass(e.call(this,t,n.attr("class")))});if(e&&"string"==typeof e||e===t)for(var n=(e||"").split(H),i=0,o=this.length;o>i;i++){var s=this[i];if(1===s.nodeType&&s.className)if(e){for(var r=(" "+s.className+" ").replace(x," "),a=0,d=n.length;d>a;a++)r=r.replace(" "+n[a]+" "," ");s.className=T.trim(r)}else s.className=""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return T.isFunction(e)?this.each(function(n){var i=T(this);i.toggleClass(e.call(this,n,i.attr("class"),t),t)}):this.each(function(){if("string"===n)for(var o,s=0,r=T(this),a=t,d=e.split(H);o=d[s++];)a=i?a:!r.hasClass(o),r[a?"addClass":"removeClass"](o);else("undefined"===n||"boolean"===n)&&(this.className&&T.data(this,"__className__",this.className),this.className=this.className||e===!1?"":T.data(this,"__className__")||"")})},hasClass:function(e){e=" "+e+" ";for(var t=0,n=this.length;n>t;t++)if((" "+this[t].className+" ").replace(x," ").indexOf(e)>-1)return!0;return!1},val:function(e){if(e===t){var n=this[0];if(n){if(T.nodeName(n,"option"))return(n.attributes.value||{}).specified?n.value:n.text;if(T.nodeName(n,"select")){var i=n.selectedIndex,o=[],s=n.options;if(n="select-one"===n.type,0>i)return null;var r=n?i:0;for(i=n?i+1:s.length;i>r;r++){var a=s[r];if(a.selected){if(e=T(a).val(),n)return e;o.push(e)}}return o}return V.test(n.type)&&!T.support.checkOn?null===n.getAttribute("value")?"on":n.value:(n.value||"").replace(k,"")}return t}var d=T.isFunction(e);return this.each(function(t){var n=T(this),i=e;if(1===this.nodeType)if(d&&(i=e.call(this,t,n.val())),"number"==typeof i&&(i+=""),T.isArray(i)&&V.test(this.type))this.checked=T.inArray(n.val(),i)>=0;else if(T.nodeName(this,"select")){var o=T.makeArray(i);T("option",this).each(function(){this.selected=T.inArray(T(this).val(),o)>=0}),o.length||(this.selectedIndex=-1)}else this.value=i})}}),T.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,i,o){if(!e||3===e.nodeType||8===e.nodeType)return t;if(o&&n in T.attrFn)return T(e)[n](i);o=1!==e.nodeType||!T.isXMLDoc(e);var s=i!==t;if(n=o&&T.props[n]||n,1===e.nodeType){var r=G.test(n);return n in e&&o&&!r?(s&&("type"===n&&F.test(e.nodeName)&&e.parentNode&&T.error("type property can't be changed"),e[n]=i),T.nodeName(e,"form")&&e.getAttributeNode(n)?e.getAttributeNode(n).nodeValue:"tabIndex"===n?(n=e.getAttributeNode("tabIndex"))&&n.specified?n.value:j.test(e.nodeName)||z.test(e.nodeName)&&e.href?0:t:e[n]):!T.support.style&&o&&"style"===n?(s&&(e.style.cssText=""+i),e.style.cssText):(s&&e.setAttribute(n,""+i),e=!T.support.hrefNormalized&&o&&r?e.getAttribute(n,2):e.getAttribute(n),null===e?t:e)}return T.style(e,n,i)}});var Q=/\.(.*)$/,X=function(e){return e.replace(/[^\w\s\.\|`]/g,function(e){return"\\"+e})};T.event={add:function(n,i,o,s){if(3!==n.nodeType&&8!==n.nodeType){n.setInterval&&n!==e&&!n.frameElement&&(n=e);var r,a;if(o.handler&&(r=o,o=r.handler),o.guid||(o.guid=T.guid++),a=T.data(n)){var d=a.events=a.events||{},l=a.handle;l||(a.handle=l=function(){return"undefined"==typeof T||T.event.triggered?t:T.event.handle.apply(l.elem,arguments)}),l.elem=n,i=i.split(" ");for(var u,c,g=0;u=i[g++];){a=r?T.extend({},r):{handler:o,data:s},u.indexOf(".")>-1?(c=u.split("."),u=c.shift(),a.namespace=c.slice(0).sort().join(".")):(c=[],a.namespace=""),a.type=u,a.guid=o.guid;var p=d[u],f=T.event.special[u]||{};p||(p=d[u]=[],f.setup&&f.setup.call(n,s,c,l)!==!1||(n.addEventListener?n.addEventListener(u,l,!1):n.attachEvent&&n.attachEvent("on"+u,l))),f.add&&(f.add.call(n,a),a.handler.guid||(a.handler.guid=o.guid)),p.push(a),T.event.global[u]=!0}n=null}}},global:{},remove:function(e,t,n,i){if(3!==e.nodeType&&8!==e.nodeType){var o,s,r,a,d,l,u,c=0,g=T.data(e),p=g&&g.events;if(g&&p)if(t&&t.type&&(n=t.handler,t=t.type),!t||"string"==typeof t&&"."===t.charAt(0)){t=t||"";for(o in p)T.event.remove(e,o+t)}else{for(t=t.split(" ");o=t[c++];)if(d=o,s=o.indexOf(".")<0,r=[],s||(r=o.split("."),o=r.shift(),a=new RegExp("(^|\\.)"+T.map(r.slice(0).sort(),X).join("\\.(?:.*\\.)?")+"(\\.|$)")),l=p[o])if(n){for(d=T.event.special[o]||{},f=i||0;f<l.length&&(u=l[f],n.guid!==u.guid||((s||a.test(u.namespace))&&(null==i&&l.splice(f--,1),d.remove&&d.remove.call(e,u)),null==i));f++);(0===l.length||null!=i&&1===l.length)&&(d.teardown&&d.teardown.call(e,r)!==!1||Y(e,o,g.handle),delete p[o])}else for(var f=0;f<l.length;f++)u=l[f],(s||a.test(u.namespace))&&(T.event.remove(e,d,u.handler,f),l.splice(f--,1));T.isEmptyObject(p)&&((t=g.handle)&&(t.elem=null),delete g.events,delete g.handle,T.isEmptyObject(g)&&T.removeData(e))}}},trigger:function(e,n,i,o){var s=e.type||e;if(!o){if(e="object"==typeof e?e[M]?e:T.extend(T.Event(s),e):T.Event(s),s.indexOf("!")>=0&&(e.type=s=s.slice(0,-1),e.exclusive=!0),i||(e.stopPropagation(),T.event.global[s]&&T.each(T.cache,function(){this.events&&this.events[s]&&T.event.trigger(e,n,this.handle.elem)})),!i||3===i.nodeType||8===i.nodeType)return t;e.result=t,e.target=i,n=T.makeArray(n),n.unshift(e)}e.currentTarget=i,(o=T.data(i,"handle"))&&o.apply(i,n),o=i.parentNode||i.ownerDocument;try{i&&i.nodeName&&T.noData[i.nodeName.toLowerCase()]||i["on"+s]&&i["on"+s].apply(i,n)===!1&&(e.result=!1)}catch(r){}if(!e.isPropagationStopped()&&o)T.event.trigger(e,n,o,!0);else if(!e.isDefaultPrevented()){o=e.target;var a,d=T.nodeName(o,"a")&&"click"===s,l=T.event.special[s]||{};if(!(l._default&&l._default.call(i,e)!==!1||d||o&&o.nodeName&&T.noData[o.nodeName.toLowerCase()])){try{o[s]&&((a=o["on"+s])&&(o["on"+s]=null),T.event.triggered=!0,o[s]())}catch(u){}a&&(o["on"+s]=a),T.event.triggered=!1}}},handle:function(n){var i,o,s,r;if(n=arguments[0]=T.event.fix(n||e.event),n.currentTarget=this,i=n.type.indexOf(".")<0&&!n.exclusive,i||(o=n.type.split("."),n.type=o.shift(),s=new RegExp("(^|\\.)"+o.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),r=T.data(this,"events"),o=r[n.type],r&&o){o=o.slice(0),r=0;for(var a=o.length;a>r;r++){var d=o[r];if((i||s.test(d.namespace))&&(n.handler=d.handler,n.data=d.data,n.handleObj=d,d=d.handler.apply(this,arguments),d!==t&&(n.result=d,d===!1&&(n.preventDefault(),n.stopPropagation())),n.isImmediatePropagationStopped()))break}}return n.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(e){if(e[M])return e;var n=e;e=T.Event(n);for(var i,o=this.props.length;o;)i=this.props[--o],e[i]=n[i];return e.target||(e.target=e.srcElement||A),3===e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),null==e.pageX&&null!=e.clientX&&(n=A.documentElement,o=A.body,e.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),e.which||e.button===t||(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e},guid:1e8,proxy:T.proxy,special:{ready:{setup:T.bindReady,teardown:T.noop},live:{add:function(e){T.event.add(this,e.origType,T.extend({},e,{handler:l}))},remove:function(e){var t=!0,n=e.origType.replace(Q,"");T.each(T.data(this,"events").live||[],function(){return n===this.origType.replace(Q,"")?t=!1:void 0}),t&&T.event.remove(this,e.origType,l)}},beforeunload:{setup:function(e,t,n){return this.setInterval&&(this.onbeforeunload=n),!1},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}}};var Y=A.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)};T.Event=function(e){return this.preventDefault?(e&&e.type?(this.originalEvent=e,this.type=e.type):this.type=e,this.timeStamp=s(),void(this[M]=!0)):new T.Event(e)},T.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r};var q=function(e){var t=e.relatedTarget;try{for(;t&&t!==this;)t=t.parentNode;t!==this&&(e.type=e.data,T.event.handle.apply(this,arguments))}catch(n){}},K=function(e){e.type=e.data,T.event.handle.apply(this,arguments)};if(T.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){T.event.special[e]={setup:function(n){T.event.add(this,t,n&&n.selector?K:q,e)},teardown:function(e){T.event.remove(this,t,e&&e.selector?K:q)}}}),T.support.submitBubbles||(T.event.special.submit={setup:function(){return"form"===this.nodeName.toLowerCase()?!1:(T.event.add(this,"click.specialSubmit",function(e){var t=e.target,n=t.type;return"submit"!==n&&"image"!==n||!T(t).closest("form").length?void 0:d("submit",this,arguments)}),void T.event.add(this,"keypress.specialSubmit",function(e){var t=e.target,n=t.type;return"text"!==n&&"password"!==n||!T(t).closest("form").length||13!==e.keyCode?void 0:d("submit",this,arguments)}))},teardown:function(){T.event.remove(this,".specialSubmit")}}),!T.support.changeBubbles){var Z,J=/textarea|input|select/i,$=function(e){var t=e.type,n=e.value;return"radio"===t||"checkbox"===t?n=e.checked:"select-multiple"===t?n=e.selectedIndex>-1?T.map(e.options,function(e){return e.selected}).join("-"):"":"select"===e.nodeName.toLowerCase()&&(n=e.selectedIndex),n},ee=function(e,n){var i,o,s=e.target;return!J.test(s.nodeName)||s.readOnly||(i=T.data(s,"_change_data"),o=$(s),("focusout"!==e.type||"radio"!==s.type)&&T.data(s,"_change_data",o),i===t||o===i||null==i&&!o)?void 0:(e.type="change",T.event.trigger(e,n,s))};T.event.special.change={filters:{focusout:ee,click:function(e){var t=e.target,n=t.type;return"radio"===n||"checkbox"===n||"select"===t.nodeName.toLowerCase()?ee.call(this,e):void 0},keydown:function(e){var t=e.target,n=t.type;return 13===e.keyCode&&"textarea"!==t.nodeName.toLowerCase()||32===e.keyCode&&("checkbox"===n||"radio"===n)||"select-multiple"===n?ee.call(this,e):void 0},beforeactivate:function(e){e=e.target,T.data(e,"_change_data",$(e))}},setup:function(){if("file"===this.type)return!1;for(var e in Z)T.event.add(this,e+".specialChange",Z[e]);return J.test(this.nodeName)},teardown:function(){return T.event.remove(this,".specialChange"),J.test(this.nodeName)}},Z=T.event.special.change.filters}A.addEventListener&&T.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){return e=T.event.fix(e),e.type=t,T.event.handle.call(this,e)}T.event.special[t]={setup:function(){this.addEventListener(e,n,!0)},teardown:function(){this.removeEventListener(e,n,!0)}}}),T.each(["bind","one"],function(e,n){T.fn[n]=function(e,i,o){if("object"==typeof e){for(var s in e)this[n](s,i,e[s],o);return this}T.isFunction(i)&&(o=i,i=t);var r="one"===n?T.proxy(o,function(e){return T(this).unbind(e,r),o.apply(this,arguments)}):o;if("unload"===e&&"one"!==n)this.one(e,i,o);else{s=0;for(var a=this.length;a>s;s++)T.event.add(this[s],e,r,i)}return this}}),T.fn.extend({unbind:function(e,t){if("object"!=typeof e||e.preventDefault){i=0;for(var n=this.length;n>i;i++)T.event.remove(this[i],e,t)}else for(var i in e)this.unbind(i,e[i]);return this},delegate:function(e,t,n,i){return this.live(t,n,i,e)},undelegate:function(e,t,n){return 0===arguments.length?this.unbind("live"):this.die(t,null,n,e)},trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?(e=T.Event(e),e.preventDefault(),e.stopPropagation(),T.event.trigger(e,t,this[0]),e.result):void 0},toggle:function(e){for(var t=arguments,n=1;n<t.length;)T.proxy(e,t[n++]);return this.click(T.proxy(e,function(i){var o=(T.data(this,"lastToggle"+e.guid)||0)%n;return T.data(this,"lastToggle"+e.guid,o+1),i.preventDefault(),t[o].apply(this,arguments)||!1}))},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var te={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};T.each(["live","die"],function(e,n){T.fn[n]=function(e,i,o,s){var r,a,d,l=0,c=s||this.selector,g=s?this:T(this.context);for(T.isFunction(i)&&(o=i,i=t),e=(e||"").split(" ");null!=(r=e[l++]);)s=Q.exec(r),a="",s&&(a=s[0],r=r.replace(Q,"")),"hover"===r?e.push("mouseenter"+a,"mouseleave"+a):(d=r,"focus"===r||"blur"===r?(e.push(te[r]+a),r+=a):r=(te[r]||r)+a,"live"===n?g.each(function(){T.event.add(this,u(r,c),{data:i,selector:c,handler:o,origType:r,origHandler:o,preType:d})}):g.unbind(u(r,c),o));return this}}),T.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(e,t){T.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},T.attrFn&&(T.attrFn[t]=!0)}),e.attachEvent&&!e.addEventListener&&e.attachEvent("onunload",function(){for(var e in T.cache)if(T.cache[e].handle)try{T.event.remove(T.cache[e].handle.elem)}catch(t){}}),function(){function e(t){for(var n,i="",o=0;t[o];o++)n=t[o],3===n.nodeType||4===n.nodeType?i+=n.nodeValue:8!==n.nodeType&&(i+=e(n.childNodes));return i}function n(e,t,n,i,o,s){o=0;for(var r=i.length;r>o;o++){var a=i[o];if(a){a=a[e];for(var d=!1;a;){if(a.sizcache===n){d=i[a.sizset];break}if(1!==a.nodeType||s||(a.sizcache=n,a.sizset=o),a.nodeName.toLowerCase()===t){d=a;break}a=a[e]}i[o]=d}}}function i(e,t,n,i,o,s){o=0;for(var r=i.length;r>o;o++){var a=i[o];if(a){a=a[e];for(var d=!1;a;){if(a.sizcache===n){d=i[a.sizset];break}if(1===a.nodeType)if(s||(a.sizcache=n,a.sizset=o),"string"!=typeof t){if(a===t){d=!0;break}}else if(l.filter(t,[a]).length>0){d=a;break}a=a[e]}i[o]=d}}}var o=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=0,r=Object.prototype.toString,a=!1,d=!0;[0,0].sort(function(){return d=!1,0});var l=function(e,t,n,i){n=n||[];var s=t=t||A;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;for(var a,d,g,f,h=[],T=!0,_=E(t),v=e;null!==(o.exec(""),a=o.exec(v));)if(v=a[3],h.push(a[1]),a[2]){f=a[3];break}if(h.length>1&&c.exec(e))if(2===h.length&&u.relative[h[0]])d=y(h[0]+h[1],t);else for(d=u.relative[h[0]]?[t]:l(h.shift(),t);h.length;)e=h.shift(),u.relative[e]&&(e+=h.shift()),d=y(e,d);else if(!i&&h.length>1&&9===t.nodeType&&!_&&u.match.ID.test(h[0])&&!u.match.ID.test(h[h.length-1])&&(a=l.find(h.shift(),t,_),t=a.expr?l.filter(a.expr,a.set)[0]:a.set[0]),t)for(a=i?{expr:h.pop(),set:p(i)}:l.find(h.pop(),1!==h.length||"~"!==h[0]&&"+"!==h[0]||!t.parentNode?t:t.parentNode,_),d=a.expr?l.filter(a.expr,a.set):a.set,h.length>0?g=p(d):T=!1;h.length;){var S=h.pop();a=S,u.relative[S]?a=h.pop():S="",null==a&&(a=t),
u.relative[S](g,a,_)}else g=[];if(g||(g=d),g||l.error(S||e),"[object Array]"===r.call(g))if(T)if(t&&1===t.nodeType)for(e=0;null!=g[e];e++)g[e]&&(g[e]===!0||1===g[e].nodeType&&m(t,g[e]))&&n.push(d[e]);else for(e=0;null!=g[e];e++)g[e]&&1===g[e].nodeType&&n.push(d[e]);else n.push.apply(n,g);else p(g,n);return f&&(l(f,s,n,i),l.uniqueSort(n)),n};l.uniqueSort=function(e){if(h&&(a=d,e.sort(h),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},l.matches=function(e,t){return l(e,null,null,t)},l.find=function(e,t,n){var i,o;if(!e)return[];for(var s=0,r=u.order.length;r>s;s++){var a=u.order[s];if(o=u.leftMatch[a].exec(e)){var d=o[1];if(o.splice(1,1),"\\"!==d.substr(d.length-1)&&(o[1]=(o[1]||"").replace(/\\/g,""),i=u.find[a](o,t,n),null!=i)){e=e.replace(u.match[a],"");break}}}return i||(i=t.getElementsByTagName("*")),{set:i,expr:e}},l.filter=function(e,n,i,o){for(var s,r,a=e,d=[],c=n,g=n&&n[0]&&E(n[0]);e&&n.length;){for(var p in u.filter)if(null!=(s=u.leftMatch[p].exec(e))&&s[2]){var f,h,m=u.filter[p];if(h=s[1],r=!1,s.splice(1,1),"\\"!==h.substr(h.length-1)){if(c===d&&(d=[]),u.preFilter[p])if(s=u.preFilter[p](s,c,i,d,o,g)){if(s===!0)continue}else r=f=!0;if(s)for(var T=0;null!=(h=c[T]);T++)if(h){f=m(h,s,T,c);var y=o^!!f;i&&null!=f?y?r=!0:c[T]=!1:y&&(d.push(h),r=!0)}if(f!==t){if(i||(c=d),e=e.replace(u.match[p],""),!r)return[];break}}}if(e===a){if(null!=r)break;l.error(e)}a=e}return c},l.error=function(e){throw"Syntax error, unrecognized expression: "+e};var u=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t){var n="string"==typeof t,i=n&&!/\W/.test(t);n=n&&!i,i&&(t=t.toLowerCase()),i=0;for(var o,s=e.length;s>i;i++)if(o=e[i]){for(;(o=o.previousSibling)&&1!==o.nodeType;);e[i]=n||o&&o.nodeName.toLowerCase()===t?o||!1:o===t}n&&l.filter(t,e,!0)},">":function(e,t){var n="string"==typeof t;if(n&&!/\W/.test(t)){t=t.toLowerCase();for(var i=0,o=e.length;o>i;i++){var s=e[i];s&&(n=s.parentNode,e[i]=n.nodeName.toLowerCase()===t?n:!1)}}else{for(i=0,o=e.length;o>i;i++)(s=e[i])&&(e[i]=n?s.parentNode:s.parentNode===t);n&&l.filter(t,e,!0)}},"":function(e,t,o){var r=s++,a=i;if("string"==typeof t&&!/\W/.test(t)){var d=t=t.toLowerCase();a=n}a("parentNode",t,r,e,d,o)},"~":function(e,t,o){var r=s++,a=i;if("string"==typeof t&&!/\W/.test(t)){var d=t=t.toLowerCase();a=n}a("previousSibling",t,r,e,d,o)}},find:{ID:function(e,t,n){return"undefined"==typeof t.getElementById||n?void 0:(e=t.getElementById(e[1]))?[e]:[]},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){var n=[];t=t.getElementsByName(e[1]);for(var i=0,o=t.length;o>i;i++)t[i].getAttribute("name")===e[1]&&n.push(t[i]);return 0===n.length?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,i,o,s){if(e=" "+e[1].replace(/\\/g,"")+" ",s)return e;s=0;for(var r;null!=(r=t[s]);s++)r&&(o^(r.className&&(" "+r.className+" ").replace(/[\t\n]/g," ").indexOf(e)>=0)?n||i.push(r):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e){return e[1].toLowerCase()},CHILD:function(e){if("nth"===e[1]){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=s++,e},ATTR:function(e,t,n,i,o,s){return t=e[1].replace(/\\/g,""),!s&&u.attrMap[t]&&(e[1]=u.attrMap[t]),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,i,s){if("not"===e[1]){if(!((o.exec(e[3])||"").length>1||/^\w/.test(e[3])))return e=l.filter(e[3],t,n,!0^s),n||i.push.apply(i,e),!1;e[3]=l(e[3],null,null,t)}else if(u.match.POS.test(e[0])||u.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!l(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"button"===e.nodeName.toLowerCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(t,n,i,o){var s=n[1],r=u.filters[s];if(r)return r(t,i,n,o);if("contains"===s)return(t.textContent||t.innerText||e([t])||"").indexOf(n[3])>=0;if("not"===s){for(n=n[3],i=0,o=n.length;o>i;i++)if(n[i]===t)return!1;return!0}l.error("Syntax error, unrecognized expression: "+s)},CHILD:function(e,t){var n=t[1],i=e;switch(n){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===n)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0;case"nth":n=t[2];var o=t[3];if(1===n&&0===o)return!0;t=t[0];var s=e.parentNode;if(s&&(s.sizcache!==t||!e.nodeIndex)){var r=0;for(i=s.firstChild;i;i=i.nextSibling)1===i.nodeType&&(i.nodeIndex=++r);s.sizcache=t}return e=e.nodeIndex-o,0===n?0===e:e%n===0&&e/n>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1];e=u.attrHandle[n]?u.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),n=e+"";var i=t[2];return t=t[4],null==e?"!="===i:"="===i?n===t:"*="===i?n.indexOf(t)>=0:"~="===i?(" "+n+" ").indexOf(t)>=0:t?"!="===i?n!==t:"^="===i?0===n.indexOf(t):"$="===i?n.substr(n.length-t.length)===t:"|="===i?n===t||n.substr(0,t.length+1)===t+"-":!1:n&&e!==!1},POS:function(e,t,n,i){var o=u.setFilters[t[2]];return o?o(e,n,t,i):void 0}}},c=u.match.POS;for(var g in u.match)u.match[g]=new RegExp(u.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),u.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+u.match[g].source.replace(/\\(\d+)/g,function(e,t){return"\\"+(t-0+1)}));var p=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(A.documentElement.childNodes,0)}catch(f){p=function(e,t){if(t=t||[],"[object Array]"===r.call(e))Array.prototype.push.apply(t,e);else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else for(n=0;e[n];n++)t.push(e[n]);return t}}var h;A.documentElement.compareDocumentPosition?h=function(e,t){return e.compareDocumentPosition&&t.compareDocumentPosition?(e=4&e.compareDocumentPosition(t)?-1:e===t?0:1,0===e&&(a=!0),e):(e==t&&(a=!0),e.compareDocumentPosition?-1:1)}:"sourceIndex"in A.documentElement?h=function(e,t){return e.sourceIndex&&t.sourceIndex?(e=e.sourceIndex-t.sourceIndex,0===e&&(a=!0),e):(e==t&&(a=!0),e.sourceIndex?-1:1)}:A.createRange&&(h=function(e,t){if(!e.ownerDocument||!t.ownerDocument)return e==t&&(a=!0),e.ownerDocument?-1:1;var n=e.ownerDocument.createRange(),i=t.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,0),i.setStart(t,0),i.setEnd(t,0),e=n.compareBoundaryPoints(Range.START_TO_END,i),0===e&&(a=!0),e}),function(){var e=A.createElement("div"),n="script"+(new Date).getTime();e.innerHTML="<a name='"+n+"'/>";var i=A.documentElement;i.insertBefore(e,i.firstChild),A.getElementById(n)&&(u.find.ID=function(e,n,i){return"undefined"==typeof n.getElementById||i?void 0:(n=n.getElementById(e[1]))?n.id===e[1]||"undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id").nodeValue===e[1]?[n]:t:[]},u.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=A.createElement("div");e.appendChild(A.createComment("")),e.getElementsByTagName("*").length>0&&(u.find.TAG=function(e,t){if(t=t.getElementsByTagName(e[1]),"*"===e[1]){e=[];for(var n=0;t[n];n++)1===t[n].nodeType&&e.push(t[n]);t=e}return t}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(u.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),A.querySelectorAll&&function(){var e=l,t=A.createElement("div");if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){l=function(t,n,i,o){if(n=n||A,!o&&9===n.nodeType&&!E(n))try{return p(n.querySelectorAll(t),i)}catch(s){}return e(t,n,i,o)};for(var n in e)l[n]=e[n];t=null}}(),function(){var e=A.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(u.order.splice(1,0,"CLASS"),u.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null))}();var m=A.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},E=function(e){return(e=(e?e.ownerDocument||e:0).documentElement)?"HTML"!==e.nodeName:!1},y=function(e,t){var n,i=[],o="";for(t=t.nodeType?[t]:t;n=u.match.PSEUDO.exec(e);)o+=n[0],e=e.replace(u.match.PSEUDO,"");e=u.relative[e]?e+"*":e,n=0;for(var s=t.length;s>n;n++)l(e,t[n],i);return l.filter(o,i)};T.find=l,T.expr=l.selectors,T.expr[":"]=T.expr.filters,T.unique=l.uniqueSort,T.text=e,T.isXMLDoc=E,T.contains=m}();var ne=/Until$/,ie=/^(?:parents|prevUntil|prevAll)/,oe=/,/;R=Array.prototype.slice;var se=function(e,t,n){if(T.isFunction(t))return T.grep(e,function(e,i){return!!t.call(e,i,e)===n});if(t.nodeType)return T.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=T.grep(e,function(e){return 1===e.nodeType});if(S.test(t))return T.filter(t,i,!n);t=T.filter(t,i)}return T.grep(e,function(e){return T.inArray(e,t)>=0===n})};T.fn.extend({find:function(e){for(var t=this.pushStack("","find",e),n=0,i=0,o=this.length;o>i;i++)if(n=t.length,T.find(e,this[i],t),i>0)for(var s=n;s<t.length;s++)for(var r=0;n>r;r++)if(t[r]===t[s]){t.splice(s--,1);break}return t},has:function(e){var t=T(e);return this.filter(function(){for(var e=0,n=t.length;n>e;e++)if(T.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(se(this,e,!1),"not",e)},filter:function(e){return this.pushStack(se(this,e,!0),"filter",e)},is:function(e){return!!e&&T.filter(e,this).length>0},closest:function(e,t){if(T.isArray(e)){var n,i,o=[],s=this[0],r={};if(s&&e.length){n=0;for(var a=e.length;a>n;n++)i=e[n],r[i]||(r[i]=T.expr.match.POS.test(i)?T(i,t||this.context):i);for(;s&&s.ownerDocument&&s!==t;){for(i in r)n=r[i],(n.jquery?n.index(s)>-1:T(s).is(n))&&(o.push({selector:i,elem:s}),delete r[i]);s=s.parentNode}}return o}var d=T.expr.match.POS.test(e)?T(e,t||this.context):null;return this.map(function(n,i){for(;i&&i.ownerDocument&&i!==t;){if(d?d.index(i)>-1:T(i).is(e))return i;i=i.parentNode}return null})},index:function(e){return e&&"string"!=typeof e?T.inArray(e.jquery?e[0]:e,this):T.inArray(this[0],e?T(e):this.parent().children())},add:function(e,t){return e="string"==typeof e?T(e,t||this.context):T.makeArray(e),t=T.merge(this.get(),e),this.pushStack(c(e[0])||c(t[0])?t:T.unique(t))},andSelf:function(){return this.add(this.prevObject)}}),T.each({parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},parents:function(e){return T.dir(e,"parentNode")},parentsUntil:function(e,t,n){return T.dir(e,"parentNode",n)},next:function(e){return T.nth(e,2,"nextSibling")},prev:function(e){return T.nth(e,2,"previousSibling")},nextAll:function(e){return T.dir(e,"nextSibling")},prevAll:function(e){return T.dir(e,"previousSibling")},nextUntil:function(e,t,n){return T.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return T.dir(e,"previousSibling",n)},siblings:function(e){return T.sibling(e.parentNode.firstChild,e)},children:function(e){return T.sibling(e.firstChild)},contents:function(e){return T.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:T.makeArray(e.childNodes)}},function(e,t){T.fn[e]=function(n,i){var o=T.map(this,t,n);return ne.test(e)||(i=n),i&&"string"==typeof i&&(o=T.filter(i,o)),o=this.length>1?T.unique(o):o,(this.length>1||oe.test(i))&&ie.test(e)&&(o=o.reverse()),this.pushStack(o,e,R.call(arguments).join(","))}}),T.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),T.find.matches(e,t)},dir:function(e,n,i){var o=[];for(e=e[n];e&&9!==e.nodeType&&(i===t||1!==e.nodeType||!T(e).is(i));)1===e.nodeType&&o.push(e),e=e[n];return o},nth:function(e,t,n){t=t||1;for(var i=0;e&&(1!==e.nodeType||++i!==t);e=e[n]);return e},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var re=/ jQuery\d+="(?:\d+|null)"/g,ae=/^\s+/,de=/(<([\w:]+)[^>]*?)\/>/g,le=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,ue=/<([\w:]+)/,ce=/<tbody/i,ge=/<|&#?\w+;/,pe=/<script|<object|<embed|<option|<style/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,he=function(e,t,n){return le.test(n)?e:t+"></"+n+">"},me={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,T.support.htmlSerialize||(me._default=[1,"div<div>","</div>"]),T.fn.extend({text:function(e){return T.isFunction(e)?this.each(function(t){var n=T(this);n.text(e.call(this,t,n.text()))}):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(e)):T.text(this)},wrapAll:function(e){if(T.isFunction(e))return this.each(function(t){T(this).wrapAll(e.call(this,t))});if(this[0]){var t=T(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return T.isFunction(e)?this.each(function(t){T(this).wrapInner(e.call(this,t))}):this.each(function(){var t=T(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){return this.each(function(){T(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){T.nodeName(this,"body")||T(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=T(arguments[0]);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,T(arguments[0]).toArray()),e}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||T.filter(e,[n]).length)&&(t||1!==n.nodeType||(T.cleanData(n.getElementsByTagName("*")),T.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&T.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e){var t=this.map(function(){if(T.support.noCloneEvent||T.isXMLDoc(this))return this.cloneNode(!0);var e=this.outerHTML,t=this.ownerDocument;return e||(e=t.createElement("div"),e.appendChild(this.cloneNode(!0)),e=e.innerHTML),T.clean([e.replace(re,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(ae,"")],t)[0]});return e===!0&&(g(this,t),g(this.find("*"),t.find("*"))),t},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(re,""):null;if("string"!=typeof e||pe.test(e)||!T.support.leadingWhitespace&&ae.test(e)||me[(ue.exec(e)||["",""])[1].toLowerCase()])T.isFunction(e)?this.each(function(t){var n=T(this),i=n.html();n.empty().append(function(){return e.call(this,t,i)})}):this.empty().append(e);else{e=e.replace(de,he);try{for(var n=0,i=this.length;i>n;n++)1===this[n].nodeType&&(T.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(o){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?T.isFunction(e)?this.each(function(t){var n=T(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=T(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;T(this).remove(),t?T(t).before(e):T(n).append(e)})):this.pushStack(T(T.isFunction(e)?e():e),"replaceWith",e)},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,o){function s(e){return T.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}var r,a,d,l=e[0],u=[];if(!T.support.checkClone&&3===arguments.length&&"string"==typeof l&&fe.test(l))return this.each(function(){T(this).domManip(e,n,o,!0)});if(T.isFunction(l))return this.each(function(i){var s=T(this);e[0]=l.call(this,i,n?s.html():t),s.domManip(e,n,o)});if(this[0]){if(r=l&&l.parentNode,r=T.support.parentNode&&r&&11===r.nodeType&&r.childNodes.length===this.length?{fragment:r}:p(e,this,u),d=r.fragment,a=1===d.childNodes.length?d=d.firstChild:d.firstChild){n=n&&T.nodeName(a,"tr");for(var c=0,g=this.length;g>c;c++)o.call(n?s(this[c],a):this[c],c>0||r.cacheable||this.length>1?d.cloneNode(!0):d)}u.length&&T.each(u,i)}return this}}),T.fragments={},T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){T.fn[e]=function(n){var i=[];n=T(n);var o=1===this.length&&this[0].parentNode;if(o&&11===o.nodeType&&1===o.childNodes.length&&1===n.length)return n[t](this[0]),this;o=0;for(var s=n.length;s>o;o++){var r=(o>0?this.clone(!0):this).get();T.fn[t].apply(T(n[o]),r),i=i.concat(r)}return this.pushStack(i,e,n.selector)}}),T.extend({clean:function(e,t,n,i){t=t||A,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||A);for(var o,s=[],r=0;null!=(o=e[r]);r++)if("number"==typeof o&&(o+=""),o){if("string"!=typeof o||ge.test(o)){if("string"==typeof o){o=o.replace(de,he);var a=(ue.exec(o)||["",""])[1].toLowerCase(),d=me[a]||me._default,l=d[0],u=t.createElement("div");for(u.innerHTML=d[1]+o+d[2];l--;)u=u.lastChild;if(!T.support.tbody)for(l=ce.test(o),a="table"!==a||l?"<table>"!==d[1]||l?[]:u.childNodes:u.firstChild&&u.firstChild.childNodes,d=a.length-1;d>=0;--d)T.nodeName(a[d],"tbody")&&!a[d].childNodes.length&&a[d].parentNode.removeChild(a[d]);!T.support.leadingWhitespace&&ae.test(o)&&u.insertBefore(t.createTextNode(ae.exec(o)[0]),u.firstChild),o=u.childNodes}}else o=t.createTextNode(o);o.nodeType?s.push(o):s=T.merge(s,o)}if(n)for(r=0;s[r];r++)!i||!T.nodeName(s[r],"script")||s[r].type&&"text/javascript"!==s[r].type.toLowerCase()?(1===s[r].nodeType&&s.splice.apply(s,[r+1,0].concat(T.makeArray(s[r].getElementsByTagName("script")))),n.appendChild(s[r])):i.push(s[r].parentNode?s[r].parentNode.removeChild(s[r]):s[r]);return s},cleanData:function(e){for(var t,n,i,o=T.cache,s=T.event.special,r=T.support.deleteExpando,a=0;null!=(i=e[a]);a++)if(n=i[T.expando]){if(t=o[n],t.events)for(var d in t.events)s[d]?T.event.remove(i,d):Y(i,d,t.handle);r?delete i[T.expando]:i.removeAttribute&&i.removeAttribute(T.expando),delete o[n]}}});var Ee=/z-?index|font-?weight|opacity|zoom|line-?height/i,Te=/alpha\([^)]*\)/,ye=/opacity=([^)]*)/,_e=/float/i,Ae=/-([a-z])/gi,ve=/([A-Z])/g,Se=/^-?\d+(?:px)?$/i,Ie=/^-?\d/,Ce={position:"absolute",visibility:"hidden",display:"block"},Oe=["Left","Right"],Ne=["Top","Bottom"],De=A.defaultView&&A.defaultView.getComputedStyle,be=T.support.cssFloat?"cssFloat":"styleFloat",Pe=function(e,t){return t.toUpperCase()};T.fn.css=function(e,n){return o(this,e,n,!0,function(e,n,i){return i===t?T.curCSS(e,n):("number"!=typeof i||Ee.test(n)||(i+="px"),void T.style(e,n,i))})},T.extend({style:function(e,n,i){if(!e||3===e.nodeType||8===e.nodeType)return t;("width"===n||"height"===n)&&parseFloat(i)<0&&(i=t);var o=e.style||e,s=i!==t;return T.support.opacity||"opacity"!==n?(_e.test(n)&&(n=be),n=n.replace(Ae,Pe),s&&(o[n]=i),o[n]):(s&&(o.zoom=1,n=parseInt(i,10)+""=="NaN"?"":"alpha(opacity="+100*i+")",e=o.filter||T.curCSS(e,"filter")||"",o.filter=Te.test(e)?e.replace(Te,n):n),o.filter&&o.filter.indexOf("opacity=")>=0?parseFloat(ye.exec(o.filter)[1])/100+"":"")},css:function(e,t,n,i){function o(){s="width"===t?e.offsetWidth:e.offsetHeight,"border"!==i&&T.each(r,function(){i||(s-=parseFloat(T.curCSS(e,"padding"+this,!0))||0),"margin"===i?s+=parseFloat(T.curCSS(e,"margin"+this,!0))||0:s-=parseFloat(T.curCSS(e,"border"+this+"Width",!0))||0})}if("width"===t||"height"===t){var s,r="width"===t?Oe:Ne;return 0!==e.offsetWidth?o():T.swap(e,Ce,o),Math.max(0,Math.round(s))}return T.curCSS(e,t,n)},curCSS:function(e,t,n){var i,o=e.style;if(!T.support.opacity&&"opacity"===t&&e.currentStyle)return i=ye.test(e.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"",""===i?"1":i;if(_e.test(t)&&(t=be),!n&&o&&o[t])i=o[t];else if(De){if(_e.test(t)&&(t="float"),t=t.replace(ve,"-$1").toLowerCase(),o=e.ownerDocument.defaultView,!o)return null;(e=o.getComputedStyle(e,null))&&(i=e.getPropertyValue(t)),"opacity"===t&&""===i&&(i="1")}else if(e.currentStyle&&(n=t.replace(Ae,Pe),i=e.currentStyle[t]||e.currentStyle[n],!Se.test(i)&&Ie.test(i))){t=o.left;var s=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,o.left="fontSize"===n?"1em":i||0,i=o.pixelLeft+"px",o.left=t,e.runtimeStyle.left=s}return i},swap:function(e,t,n){var i={};for(var o in t)i[o]=e.style[o],e.style[o]=t[o];n.call(e);for(o in t)e.style[o]=i[o]}}),T.expr&&T.expr.filters&&(T.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight,i="tr"===e.nodeName.toLowerCase();return 0!==t||0!==n||i?t>0&&n>0&&!i?!1:"none"===T.curCSS(e,"display"):!0},T.expr.filters.visible=function(e){return!T.expr.filters.hidden(e)});var Le=s(),We=/<script(.|\s)*?\/script>/gi,Re=/select|textarea/i,we=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,Me=/=\?(&|$)/,Be=/\?/,Ue=/(\?|&)_=.*?(&|$)/,xe=/^(\w+:)?\/\/([^\/?#]+)/,He=/%20/g,ke=T.fn.load;T.fn.extend({load:function(e,t,n){if("string"!=typeof e)return ke.call(this,e);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}i="GET",t&&(T.isFunction(t)?(n=t,t=null):"object"==typeof t&&(t=T.param(t,T.ajaxSettings.traditional),i="POST"));var s=this;return T.ajax({url:e,type:i,dataType:"html",data:t,complete:function(e,t){("success"===t||"notmodified"===t)&&s.html(o?T("<div />").append(e.responseText.replace(We,"")).find(o):e.responseText),n&&s.each(n,[e.responseText,t,e])}}),this},serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?T.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Re.test(this.nodeName)||we.test(this.type))}).map(function(e,t){return e=T(this).val(),null==e?null:T.isArray(e)?T.map(e,function(e){return{name:t.name,value:e}}):{name:t.name,value:e}}).get()}}),T.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){T.fn[t]=function(e){return this.bind(t,e)}}),T.extend({get:function(e,t,n,i){return T.isFunction(t)&&(i=i||n,n=t,t=null),T.ajax({type:"GET",url:e,data:t,success:n,dataType:i})},getScript:function(e,t){return T.get(e,null,t,"script")},getJSON:function(e,t,n){return T.get(e,t,n,"json")},post:function(e,t,n,i){return T.isFunction(t)&&(i=i||n,n=t,t={}),T.ajax({type:"POST",url:e,data:t,success:n,dataType:i})},ajaxSetup:function(e){T.extend(T.ajaxSettings,e)},ajaxSettings:{url:location.href,global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,xhr:!e.XMLHttpRequest||"file:"===e.location.protocol&&e.ActiveXObject?function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}:function(){return new e.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(n){function i(){u.success&&u.success.call(c,l,d,_),u.global&&r("ajaxSuccess",[_,u])}function o(){u.complete&&u.complete.call(c,_,d),u.global&&r("ajaxComplete",[_,u]),u.global&&!--T.active&&T.event.trigger("ajaxStop")}function r(e,t){(u.context?T(u.context):T.event).trigger(e,t)}var a,d,l,u=T.extend(!0,{},T.ajaxSettings,n),c=n&&n.context||u,g=u.type.toUpperCase();if(u.data&&u.processData&&"string"!=typeof u.data&&(u.data=T.param(u.data,u.traditional)),"jsonp"===u.dataType&&("GET"===g?Me.test(u.url)||(u.url+=(Be.test(u.url)?"&":"?")+(u.jsonp||"callback")+"=?"):u.data&&Me.test(u.data)||(u.data=(u.data?u.data+"&":"")+(u.jsonp||"callback")+"=?"),u.dataType="json"),"json"===u.dataType&&(u.data&&Me.test(u.data)||Me.test(u.url))&&(a=u.jsonpCallback||"jsonp"+Le++,u.data&&(u.data=(u.data+"").replace(Me,"="+a+"$1")),u.url=u.url.replace(Me,"="+a+"$1"),u.dataType="script",e[a]=e[a]||function(n){l=n,i(),o(),e[a]=t;try{delete e[a]}catch(s){}h&&h.removeChild(m)}),"script"===u.dataType&&null===u.cache&&(u.cache=!1),u.cache===!1&&"GET"===g){var p=s(),f=u.url.replace(Ue,"$1_="+p+"$2");u.url=f+(f===u.url?(Be.test(u.url)?"&":"?")+"_="+p:"")}if(u.data&&"GET"===g&&(u.url+=(Be.test(u.url)?"&":"?")+u.data),u.global&&!T.active++&&T.event.trigger("ajaxStart"),p=(p=xe.exec(u.url))&&(p[1]&&p[1]!==location.protocol||p[2]!==location.host),"script"===u.dataType&&"GET"===g&&p){var h=A.getElementsByTagName("head")[0]||A.documentElement,m=A.createElement("script");if(m.src=u.url,u.scriptCharset&&(m.charset=u.scriptCharset),!a){var E=!1;m.onload=m.onreadystatechange=function(){E||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(E=!0,i(),o(),m.onload=m.onreadystatechange=null,h&&m.parentNode&&h.removeChild(m))}}return h.insertBefore(m,h.firstChild),t}var y=!1,_=u.xhr();if(_){u.username?_.open(g,u.url,u.async,u.username,u.password):_.open(g,u.url,u.async);try{(u.data||n&&n.contentType)&&_.setRequestHeader("Content-Type",u.contentType),u.ifModified&&(T.lastModified[u.url]&&_.setRequestHeader("If-Modified-Since",T.lastModified[u.url]),T.etag[u.url]&&_.setRequestHeader("If-None-Match",T.etag[u.url])),p||_.setRequestHeader("X-Requested-With","XMLHttpRequest"),_.setRequestHeader("Accept",u.dataType&&u.accepts[u.dataType]?u.accepts[u.dataType]+", */*":u.accepts._default)}catch(v){}if(u.beforeSend&&u.beforeSend.call(c,_,u)===!1)return u.global&&!--T.active&&T.event.trigger("ajaxStop"),_.abort(),!1;u.global&&r("ajaxSend",[_,u]);var S=_.onreadystatechange=function(e){if(_&&0!==_.readyState&&"abort"!==e){if(!y&&_&&(4===_.readyState||"timeout"===e)){y=!0,_.onreadystatechange=T.noop,d="timeout"===e?"timeout":T.httpSuccess(_)?u.ifModified&&T.httpNotModified(_,u.url)?"notmodified":"success":"error";var t;if("success"===d)try{l=T.httpData(_,u.dataType,u)}catch(n){d="parsererror",t=n}"success"===d||"notmodified"===d?a||i():T.handleError(u,_,d,t),o(),"timeout"===e&&_.abort(),u.async&&(_=null)}}else y||o(),y=!0,_&&(_.onreadystatechange=T.noop)};try{var I=_.abort;_.abort=function(){_&&I.call(_),S("abort")}}catch(C){}u.async&&u.timeout>0&&setTimeout(function(){_&&!y&&S("timeout")},u.timeout);try{_.send("POST"===g||"PUT"===g||"DELETE"===g?u.data:null)}catch(O){T.handleError(u,_,null,O),o()}return u.async||S(),_}},handleError:function(e,t,n,i){e.error&&e.error.call(e.context||e,t,n,i),e.global&&(e.context?T(e.context):T.event).trigger("ajaxError",[t,e,i])},active:0,httpSuccess:function(e){try{return!e.status&&"file:"===location.protocol||e.status>=200&&e.status<300||304===e.status||1223===e.status||0===e.status}catch(t){}return!1},httpNotModified:function(e,t){var n=e.getResponseHeader("Last-Modified"),i=e.getResponseHeader("Etag");return n&&(T.lastModified[t]=n),i&&(T.etag[t]=i),304===e.status||0===e.status},httpData:function(e,t,n){var i=e.getResponseHeader("content-type")||"",o="xml"===t||!t&&i.indexOf("xml")>=0;return e=o?e.responseXML:e.responseText,o&&"parsererror"===e.documentElement.nodeName&&T.error("parsererror"),n&&n.dataFilter&&(e=n.dataFilter(e,t)),"string"==typeof e&&("json"===t||!t&&i.indexOf("json")>=0?e=T.parseJSON(e):("script"===t||!t&&i.indexOf("javascript")>=0)&&T.globalEval(e)),e},param:function(e,n){function i(e,t){T.isArray(t)?T.each(t,function(t,s){n||/\[\]$/.test(e)?o(e,s):i(e+"["+("object"==typeof s||T.isArray(s)?t:"")+"]",s)}):n||null==t||"object"!=typeof t?o(e,t):T.each(t,function(t,n){i(e+"["+t+"]",n)})}function o(e,t){t=T.isFunction(t)?t():t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var s=[];if(n===t&&(n=T.ajaxSettings.traditional),T.isArray(e)||e.jquery)T.each(e,function(){o(this.name,this.value)});else for(var r in e)i(r,e[r]);return s.join("&").replace(He,"+")}});var Ge,Fe={},je=/toggle|show|hide/,ze=/^([+-]=)?([\d+-.]+)(.*)$/,Ve=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];T.fn.extend({show:function(e,t){if(e||0===e)return this.animate(f("show",3),e,t);for(e=0,t=this.length;t>e;e++){var n=T.data(this[e],"olddisplay");if(this[e].style.display=n||"","none"===T.css(this[e],"display")){n=this[e].nodeName;var i;if(Fe[n])i=Fe[n];else{var o=T("<"+n+" />").appendTo("body");i=o.css("display"),"none"===i&&(i="block"),o.remove(),Fe[n]=i}T.data(this[e],"olddisplay",i)}}for(e=0,t=this.length;t>e;e++)this[e].style.display=T.data(this[e],"olddisplay")||"";return this},hide:function(e,t){if(e||0===e)return this.animate(f("hide",3),e,t);for(e=0,t=this.length;t>e;e++){var n=T.data(this[e],"olddisplay");!n&&"none"!==n&&T.data(this[e],"olddisplay",T.css(this[e],"display"))}for(e=0,t=this.length;t>e;e++)this[e].style.display="none";return this},_toggle:T.fn.toggle,toggle:function(e,t){var n="boolean"==typeof e;return T.isFunction(e)&&T.isFunction(t)?this._toggle.apply(this,arguments):null==e||n?this.each(function(){var t=n?e:T(this).is(":hidden");T(this)[t?"show":"hide"]()}):this.animate(f("toggle",3),e,t),this},fadeTo:function(e,t,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n)},animate:function(e,t,n,i){var o=T.speed(t,n,i);return T.isEmptyObject(e)?this.each(o.complete):this[o.queue===!1?"each":"queue"](function(){var t,n=T.extend({},o),i=1===this.nodeType&&T(this).is(":hidden"),s=this;for(t in e){var r=t.replace(Ae,Pe);if(t!==r&&(e[r]=e[t],delete e[t],t=r),"hide"===e[t]&&i||"show"===e[t]&&!i)return n.complete.call(this);
"height"!==t&&"width"!==t||!this.style||(n.display=T.css(this,"display"),n.overflow=this.style.overflow),T.isArray(e[t])&&((n.specialEasing=n.specialEasing||{})[t]=e[t][1],e[t]=e[t][0])}return null!=n.overflow&&(this.style.overflow="hidden"),n.curAnim=T.extend({},e),T.each(e,function(t,o){var r=new T.fx(s,n,t);if(je.test(o))r["toggle"===o?i?"show":"hide":o](e);else{var a=ze.exec(o),d=r.cur(!0)||0;if(a){o=parseFloat(a[2]);var l=a[3]||"px";"px"!==l&&(s.style[t]=(o||1)+l,d=(o||1)/r.cur(!0)*d,s.style[t]=d+l),a[1]&&(o=("-="===a[1]?-1:1)*o+d),r.custom(d,o,l)}else r.custom(d,o,"")}}),!0})},stop:function(e,t){var n=T.timers;return e&&this.queue([]),this.each(function(){for(var e=n.length-1;e>=0;e--)n[e].elem===this&&(t&&n[e](!0),n.splice(e,1))}),t||this.dequeue(),this}}),T.each({slideDown:f("show",1),slideUp:f("hide",1),slideToggle:f("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(e,t){T.fn[e]=function(e,n){return this.animate(t,e,n)}}),T.extend({speed:function(e,t,n){var i=e&&"object"==typeof e?e:{complete:n||!n&&t||T.isFunction(e)&&e,duration:e,easing:n&&t||t&&!T.isFunction(t)&&t};return i.duration=T.fx.off?0:"number"==typeof i.duration?i.duration:T.fx.speeds[i.duration]||T.fx.speeds._default,i.old=i.complete,i.complete=function(){i.queue!==!1&&T(this).dequeue(),T.isFunction(i.old)&&i.old.call(this)},i},easing:{linear:function(e,t,n,i){return n+i*e},swing:function(e,t,n,i){return(-Math.cos(e*Math.PI)/2+.5)*i+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig||(t.orig={})}}),T.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(T.fx.step[this.prop]||T.fx.step._default)(this),"height"!==this.prop&&"width"!==this.prop||!this.elem.style||(this.elem.style.display="block")},cur:function(e){return null==this.elem[this.prop]||this.elem.style&&null!=this.elem.style[this.prop]?(e=parseFloat(T.css(this.elem,this.prop,e)))&&e>-1e4?e:parseFloat(T.curCSS(this.elem,this.prop))||0:this.elem[this.prop]},custom:function(e,t,n){function i(e){return o.step(e)}this.startTime=s(),this.start=e,this.end=t,this.unit=n||this.unit||"px",this.now=this.start,this.pos=this.state=0;var o=this;i.elem=this.elem,i()&&T.timers.push(i)&&!Ge&&(Ge=setInterval(T.fx.tick,13))},show:function(){this.options.orig[this.prop]=T.style(this.elem,this.prop),this.options.show=!0,this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),T(this.elem).show()},hide:function(){this.options.orig[this.prop]=T.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t=s(),n=!0;if(e||t>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;for(var i in this.options.curAnim)this.options.curAnim[i]!==!0&&(n=!1);if(n){if(null!=this.options.display&&(this.elem.style.overflow=this.options.overflow,e=T.data(this.elem,"olddisplay"),this.elem.style.display=e?e:this.options.display,"none"===T.css(this.elem,"display")&&(this.elem.style.display="block")),this.options.hide&&T(this.elem).hide(),this.options.hide||this.options.show)for(var o in this.options.curAnim)T.style(this.elem,o,this.options.orig[o]);this.options.complete.call(this.elem)}return!1}return o=t-this.startTime,this.state=o/this.options.duration,e=this.options.easing||(T.easing.swing?"swing":"linear"),this.pos=T.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||e](this.state,o,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},T.extend(T.fx,{tick:function(){for(var e=T.timers,t=0;t<e.length;t++)e[t]()||e.splice(t--,1);e.length||T.fx.stop()},stop:function(){clearInterval(Ge),Ge=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){T.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=("width"===e.prop||"height"===e.prop?Math.max(0,e.now):e.now)+e.unit:e.elem[e.prop]=e.now}}}),T.expr&&T.expr.filters&&(T.expr.filters.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length}),T.fn.offset="getBoundingClientRect"in A.documentElement?function(e){var t=this[0];if(e)return this.each(function(t){T.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return T.offset.bodyOffset(t);var n=t.getBoundingClientRect(),i=t.ownerDocument;return t=i.body,i=i.documentElement,{top:n.top+(self.pageYOffset||T.support.boxModel&&i.scrollTop||t.scrollTop)-(i.clientTop||t.clientTop||0),left:n.left+(self.pageXOffset||T.support.boxModel&&i.scrollLeft||t.scrollLeft)-(i.clientLeft||t.clientLeft||0)}}:function(e){var t=this[0];if(e)return this.each(function(t){T.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return T.offset.bodyOffset(t);T.offset.initialize();var n,i=t.offsetParent,o=t,s=t.ownerDocument,r=s.documentElement,a=s.body;o=(s=s.defaultView)?s.getComputedStyle(t,null):t.currentStyle;for(var d=t.offsetTop,l=t.offsetLeft;(t=t.parentNode)&&t!==a&&t!==r&&(!T.offset.supportsFixedPosition||"fixed"!==o.position);)n=s?s.getComputedStyle(t,null):t.currentStyle,d-=t.scrollTop,l-=t.scrollLeft,t===i&&(d+=t.offsetTop,l+=t.offsetLeft,!T.offset.doesNotAddBorder||T.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(t.nodeName)||(d+=parseFloat(n.borderTopWidth)||0,l+=parseFloat(n.borderLeftWidth)||0),o=i,i=t.offsetParent),T.offset.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(d+=parseFloat(n.borderTopWidth)||0,l+=parseFloat(n.borderLeftWidth)||0),o=n;return("relative"===o.position||"static"===o.position)&&(d+=a.offsetTop,l+=a.offsetLeft),T.offset.supportsFixedPosition&&"fixed"===o.position&&(d+=Math.max(r.scrollTop,a.scrollTop),l+=Math.max(r.scrollLeft,a.scrollLeft)),{top:d,left:l}},T.offset={initialize:function(){var e,t,n,i=A.body,o=A.createElement("div"),s=parseFloat(T.curCSS(i,"marginTop",!0))||0;T.extend(o.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),o.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",i.insertBefore(o,i.firstChild),e=o.firstChild,t=e.firstChild,n=e.nextSibling.firstChild.firstChild,this.doesNotAddBorder=5!==t.offsetTop,this.doesAddBorderForTableAndCells=5===n.offsetTop,t.style.position="fixed",t.style.top="20px",this.supportsFixedPosition=20===t.offsetTop||15===t.offsetTop,t.style.position=t.style.top="",e.style.overflow="hidden",e.style.position="relative",this.subtractsBorderForOverflowNotVisible=-5===t.offsetTop,this.doesNotIncludeMarginInBodyOffset=i.offsetTop!==s,i.removeChild(o),T.offset.initialize=T.noop},bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return T.offset.initialize(),T.offset.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(T.curCSS(e,"marginTop",!0))||0,n+=parseFloat(T.curCSS(e,"marginLeft",!0))||0),{top:t,left:n}},setOffset:function(e,t,n){/static/.test(T.curCSS(e,"position"))&&(e.style.position="relative");var i=T(e),o=i.offset(),s=parseInt(T.curCSS(e,"top",!0),10)||0,r=parseInt(T.curCSS(e,"left",!0),10)||0;T.isFunction(t)&&(t=t.call(e,n,o)),n={top:t.top-o.top+s,left:t.left-o.left+r},"using"in t?t.using.call(e,n):i.css(n)}},T.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),i=/^body|html$/i.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(T.curCSS(e,"marginTop",!0))||0,n.left-=parseFloat(T.curCSS(e,"marginLeft",!0))||0,i.top+=parseFloat(T.curCSS(t[0],"borderTopWidth",!0))||0,i.left+=parseFloat(T.curCSS(t[0],"borderLeftWidth",!0))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||A.body;e&&!/^body|html$/i.test(e.nodeName)&&"static"===T.css(e,"position");)e=e.offsetParent;return e})}}),T.each(["Left","Top"],function(e,n){var i="scroll"+n;T.fn[i]=function(n){var o,s=this[0];return s?n!==t?this.each(function(){(o=h(this))?o.scrollTo(e?T(o).scrollLeft():n,e?n:T(o).scrollTop()):this[i]=n}):(o=h(s))?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:T.support.boxModel&&o.document.documentElement[i]||o.document.body[i]:s[i]:null}}),T.each(["Height","Width"],function(e,n){var i=n.toLowerCase();T.fn["inner"+n]=function(){return this[0]?T.css(this[0],i,!1,"padding"):null},T.fn["outer"+n]=function(e){return this[0]?T.css(this[0],i,!1,e?"margin":"border"):null},T.fn[i]=function(e){var o=this[0];return o?T.isFunction(e)?this.each(function(t){var n=T(this);n[i](e.call(this,t,n[i]()))}):"scrollTo"in o&&o.document?"CSS1Compat"===o.document.compatMode&&o.document.documentElement["client"+n]||o.document.body["client"+n]:9===o.nodeType?Math.max(o.documentElement["client"+n],o.body["scroll"+n],o.documentElement["scroll"+n],o.body["offset"+n],o.documentElement["offset"+n]):e===t?T.css(o,i):this.css(i,"string"==typeof e?e:e+"px"):null==e?null:this}}),e.jQuery=e.$=T}(window),function e(t,n,i){function o(r,a){if(!n[r]){if(!t[r]){var d="function"==typeof require&&require;if(!a&&d)return d(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){if(!window.OffAmazonPayments||window.OffAmazonPayments.INITIALIZED!==!0){var i=i||{};i.jQuery=e("./jquery"),e("./ArrayPolyfill")(),i.Metrics=e("../widgets/MetricsCollector");var o=e("../widgets/Widgets_core"),s=e("./Constants"),r=e("./Utilities"),a=e("./utilities/LocalStorageUtils").LocalStorageUtils,d=e("./HostedPayments"),l=e("./InlineWidgetError"),u=e("./WidgetDesign"),c=e("./InlineWidget"),g=e("./ConsentWidget"),p=e("./WalletWidget"),f=e("./PaymentAuthorizationWidget"),h=e("./AddressBook"),m=e("./ButtonCallbacks"),E=e("./SessionStabilizer").SessionStabilizer,T=e("./utilities/Cookie"),y=e("./utilities/MetricsStore").MetricsStore,_=e("./APAMetricsHelper");e("./metrics/WidgetsMetrics")(),i.Widgets=o.Widgets,i.Widgets.Design=u,i.Widgets.InlineWidget=c,i.Widgets.InlineWidget.Error=l,i.Widgets.Consent=g,i.Widgets.Wallet=p,i.Widgets.AddressBook=h,i.Widgets.PaymentAuthorization=f,i.HostedPayments=d,i.Button=o.Button,i.Button.before_callbacks=m.before_callbacks,i.Button.after_callbacks=m.after_callbacks,i.Widgets.Utilities=r,i.Widgets.Browser={isiOS:r.isiOS},i.Widgets.Cookie=T,i.Widgets.Utilities.isDynamicButtonUsed=o.isDynamicButtonUsed,i.Widgets.Utilities.getButtonPath=e("./ButtonHelper").getButtonPath,i.Widgets.Constants=s.constants,i.SessionStabilizer=E,i.LocalStorageUtils=a,i.MetricsStore=y,E.setSession(),i.Widgets.WidgetTypes=s.others.WidgetTypes,i.Widgets.ButtonTypes=s.others.ButtonTypes,i.Widgets.CartOrigins=s.others.CartOrigins,i.Widgets.DisplayModes=s.others.DisplayModes,i.Widgets.PaymentInstrumentsDisplayOptions=s.others.PaymentInstrumentsDisplayOptions,i.Widgets.TaskQueue=e("./TaskQueue").TaskQueue,i.Widgets.Task=e("./TaskQueue").Task,i.Widgets.EventTypes=e("./EventTypes"),i.Widgets.Mediator=e("./Mediator").Mediator,i.Widgets.mediator=e("./Mediator").instance,i.Widgets.taskQueue=e("./TaskQueue").getTaskQueue(),i.Widgets.setTaskQueue=e("./TaskQueue").setTaskQueue;var A=e("./BridgeHelper"),v=e("./LPAMetricsHelper");i.Widgets.Utilities.setup=A.setup,i.Widgets.Utilities.setup_=A.setup_,i.Widgets.Utilities.onBridgeReady=A.onBridgeReady,i.Widgets.Utilities.publishMetricsForLPAButton=v.publishMetricsForLPAButton,i.Widgets.Utilities.publishMetricsForLPAButtonLanguage=v.publishMetricsForLPAButtonLanguage,i.Widgets.Utilities.APAButtonOnLoad=_.APAButtonOnLoad,i.Widgets.Utilities.publishAPAButtonLoadingMetric=_.publishAPAButtonLoadingMetric,i.Widgets.Utilities.addAndPublishMetricsToButtonCollector=_.addAndPublishMetricsToButtonCollector,i.Widgets.Utilities.addWidgetsJSLoadLatencyMetric=_.addWidgetsJSLoadLatencyMetric,i.Widgets.Widget=e("./Widget"),i.Widgets.CheckoutWidget=e("./CheckoutWidget"),i.DynamicButton=e("../widgets/DynamicButtons");var S=e("../widgets/ABTest");i.ABTest=S.ABTest,i.ZERO_TIME=e("./ZeroTime")(),i.INITIALIZED=!0,window.OffAmazonPayments=i}},{"../widgets/ABTest":35,"../widgets/DynamicButtons":36,"../widgets/MetricsCollector":37,"../widgets/Widgets_core":38,"./APAMetricsHelper":2,"./AddressBook":3,"./ArrayPolyfill":4,"./BridgeHelper":5,"./ButtonCallbacks":7,"./ButtonHelper":8,"./CheckoutWidget":9,"./ConsentWidget":11,"./Constants":12,"./EventTypes":13,"./HostedPayments":15,"./InlineWidget":16,"./InlineWidgetError":17,"./LPAMetricsHelper":18,"./Mediator":20,"./PaymentAuthorizationWidget":21,"./SessionStabilizer":23,"./TaskQueue":24,"./Utilities":25,"./WalletWidget":26,"./Widget":27,"./WidgetDesign":28,"./ZeroTime":29,"./jquery":30,"./metrics/WidgetsMetrics":31,"./utilities/Cookie":32,"./utilities/LocalStorageUtils":33,"./utilities/MetricsStore":34}],2:[function(e,t,n){function i(e,t,n){var i=(new Date).getTime();o(e,i,t,n)}function o(e,t,n,i){var o=new d.Collector(n);o.addButtonInfoData(d.ProductTypes.APA,d.PageActions.BUTTON_RENDER,i,n);var s=u.Utilities.isSellerInABTest(a.getCartOwnerId(),u.Tests.Default)?"abtest-apa-button-loading":"apa-button-loading";o.addTiming(s,e,t),o.publish()}function s(e,t,n,i,o){var s=l()+e.BUTTON_START_TIME;t.addButtonInfoData(d.ProductTypes.APA,d.PageActions.BUTTON_RENDER,i,o),t.addCounter("apa-buttonrender"),r(t),t.addTiming("button-clickable",s,n+g.getWidgetCoreExecutionEndTime()),t.addTiming("button-clickable-js-load",l(),n),t.publish()}function r(e){e.addTiming("apa-widgets-js-loading",l(),g.getWidgetCoreExecutionEndTime())}var a=e("./Utilities"),d=e("../widgets/MetricsCollector"),l=e("./ZeroTime"),u=e("../widgets/ABTest").ABTest,c=e("./ButtonCallbacks"),g=e("./Config");c.APA_Image_Loaded_callbacks.push(i),t.exports={APAButtonOnLoad:i,publishAPAButtonLoadingMetric:o,addAndPublishMetricsToButtonCollector:s,addWidgetsJSLoadLatencyMetric:r}},{"../widgets/ABTest":35,"../widgets/MetricsCollector":37,"./ButtonCallbacks":7,"./Config":10,"./Utilities":25,"./ZeroTime":29}],3:[function(e,t,n){var i={Widgets:{},jQuery:e("./jquery")},o=e("./Utilities"),s=e("./Constants"),r=e("./LwaLogin"),a=e("./InlineWidgetError"),d=e("./InlineWidget"),l=e("./Mediator").instance,u=e("./EventTypes"),c=e("./Config"),g=e("../widgets/MetricsCollector"),p=e("./PubSub"),f="Form";i.Widgets.AddressBook=function(e){g.Collector.time("addresswidget-pre-render"),this.type=s.others.WidgetTypes.AddressBook,d.call(this,e);var t=this.design.width,n=this.design.height;switch(this.getDisplayMode()){case s.others.DisplayModes.read:this.design.checkWidth&&(void 0===t?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.width",t)):(this.design.width=o.verifySize(t,void 0,s.constants.ADDRESS_WIDGET.READ.min_width,s.constants.ADDRESS_WIDGET.READ.max_width),a.RaiseOnErrorIfUndefined(this.design.width,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.width",t),this))),this.design.checkHeight&&(void 0===n?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.height",n)):(this.design.height=o.verifySize(n,void 0,s.constants.ADDRESS_WIDGET.READ.min_height,s.constants.ADDRESS_WIDGET.READ.max_height),a.RaiseOnErrorIfUndefined(this.design.height,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.height",n),this)));break;case s.others.DisplayModes.edit:s.constants.ADDRESS_WIDGET_PRESENT=!0,this.design.checkWidth&&(void 0===t?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.width",t)):(this.design.width=o.verifySize(t,void 0,s.constants.ADDRESS_WIDGET.EDIT.min_width,s.constants.ADDRESS_WIDGET.EDIT.max_width),a.RaiseOnErrorIfUndefined(this.design.width,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.width",t),this))),this.design.checkHeight&&(void 0===n?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.height",n)):(this.design.height=o.verifySize(n,void 0,s.constants.ADDRESS_WIDGET.EDIT.min_height,s.constants.ADDRESS_WIDGET.EDIT.max_height),a.RaiseOnErrorIfUndefined(this.design.height,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.height",n),this)))}this.onAddressSelect=e.onAddressSelect,this.shippingRestrictions=e.shippingRestrictions,this.getDestinationName=function(){return e.destinationName},i.jQuery(this).bind(u.ON_ADDRESS_SELECT_PRE,this,this.onAddrSelectPreHandler),i.jQuery(this).bind(u.ON_ADDRESS_SELECT,this,this.onAddrSelectHandler)},i.Widgets.AddressBook.prototype=o.createSubclass(d.prototype),i.Widgets.AddressBook.prototype.constructor=i.Widgets.AddressBook,i.Widgets.AddressBook.prototype.onAddrSelectPreHandler=function(e){var t=e.data,n=t.eventValue;if(this.getID()===n){var i=l.getWalletWidgets();if("undefined"!=typeof i)for(var o=0;o<i.length;o++)i[o].hideEventHandler()}},i.Widgets.AddressBook.prototype.onAddrSelectHandler=function(e){p.publish("ADDRESS_RENDER_COMPLETE",this.getID(),this.getSellerId());var t=e.data,n=t.eventValue;if(this.rendered=!0,this.getID()===n){void 0!==this.onAddressSelect&&this.onAddressSelect(t),this.getWidgetCount()>1&&clearTimeout(s.constants.TIMEOUT_ID);var i=l.getWalletWidgets();if("undefined"!=typeof i)for(var o=0;o<i.length;o++)i[o].refreshEventHandler()}},i.Widgets.AddressBook.prototype.renderElements=function(){if(p.publish("ADDRESS_RENDER_START",this.getID()),void 0!==this.hasError&&this.hasError)return i.jQuery("#"+this.locationID).empty(),!1;var e=this;o.setLwaSandboxMode(),"undefined"!=typeof r()&&"undefined"!=typeof r().Login&&"undefined"!=typeof r().Login.getClientId&&"undefined"!=typeof r().Login.getClientId()?o.getAccessToken(e,e.renderAddressBook):e.renderAddressBook(e,"")},i.Widgets.AddressBook.prototype.renderAddressBook=function(e,t){var n=e.getID()+"IFrame",r=o.createIFrameString(n,e.design.width,e.design.height),d=e.getID()+f,l=c.WIDGET_ENDPOINT+s.constants.INLINE_WIDGETS_URI,u={action:c.ADDRESS_WIDGET_ACTION,referringURL:window.top.location,cartOwnerId:e.getSellerId(),marketplaceSellerId:e.getMarketplaceSellerId(),access_token:t,agreementType:e.agreementType,displayMode:e.getDisplayMode(),widgetId:e.getID(),widgetWidth:e.design.width,widgetHeight:e.design.height,widgetDesignMode:e.design.designMode,browserWindowHeight:e.getBrowserWindowHeight(),widgetPadding:e.design.padding,clientId:o.getClientId()};if("undefined"!=typeof e.getContractId()&&null!==e.getContractId()?u.contractId=e.getContractId():"function"==typeof e.onOrderReferenceCreate?u.createContract=!0:"function"==typeof e.onBillingAgreementCreate?u.createContract=!0:"function"==typeof e.onReady&&(u.createContract=!0),void 0!==e.shippingRestrictions){var p=e.encodeShippingRestrictions();u.shippingRestrictions=p}void 0!==e.getDestinationName()&&(u.destinationName=e.getDestinationName()),a.isMissingParameter("sellerId",e.getSellerId(),e),e.error&&e.error.errorType&&(u.clientErrorType=e.error.errorType,u.clientErrorElementName=e.error.errorElementName,u.clientErrorElementValue=e.error.errorElementValue,u.clientErrorMessage=e.error.errorMessage);var h=o.createFormString(d,l,n,u);i.jQuery("#"+d).remove(),o.createWidgetContainer(e.locationID,e.getID(),e.design.width,e.design.height,r,e.type),o.createWidgetForm(e.locationID,e.getID(),e.design.width,e.design.height,h,d),s.constants.READY_TO_RENDER&&(g.Collector.timeEnd("addresswidget-pre-render"),i.jQuery("#"+d).submit())},t.exports=i.Widgets.AddressBook},{"../widgets/MetricsCollector":37,"./Config":10,"./Constants":12,"./EventTypes":13,"./InlineWidget":16,"./InlineWidgetError":17,"./LwaLogin":19,"./Mediator":20,"./PubSub":22,"./Utilities":25,"./jquery":30}],4:[function(e,t,n){t.exports=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)return-1;var n=this.length>>>0;for(t=+t||0,Math.abs(t)===1/0&&(t=0),0>t&&(t+=n,0>t&&(t=0));n>t;t++)if(this[t]===e)return t;return-1})}},{}],5:[function(e,t,n){function i(){l.Collector.time("waiting-session-stabalizer"),m.setSessionDone(r)}function o(){u.READY_TO_RENDER=!0;for(var e in p.registry)if(p.registry.hasOwnProperty(e)){var t=p.registry[e];d.jQuery(t).trigger(c.DOCUMENT_READY,t)}}function s(e){var t="#"+u.BRIDGE_IFRAME_NAME,n=d.jQuery(t);if("undefined"==typeof n||0===n.length){var i=f.WIDGET_ENDPOINT+u.BRIDGE_WIDGET_URI;"media-central"===g.readCookie("ap_static_iframe_bridge_source")&&(i=f.WIDGET_ENDPOINT+"/static/"+u.COUNTRY_CODE_TO_LANGUAGE_COUNTRY_MAP[f.COUNTRY_CODE]+"/"+u.CONTEXT+"/bridge");var o=h.createIframeStringWithSrc(u.BRIDGE_IFRAME_NAME,i,"1px","1px");if(d.jQuery(document.body).append(o),d.jQuery(t).css("display","none"),"function"==typeof e){var s=document.getElementById(u.BRIDGE_IFRAME_NAME);s.onload=e}}}function r(){l.Collector.timeEnd("waiting-session-stabalizer"),h.isIE()?(l.Collector.time("iframe-bridge"),s(a)):(s(),o())}function a(){l.Collector.timeEnd("iframe-bridge"),o()}var d={jQuery:e("./jquery"),Widgets:{Utilities:{}}},l=e("../widgets/MetricsCollector"),u=e("./Constants").constants,c=e("./EventTypes"),g=e("./utilities/Cookie"),p=e("../core/Mediator").instance,f=e("./Config"),h=e("./Utilities"),m=e("../core/SessionStabilizer");t.exports={setup:i,setup_:r,onBridgeReady:a,createBridgeIfNotExist:s}},{"../core/Mediator":20,"../core/SessionStabilizer":23,"../widgets/MetricsCollector":37,"./Config":10,"./Constants":12,"./EventTypes":13,"./Utilities":25,"./jquery":30,"./utilities/Cookie":32}],6:[function(e,t,n){function i(){for(var e=0;e<d.length;e++)if(-1!==navigator.userAgent.toLowerCase().indexOf(d[e].userAgent))return l=e,!1;return!0}function o(e){return function(){alert(d[l].errMsgKey);var t=new a.Collector(e);t.addCounter(d[l].errCounter),t.publish()}}function s(e){var t=new a.Collector(e);t.addCounter("ios-fb-browser-support"),t.publish()}var r=e("./Config"),a=e("../widgets/MetricsCollector"),d=[{userAgent:"fbios",errMsgKey:r.IOS_UNSUPPORTED_BROWSER_WARNING,errCounter:"ios-unsupported-browser-warning"}],l=0;t.exports={unsupportedUserAgents:d,isSupportedBrowser:i,notSupportedBrowserHandler:o,iOSFBSupportedBrowserHandler:s}},{"../widgets/MetricsCollector":37,"./Config":10}],7:[function(e,t,n){var i={Button:{}};i.Button.after_callbacks=[],i.Button.before_callbacks=[],i.Button.APA_Image_Loaded_callbacks=[],i.Button.APA_before_callbacks=[],i.Button.before_publish_click_metric_callbacks=[],t.exports={before_callbacks:i.Button.before_callbacks,after_callbacks:i.Button.after_callbacks,APA_Image_Loaded_callbacks:i.Button.APA_Image_Loaded_callbacks,APA_before_callbacks:i.Button.APA_before_callbacks,before_publish_click_metric_callbacks:i.Button.before_publish_click_metric_callbacks}},{}],8:[function(e,t,n){function i(e,t){var n="",i="",a="",d="";if(void 0!==e?(n=o.getValueBasedOnInput(s.constants.BUTTON_COLOR_SET,e.color,s.constants.BUTTON_DEFAULT_COLOR),i=o.getValueBasedOnInput(s.constants.BUTTON_SIZE_SET,e.size,s.constants.BUTTON_DEFAULT_SIZE),a=o.getValueBasedOnInput(s.constants.BUTTON_BACKGROUND_SET,e.background,s.constants.BUTTON_DEFAULT_BACKGROUND)):(n=s.constants.BUTTON_DEFAULT_COLOR,i=s.constants.BUTTON_DEFAULT_SIZE,a=s.constants.BUTTON_DEFAULT_BACKGROUND),r.Utilities.isSellerInABTest(o.getCartOwnerId(),r.Tests.Default))d=r.Utilities.getButtonPath(n,i);else{var l=s.constants.BUTTON_BASE_PATH,u="";u=t?"donation/":"pwa/",u+=n+"/"+i+"/"+a+"/",d=l+u}return d}var o=e("./Utilities"),s=e("./Constants"),r=e("../widgets/ABTest").ABTest;t.exports={getButtonPath:i}},{"../widgets/ABTest":35,"./Constants":12,"./Utilities":25}],9:[function(e,t,n){var i={jQuery:e("./jquery"),Widgets:{}},o=e("./ButtonHelper"),s=e("./Constants"),r=e("./Utilities"),a=e("../widgets/ABTest").ABTest,d=e("./Widget"),l=e("./APAMetricsHelper"),u=e("./ButtonCallbacks"),c=e("./BrowserSupport"),g=e("./HostedPayments"),p={ERROR:"ERROR"},f={ERROR_IN_ADDING_EVENT_ON_OPEN:"Error caught in addEventListener during onOpen invocation"};i.Metrics=e("../widgets/MetricsCollector");var h=e("./Config");i.Widgets.ButtonSettings=function(e){"undefined"!=typeof e&&(this.size=e.size,this.color=e.color,this.background=e.background)},i.Widgets.CheckoutWidget=function(e){d.call(this,e),"undefined"!=typeof e.sellerId&&null!==e.sellerId&&(s.constants.CartOwnerId=e.sellerId),this.buttonSettings=new i.Widgets.ButtonSettings(e.buttonSettings)},i.Widgets.CheckoutWidget.prototype=r.createSubclass(d.prototype),i.Widgets.CheckoutWidget.prototype.constructor=i.Widgets.CheckoutWidget,i.Widgets.CheckoutWidget.prototype.onErrorCallbackHandler=function(e){var t=e.data,n=t.eventValue;this.getID()===n?"function"==typeof this.onErrorCallback&&this.onErrorCallback(t.error):(delete t.eventValue,delete t.error)},i.Widgets.CheckoutWidget.prototype.getPopupWindowName=function(){return s.constants.POPUP_WIN_NAME+this.getSellerId()},i.Widgets.CheckoutWidget.prototype.documentReadyEventHandler=function(e,t){d.prototype.documentReadyEventHandler.call(this,e,t)},i.Widgets.CheckoutWidget.prototype.bindClickHandler=function(e){var t=this.getPreExistingButtons();if(void 0!==t&&t.length>0){var n=e.getSellerId(),o=g.isHostedPaymentsInput(e.buttonType),s=c.isSupportedBrowser()||o?e.onClickHandler:c.notSupportedBrowserHandler(n);o&&!c.isSupportedBrowser()&&c.iOSFBSupportedBrowserHandler(n);for(var r=0;r<t.length;r++)i.jQuery(t[r]).bind("click",e,s);var a=(new Date).getTime(),d=new i.Metrics.Collector(n);l.addAndPublishMetricsToButtonCollector.call(null,this,d,a,e.buttonType,n)}this.collector.publish()},i.Widgets.CheckoutWidget.prototype.onClickHandler=function(e){if(e.data.setupFormTargetArea(e),"undefined"!=typeof e.data.onOpen&&e.data.onOpen)e.data.onOpen(e.data);else try{e.data.popupWindow.addEventListener("load",function(){r.isiOS()?e.data.submit():setTimeout(function(){e.data.submit()},s.constants.TIMER_INTERVAL)}),e.data.popupWindow.document.close()}catch(t){if(window.ueLogError){var n={logLevel:p.ERROR,attribution:"Widget_core.js",message:f.ERROR_IN_ADDING_EVENT_ON_OPEN};window.ueLogError(t,n)}e.data.submit()}},i.Widgets.CheckoutWidget.prototype.setupFormTargetArea=function(e){var t=s.constants.POPUP_WIN_NAME+e.data.getSellerId();e.data.popupWindow=r.openPopUp(t),e.data.popupWindowName=t},i.Widgets.CheckoutWidget.prototype.renderElements=function(){if(void 0!==this.hasError&&this.hasError)return i.jQuery("#"+this.locationID).remove(),!1;var e=this.getPreExistingButtons();if(void 0!==e&&e.length>0)return this.collector.addCounter("image-present-in-div"),void(a.Utilities.isSellerInABTest(r.getCartOwnerId(),a.Tests.Default)&&a.Utilities.bindButtonOnloadActions(e[0]));this.collector.addCounter("image-added-by-js");var t=this.buttonSettings,n=this.getID(),d=o.getButtonPath(t,this.buttonType===s.others.ButtonTypes.DONATION);a.Utilities.isSellerInABTest(r.getCartOwnerId(),a.Tests.Default)||(d+=s.constants.BUTTON_PWA_BUTTONNAME);var l=(new Date).getTime(),c=this.getSellerId(),g=this.buttonType,p=function(){for(var e=0;e<u.APA_Image_Loaded_callbacks.length;e++)u.APA_Image_Loaded_callbacks[e].call(this,l,c,g)},f=document.createElement("img");if(f.style.cursor="pointer",f.className="amazon-payment-button-loaded",f.setAttribute("uri",d),f.setAttribute("src",d),f.setAttribute("id",n),i.jQuery(f).load(p),i.jQuery("#"+this.locationID).append(f),a.Utilities.isSellerInABTest(r.getCartOwnerId(),a.Tests.Default)){var h=this.getPreExistingButtons();a.Utilities.bindButtonOnloadActions(h[0])}},i.Widgets.CheckoutWidget.prototype.getPreExistingButtons=function(){var e=h.WIDGET_ENDPOINT+s.constants.BUTTON_URI,t=i.jQuery("#"+this.locationID+" img").filter(function(t,n){var o=i.jQuery(n).attr("src");return"undefined"!=typeof o&&(0===o.indexOf(e)||0===o.indexOf(s.constants.BUTTON_BASE_PATH))||i.jQuery(n).hasClass("amazon-payment-button-loaded")?!0:void 0});return t},t.exports=i.Widgets.CheckoutWidget},{"../widgets/ABTest":35,"../widgets/MetricsCollector":37,"./APAMetricsHelper":2,"./BrowserSupport":6,"./ButtonCallbacks":7,"./ButtonHelper":8,"./Config":10,"./Constants":12,"./HostedPayments":15,"./Utilities":25,"./Widget":27,"./jquery":30}],10:[function(e,t,n){var i={WIDGET_ENDPOINT:"https://payments-uk-sandbox.amazon.com",AP_LOGO_IMG:"https://images-na.ssl-images-amazon.com/images/G/02/cba/images/logos/logo_amazonpayments_overlay.gif",AP_CONDITIONS_LINK:"TBD",AP_CONDITIONS_STRING:"TBD",AP_PRIVACY_LINK:"TBD",AP_PRIVACY_STRING:"TBD",COUNTRY_CODE:"GB",LWA_ENDPOINT:"eu.account.amazon.com",LOADING_IMAGE_GIF:"https://images-na.ssl-images-amazon.com/images/G/01/ep/loading-large.gif",LOADING_IMAGE_LARGE_GIF:"https://images-na.ssl-images-amazon.com/images/G/01/ep/loading-large.gif",LWA_JAVASCRIPT_ENDPOINT:"https://eu.account.amazon.com/lwa/js/sdk/login1.js",CORE_JAVASCRIPT_ENDPOINT:"https://images-na.ssl-images-amazon.com/images/G/02/EP/offAmazonPayments/sandbox/prod/lpa/js/Widgets_core.js",IS_PP_ENABLED:"false",IS_SANDBOX:"true",CASHBACK_TNC_LINK:"TBD",CASHBACK_TNC_NAME:"TBD",CASHBACK_TNC_DIMENSIONS:"TBD",ADDRESS_WIDGET_ACTION:"spaAddressWidget",WALLET_WIDGET_ACTION:"spaWalletWidget",BUTTON_SCRIPT_BASE_PATH:"https://images-na.ssl-images-amazon.com/images/G/02/EP/offAmazonPayments/live/prod/js/",BUTTON_IMAGE_BASE_PATH_PREFIX:"https://images-na.ssl-images-amazon.com/images/G/01/EP/offAmazonPayments/",BUTTON_IMAGE_BASE_PATH_SUFFIX:"/sandbox/prod/image/",DEFAULT_ABTEST_MERCHANTS:"",LPA_BUTTONS_ABTEST_MERCHANTS:"",MULTI_BUTTONS_ABTEST_MERCHANTS:"",MULTI_BUTTONS_ABTEST_ALLOWED_TREATMENTS:"",DONATION_WIDGET_CSS:"https://images-eu.ssl-images-amazon.com/images/G/01/EP/offAmazonPayments/common/uk/prod/css/donations.css",MULTI_LANGUAGE_SELLER_BLACKLIST:"A1NI8WO6CEF9OY,A3GYC6ZTUF0H58,A2SAM1RSSDHN3F,A1CVMNEOAGJM27,AER250529I8DL,A1MO8MP4HM0NF0,A30KHOTOGEZVN6,A19D94WR4N8XRB,ACZRNWT3MG9PH,A1PAQ9179PFRUU,A1Z5LD4IOXQBWI,A2B1FHOPROEBO9,A1SX5OMHNIVIRY,ADJZZF58XFNSR,A3OYULGWSLM4RV,A3K5IAZ1MPUUWJ,A2CMVUSSXITEXG,A8YW7SSHQPDDL,A1WBO4Q9TD76X4,A3TGS7NP256OOR,A311AOGU8716CM,A20K6TEPNHVOLP,A1S8TGZLHDZDE4,A1VW8T5597UFFV,A2YLVU4P8BX4WF,A34NANP4JU0XHH,A3KZK7IAMHB3JI,A67A5HC3O5SUX,A7UR4TROMBU9N,AYJCDPC9KIKMS",PAY_WITH_AMAZON:"Pay with Amazon",PAYMENT_METHOD:"",ADDRESS_BOOK:"",NA_ACCOUNT_DOMAIN_ENDPOINT:"",NA_ACCOUNT_DOMAIN_WHITELISTED_SELLERS:"",IE_UNSUPPORTED_BROWSER_WARNING:"The browser version you are using is not supported by Pay with Amazon. For a list of supported browsers and browser versions, see our Browser Support Help topic at https://payments.amazon.com/help/202030010.",IOS_UNSUPPORTED_BROWSER_WARNING:"The browser version you are using is not supported by Pay with Amazon. For a list of supported browsers and browser versions, see our Browser Support Help topic at https://payments.amazon.com/help/202030010.",WALLET_WIDGET_ABTEST_MERCHANTS:"ALLMERCHANTS",WALLET_WIDGET_ABTEST_ALLOWED_TREATMENTS:"C,T1",SVG_WEBLAB_ABTEST_MERCHANTS:"ALLMERCHANTS",SVG_WEBLAB_ABTEST_ALLOWED_TREATMENTS:"C,T1",getWidgetCoreExecutionEndTime:function(){return window.OffAmazonPayments?window.OffAmazonPayments.WIDGET_CORE_EXECUTION_END_TIME:0}};t.exports=i},{}],11:[function(e,t,n){var i={Widgets:{},jQuery:e("./jquery")},o=e("./Constants"),s=e("./Utilities"),r=e("./InlineWidgetError"),a=e("./InlineWidget"),d=e("./EventTypes"),l=e("./Mediator").instance,u=e("./LwaLogin"),c=e("./Config"),g=e("../widgets/MetricsCollector"),p="Form";i.Widgets.Consent=function(e){g.Collector.time("consentwidget-pre-render"),this.type=o.others.WidgetTypes.Consent,a.call(this,e);var t;this.getConsentValue=function(){return t},this.setConsentValue=function(e){t=e},this.getConsentStatus=this.getConsentValue,this.onReady=e.onReady,this.onConsent=e.onConsent;var n=this.design.width,u=this.design.height;l.register(this),i.jQuery(this).bind(d.ON_CONSENT_WIDGET_READY,this,this.consentWidgetReadyEventHandler),i.jQuery(this).bind(d.ON_CONSENT_STATUS_CHANGED,this,this.consentWidgetStatusChangeEventHandler),this.design.checkWidth&&(void 0===n?r.RaiseMissingParameterError(this,s.buildParamNameValueMap("design.width",n)):(this.design.width=s.verifySize(n,void 0,o.constants.CONSENT_WIDGET.EDIT.min_width,o.constants.CONSENT_WIDGET.EDIT.max_width),
r.RaiseOnErrorIfUndefined(this.design.width,o.constants.INVALID_PARAMETER_VALUE_MSG,s.buildParamNameValueMap("design.width",n),this))),this.design.checkHeight&&(void 0===u?r.RaiseMissingParameterError(this,s.buildParamNameValueMap("design.height",u)):(this.design.height=s.verifySize(u,void 0,o.constants.CONSENT_WIDGET.EDIT.min_height,o.constants.CONSENT_WIDGET.EDIT.max_height),r.RaiseOnErrorIfUndefined(this.design.height,o.constants.INVALID_PARAMETER_VALUE_MSG,s.buildParamNameValueMap("design.height",u),this)))},i.Widgets.Consent.prototype=s.createSubclass(a.prototype),i.Widgets.Consent.prototype.constructor=i.Widgets.Consent,i.Widgets.Consent.prototype.consentWidgetReadyEventHandler=function(e){var t=e.data,n=t.eventValue;this.setConsentValue(n),void 0!==this.onReady&&this.onReady(t)},i.Widgets.Consent.prototype.consentWidgetStatusChangeEventHandler=function(e){var t=e.data,n=t.eventValue;this.setConsentValue(n),void 0!==this.onConsent&&this.onConsent(t)},i.Widgets.Consent.prototype.renderElements=function(){if(void 0!==this.hasError&&this.hasError)return i.jQuery("#"+this.locationID).empty(),!1;var e=this;"undefined"!=typeof u()&&"undefined"!=typeof u().Login&&"undefined"!=typeof u().Login.getClientId&&"undefined"!=typeof u().Login.getClientId()?s.getAccessToken(e,e.renderConsent):e.renderConsent(e,"")},i.Widgets.Consent.prototype.renderConsent=function(e,t){var n=e.getID()+"IFrame",r=s.createIFrameString(n,e.design.width,e.design.height),a=e.getID()+p,d=c.WIDGET_ENDPOINT+o.constants.INLINE_WIDGETS_URI,l={action:"consentWidget",referringURL:window.top.location,cartOwnerId:e.getSellerId(),contractId:e.getContractId(),access_token:t,displayMode:o.others.DisplayModes.edit,widgetId:e.getID(),widgetWidth:e.design.width,widgetHeight:e.design.height,widgetDesignMode:e.design.designMode,widgetPadding:e.design.padding,browserWindowHeight:e.getBrowserWindowHeight()};e.error&&e.error.errorType&&(l.clientErrorType=e.error.errorType,l.clientErrorElementName=e.error.errorElementName,l.clientErrorElementValue=e.error.errorElementValue,l.clientErrorMessage=e.error.errorMessage);var u=s.createFormString(a,d,n,l);i.jQuery("#"+a).remove(),s.createWidgetContainer(e.locationID,e.getID(),e.design.width,e.design.height,r,e.type),s.createWidgetForm(e.locationID,e.getID(),e.design.width,e.design.height,u,a),o.constants.READY_TO_RENDER&&(g.Collector.timeEnd("consentwidget-pre-render"),i.jQuery("#"+a).submit())},t.exports=i.Widgets.Consent},{"../widgets/MetricsCollector":37,"./Config":10,"./Constants":12,"./EventTypes":13,"./InlineWidget":16,"./InlineWidgetError":17,"./LwaLogin":19,"./Mediator":20,"./Utilities":25,"./jquery":30}],12:[function(e,t,n){var i={Widgets:{}},o=e("./Config");i.Widgets.Mobile=function(){var e=navigator.userAgent.toLowerCase(),t=new Array("iphone","ipod","series60","symbian","android","windows ce","blackberry","palm");return{isMobile:function(){for(var n=0;n<t.length;n++){var i=t[n];if(e.search(i)>-1)return!0}return!1}}}(),i.Widgets.Constants={},i.Widgets.Constants.POPUP_WIN_WIDTH=520,i.Widgets.Constants.POPUP_WIN_HEIGHT=475,i.Widgets.Constants.POPUP_WIN_NAME="OffAmazonPaymentsPopupWindow",i.Widgets.Mobile.isMobile()&&(o.LOADING_IMAGE_GIF=o.LOADING_IMAGE_LARGE_GIF),i.Widgets.Constants.POPUP_LOADING_HTML='<style> a {color:#004B91;} #headerSlots {padding-top: 0; height: 50px;} #pageLoading #mainContentArea {height: 375px;overflow-y: auto;}  #imgLoading {text-align: center; padding-top: 120px;} #footerSlots {width: 100%;height: 50px;position: fixed;bottom: 0px;left: 0px;} #footerSlots #amazonPaymentsLogo {background: url("'+o.AP_LOGO_IMG+"\") no-repeat center top;margin-top: 4px;height: 17px;text-indent: -9999px;} #footerSlots .AtoZ {font-size: 10px; padding-top: 1px;} #footerSlots .ap_privacy_info {font-size: 9px;} div#bottom-6 {left:auto;top:auto;text-align: center;border-top:1px solid #B3B3B3;} .ap_privacy_info {font-family:Verdana;font-size:10px;font-weight:normal;} </style>  <div id='pageLoading'> <div id='wrapper'>  <div id='headerSlots'></div>  <div id='mainContentArea'>  <div id='centerSlots'>  <div id='center-1'>  <div id='imgLoading'>  <img id='loadingImg' src='"+o.LOADING_IMAGE_GIF+"'> </div>  </div>  </div>  </div>  <div id='footerSlots'>  <div id='bottom-6'> <div class='amazonPaymentLogo' id='amazonPaymentsLogo'></div>  </div> </div> </div> </div>",i.Widgets.Constants.BUTTON_URI="/gp/widgets/button",i.Widgets.Constants.INLINE_WIDGETS_URI="/gp/widgets/widgets",i.Widgets.Constants.BRIDGE_WIDGET_URI="/gp/widgets/widgets?action=bridge",i.Widgets.Constants.CartOwnerId="",i.Widgets.Constants.CSM_URI="/gp/apa/csm/jsonp?",i.Widgets.Constants.HOSTED_PAYMENTS_URI="/gp/widgets/hosted/init",i.Widgets.Constants.BRIDGE_IFRAME_NAME="OffAmazonPaymentsBridgeIframe",i.Widgets.Constants.CONTRACT_FRAME_ID="OffAmazonPaymentsContractFrame",i.Widgets.Constants.CONTRACT_FORM_ID="OffAmazonPaymentsContractForm",i.Widgets.Constants.WIDGETID_PREFIX="OffAmazonPaymentsWidgets",i.Widgets.Constants.WIDGETID_PARAM_NAME=";widgetId=",i.Widgets.Constants.COUNTRY_CODE_TO_LANGUAGE_COUNTRY_MAP={US:"us",GB:"uk",DE:"de",IN:"uk",JP:"jp"},i.Widgets.Constants.BUTTON_BASE_PATH_PREFIX=o.BUTTON_IMAGE_BASE_PATH_PREFIX,i.Widgets.Constants.BUTTON_BASE_PATH_SUFFIX=o.BUTTON_IMAGE_BASE_PATH_SUFFIX,i.Widgets.Constants.BUTTON_BASE_PATH=i.Widgets.Constants.BUTTON_BASE_PATH_PREFIX+i.Widgets.Constants.COUNTRY_CODE_TO_LANGUAGE_COUNTRY_MAP[o.COUNTRY_CODE]+i.Widgets.Constants.BUTTON_BASE_PATH_SUFFIX,i.Widgets.Constants.BUTTON_COLOR_SET=["orange","tan"],i.Widgets.Constants.BUTTON_SIZE_SET=["medium","large","x-large"],i.Widgets.Constants.BUTTON_BACKGROUND_SET=["dark","white"],i.Widgets.Constants.BUTTON_LWA_COLOR_SET=["darkgray","lightgray","gold"],i.Widgets.Constants.BUTTON_LWA_SIZE_SET=["small","medium","large","x-large"],i.Widgets.Constants.BUTTON_LWA_TEXT_SET=["pwa","lwa","editorupdate","pay","a","login","hostedpayment","donate","dwa"],i.Widgets.Constants.BUTTON_LWA_TEXT_IMAGE_SET=["PwA.svg","LwA.png","EditOrUpdate.png","Pay.png","A.png","Login.png","PwA.svg","Donate.png","DwA.png"],i.Widgets.Constants.BUTTON_DEFAULT_COLOR="orange",i.Widgets.Constants.BUTTON_DEFAULT_SIZE="medium",i.Widgets.Constants.BUTTON_DEFAULT_BACKGROUND="dark",i.Widgets.Constants.BUTTON_PWA_BUTTONNAME="button.png",i.Widgets.Constants.BUTTON_DEFAULT_COLOR_LWA="gold",i.Widgets.Constants.BUTTON_DEFAULT_SIZE_LWA="medium",i.Widgets.Constants.BUTTON_DEFAULT_TYPE="LwA",i.Widgets.Constants.BUTTON_DEFAULT_TEXT=i.Widgets.Constants.BUTTON_DEFAULT_TYPE+".png",i.Widgets.Constants.SVG_NAMESPACE="http://www.w3.org/2000/svg",i.Widgets.Constants.BUTTON_SVG_TEXT_SET=["login","lwa","pay","pwa","donate","dwa"],i.Widgets.Constants.BUTTON_LWA_MULTILANGUAGE_SUPPORTED_TEXT_IMAGE_MAP={pwa:"PwA_25102014.png"},i.Widgets.Constants.BUTTON_LWA_LANGUAGE_COUNTRY_MAP={"en-us":"us","en-gb":"uk","de-de":"de","fr-fr":"fr","it-it":"it","es-es":"es","ja-jp":"jp"},i.Widgets.Constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP={"en-us":"en_GB","en-gb":"en_GB",en:"en_GB","fr-fr":"fr_FR",fr:"fr_FR","it-it":"it_IT",it:"it_IT","es-es":"es_ES",es:"es_ES","de-de":"de_DE",de:"de_DE","ja-jp":"ja_JP",ja:"ja_JP"},i.Widgets.Constants.COUNTRY_CODE_TO_REALM_MAP={us:"en_US",gb:"en_GB",de:"de_DE",jp:"ja_JP"},i.Widgets.Constants.REALM_TO_LANGUAGE_COUNTRY_MAP={en_US:"US",en_GB:"UK",de_DE:"DE",ja_JP:"JP",fr_FR:"FR",it_IT:"IT",es_ES:"ES"},i.Widgets.Constants.REALM_TO_COUNTRY_CODE_MAP={en_US:"US",en_GB:"GB",de_DE:"DE",ja_JP:"JP",fr_FR:"FR",it_IT:"IT",es_ES:"ES"},i.Widgets.Constants.FALLBACK_MULTILANGUAGE_BUYER_LANGUAGE_PREFERENCE={US:"en_US",GB:"en_GB",DE:"en_GB"},i.Widgets.Constants.MULTILANGUAGE_ALLOWED_COUNTRY_CODES=["GB","DE"],i.Widgets.Constants.MULTILANGUAGE_ALLOWED_SELLER_LANGUAGE_CODES=["en-gb","de-de","fr-fr","it-it","es-es"],i.Widgets.Constants.MULTILANGUAGE_DEFAULT_BUTTON_IMAGE_SUB_PATH="lwa/gold/default/",i.Widgets.Constants.TIMER_INTERVAL=100,i.Widgets.Constants.IS_SANDBOX=o.IS_SANDBOX,i.Widgets.Constants.CONTEXT="true"===o.IS_SANDBOX?"sandbox":"live",i.Widgets.Constants.READY_TO_RENDER=!1,i.Widgets.Constants.ADDRESS_WIDGET_PRESENT=!1,i.Widgets.Constants.TIMEOUT_ID=null,i.Widgets.Constants.ADDRESS_WIDGET={READ:{min_width:290,max_width:600,default_width:400,min_height:150,max_height:400,default_height:185},EDIT:{min_width:280,max_width:600,default_width:400,min_height:228,max_height:400,default_height:228}},i.Widgets.Constants.WALLET_WIDGET={READ:{min_width:290,max_width:600,default_width:400,min_height:150,max_height:400,default_height:185},EDIT:{min_width:280,max_width:600,default_width:400,min_height:228,max_height:400,default_height:228}},i.Widgets.Constants.CONSENT_WIDGET={EDIT:{min_width:260,max_width:600,default_width:400,min_height:135,max_height:150,default_height:228}},i.Widgets.Config={},i.Widgets.Config.POLL_FOR_EVENTS=!0,i.Widgets.Constants.DEFAULT_ADDRESSBOOK_PREF=!0,i.Widgets.Constants.UNIT_PX="PX",i.Widgets.Constants.INVALID_PARAMETER_VALUE="InvalidParameterValue",i.Widgets.Constants.INVALID_PARAMETER="InvalidParameter",i.Widgets.Constants.INVALID_SMARTPHONE_PARAMETER_VALUE="InvalidParameterValueSmartPhone",i.Widgets.Constants.INVALID_NON_SMARTPHONE_PARAMETER_VALUE="InvalidParameterValueNonSmartPhone",i.Widgets.Constants.MISSING_PARAMETER="MissingParameter",i.Widgets.Constants.MERCHANT_ABORTED="MerchantAborted",i.Widgets.Constants.PARAM_NAME="${ParamName}",i.Widgets.Constants.PARAM_VALUE="${ParamValue}",i.Widgets.Constants.INVALID_VALUE_FOR_USE_AMAZON_ADDRESSBOOK="Invalid value specified for parameter useAmazonAddressBook",i.Widgets.Constants.MISSING_SELLERID="Required parameter sellerId is not specified.",i.Widgets.Constants.INVALID_PARAMETER_VALUE_MSG="Value "+i.Widgets.Constants.PARAM_VALUE+" assigned to a parameter "+i.Widgets.Constants.PARAM_NAME+" is not valid ",i.Widgets.Constants.MISSING_PARAMETER_MSG="Required parameter "+i.Widgets.Constants.PARAM_NAME+" is not specified.",i.Widgets.Constants.MERCHANT_ABORTED_MSG="The error function was called in the hostedParametersProvider function.",i.Widgets.Constants.PARAMETER_VALIDATION_FAILED_MSG="Parameter validation failed ",i.Widgets.Constants.MERCHANTS_INVALID_PARAMETERS_MSG="Invalid parameters passed, please only provide parameters specified in the integration guide ",i.Widgets.Constants.HOSTED_PAYMENTS_ACTION_NONE="None",i.Widgets.Constants.HOSTED_PAYMENTS_ACTION_AUTHORIZE="Authorize",i.Widgets.Constants.HOSTED_PAYMENTS_ACTION_AUTHORIZE_AND_CAPTURE="AuthorizeAndCapture",i.Widgets.Constants.HOSTED_PAYMENTS_WIDGET_ID="",i.Widgets.Constants.HOSTED_HTML_INTERFACE="HTML",i.Widgets.Constants.HOSTED_JAVASCRIPT_INTERFACE="JavaScript",i.Widgets.Constants.HOSTED_EXPERIENCE_TYPE_KEY="experienceType",i.Widgets.Constants.HOSTED_INTERFACE_TYPE_KEY="interfaceType",i.Widgets.Constants.RETURN_URL_MAX_LENGTH=256,i.Widgets.Constants.CANCEL_RETURN_URL_MAX_LENGTH=256,i.Widgets.Constants.CURRENCY_CODE_MAX_LENGTH=3,i.Widgets.Constants.SELLER_NOTE_MAX_LENGTH=1024,i.Widgets.Constants.SCOPE_MAX_LENGTH=256,i.Widgets.Constants.SELLER_ORDER_ID_MAX_LENGTH=100,i.Widgets.Constants.SELLER_STORE_NAME_MAX_LENGTH=100,i.Widgets.Constants.PAYMENT_ACTION_MAX_LENGTH=20,i.Widgets.Constants.LWA_CLIENT_ID_MAX_LENGTH=256,i.Widgets.Constants.IS_DYNAMIC_BUTTON_USED=!1,i.Widgets.WidgetTypes={Button:"Button",AddressBook:"AddressBook",Wallet:"Wallet",Consent:"Consent"},i.Widgets.ButtonTypes={BIG_FISH_CHECKOUT:"paymentsOnlyProduct",DONATION:"donationProduct",HOSTED:"hostedPayment",HOSTED_DONATION:"hostedDonation"},i.Widgets.CartOrigins={CartPage:"CartPage",DetailPage:"DetailPage"},i.Widgets.DisplayModes={read:"read",edit:"edit"},i.Widgets.PaymentInstrumentsDisplayOptions={ShowAll:"Default",Default:"Default"},t.exports={config:i.Widgets.Config,constants:i.Widgets.Constants,others:{WidgetTypes:i.Widgets.WidgetTypes,ButtonTypes:i.Widgets.ButtonTypes,CartOrigins:i.Widgets.CartOrigins,DisplayModes:i.Widgets.DisplayModes,PaymentInstrumentsDisplayOptions:i.Widgets.PaymentInstrumentsDisplayOptions}}},{"./Config":10}],13:[function(e,t,n){var i={Widgets:{}};i.Widgets.EventTypes={DOCUMENT_READY:"OffAmazonPayments.DocumentReadyEvent",REFRESH:"apay-refresh",WIDGET_REFRESH:"apay-widgetrefresh;widgetId=",EXPRESS_CHK_ONAUTHORIZE:"apay-pcId=",ON_ADDRESS_SELECT_PRE:"apay-addressselectpre;widgetId=",ON_ADDRESS_SELECT:"apay-addressselect;widgetId=",ON_PAYMENT_SELECT:"apay-paymentselect;widgetId=",ON_CLOSE:"apay-close;widgetId=",ON_PPH_WIDGET_CLOSE:"apay-close",PRIME_WIDGET_RESIZE:"apay-prime-resize;widgetId=",ON_ERROR:"apay-OffAmazonPayments_mec_",REDIRECT_URL:"apay-redirectUrl;widgetId=",CHANGE_HEIGHT:"apay-changeHeight",ON_CONSENT_WIDGET_READY:"apay-onConsentWidgetReady=",ON_CONSENT_STATUS_CHANGED:"apay-onConsentStatusChanged=",ON_PAYMENT_AUTHORIZATION:"apay-onPaymentAuthorization"},t.exports=i.Widgets.EventTypes},{}],14:[function(e,t,n){function i(e,t,n){var i=function(e){if(e){var i=new s.Collector(t),o=Math.floor(window.devicePixelRatio),r=e.src,a=r.split(".png")[0],d=a+"_"+o+"x.png",l=n.color?n.color:"default";if(e.setAttribute("devicePixelRatio",o),e&&0===e.clientWidth&&0===e.clientHeight){var u=new Image;u.onload=function(){e.setAttribute("width",u.width),e.setAttribute("height",u.height)},u.src=r}var c=new Image;c.onload=function(){e&&0!==e.clientWidth&&0!==e.clientHeight&&(e.style.setProperty("width",e.clientWidth+"px"),e.style.setProperty("height",e.clientHeight+"px")),e.onload=null,e.setAttribute("src",d),i.addCounter("high-res-button",[n.type,n.size,l,n.language]),i.publish()},c.onerror=function(){i.addCounter("high-res-button-not-found",[n.type,n.size,l,n.language]),i.publish()},c.src=d}},r=document.getElementById(e),a=o();if(r&&0===r.clientWidth&&0===r.clientHeight&&a)r.onload=function(){i(r)};else{if(!r||!a)return!1;i(r)}}function o(){if(window.matchMedia){var e=window.matchMedia("only screen and (-moz-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen  and (min-device-pixel-ratio: 2), only screen and (min-resolution: 2dppx)");return e&&e.matches||window.devicePixelRatio>1}return!1}var s=e("../widgets/MetricsCollector");t.exports={useRetinaImage:i,isRetinaDisplay:o}},{"../widgets/MetricsCollector":37}],15:[function(e,t,n){var i={jQuery:e("./jquery")},o=e("../core/Constants"),s=e("../core/Utilities"),r=e("./Config");i.HostedPayments={},i.HostedPayments.done=function(e){try{i.HostedPayments.validate(e)}catch(t){return!1}var n=r.WIDGET_ENDPOINT+o.constants.HOSTED_PAYMENTS_URI;e.action="hostedInit",e.cartOwnerId=e.sellerId;var a=Math.floor(1e9*Math.random()+1).toString(),d=s.createFormString(a,n,"_self",e);i.jQuery("#"+a).remove(),i.jQuery("body").append(d),i.jQuery("#"+a).submit()},i.HostedPayments.isHostedPaymentsInput=function(e){return e===o.others.ButtonTypes.HOSTED||i.HostedPayments.isHostedDonation(e)},i.HostedPayments.isHostedDonation=function(e){return e===o.others.ButtonTypes.HOSTED_DONATION},i.HostedPayments.inputTypeToExperienceTypeMap={hostedPayment:"ExpressPayment",hostedDonation:"ExpressDonation"},i.HostedPayments.validate=function(e){function t(){for(var t=new Array(h,m,E,y,_,A),n=[],i=0;i<t.length;i++){var o=t[i];s.isEmptyOrUndefined(e[o])&&n.push(o)}return n}function n(){var e=[];return r(E,o.constants.RETURN_URL_MAX_LENGTH,e),r(v,o.constants.CURRENCY_CODE_MAX_LENGTH,e),r(S,o.constants.SELLER_NOTE_MAX_LENGTH,e),r(I,o.constants.SCOPE_MAX_LENGTH,e),r(O,o.constants.PAYMENT_ACTION_MAX_LENGTH,e),r(C,o.constants.SELLER_ORDER_ID_MAX_LENGTH,e),r(A,o.constants.LWA_CLIENT_ID_MAX_LENGTH,e),e}function r(t,n,i){!s.isEmptyOrUndefined(e[t])&&e[t].length>n&&i.push(t)}function a(){var t=new Array(h,m,E,T,y,_,A,v,S,I,C,O,N,D,b);for(var n in e)if(-1===i.jQuery.inArray(n,t))return!0}function d(){var t=new Array(o.constants.HOSTED_PAYMENTS_ACTION_NONE,o.constants.HOSTED_PAYMENTS_ACTION_AUTHORIZE,o.constants.HOSTED_PAYMENTS_ACTION_AUTHORIZE_AND_CAPTURE);return s.isEmptyOrUndefined(e.paymentAction)||-1!==i.jQuery.inArray(e.paymentAction,t)}function l(e,t){var n="Value '"+e+"' assigned to a parameter '"+t+"' is not valid";p(o.constants.INVALID_PARAMETER_VALUE,n)}function u(e){var t="Required parameters missing : "+e;p(o.constants.MISSING_PARAMETER,t)}function c(e){var t="Parameters '"+e+"' exceeds the maximum allowed length";p(o.constants.INVALID_PARAMETER_VALUE,t)}function g(){p(o.constants.INVALID_PARAMETER,o.constants.MERCHANTS_INVALID_PARAMETERS_MSG)}function p(e,t){s.sendOnErrorCallbackMessage(e,t,o.constants.HOSTED_PAYMENTS_WIDGET_ID)}var f,h="sellerId",m="amount",E="returnURL",T="cancelReturnURL",y="accessKey",_="signature",A="lwaClientId",v="currencyCode",S="sellerNote",I="scope",C="sellerOrderId",O="paymentAction",N="shippingAddressRequired",D=o.constants.HOSTED_EXPERIENCE_TYPE_KEY,b=o.constants.HOSTED_INTERFACE_TYPE_KEY;if(a())throw g(),i.Widgets.Validation.validationException();if(f=t(),f.length>0)throw u(f),i.Widgets.Validation.validationException();if(f=n(),f.length>0)throw c(f),i.Widgets.Validation.validationException();if(isNaN(e.amount)||Number(e.amount)<=0||Number(e.amount)>1e6)throw l(e.amount,m),i.Widgets.Validation.validationException();if(!d())throw l(e.paymentAction,O),i.Widgets.Validation.validationException();if(!s.isEmptyOrUndefined(e.shippingAddressRequired)&&!s.isBoolean(e.shippingAddressRequired))throw l(e.shippingAddressRequired,N),i.Widgets.Validation.validationException()},t.exports=i.HostedPayments},{"../core/Constants":12,"../core/Utilities":25,"./Config":10,"./jquery":30}],16:[function(e,t,n){var i={Widgets:{},jQuery:e("./jquery")},o=e("./Widget"),s=e("./Constants"),r=e("./Utilities"),a=e("./WidgetDesign"),d=e("./InlineWidgetError"),l=e("./EventTypes"),u=e("./CheckoutWidget"),c=e("./../widgets/MetricsCollector"),g="Form",p={SAFARI:"safari"};i.Widgets.InlineWidget=function(e){if(o.call(this,e),this.onErrorCallback=e.onError,e.scope){this.scope=e.scope;var t=new c.Collector(e.sellerId);t.addCounter("lwa-use-scopes-param",this.type),t.publish()}i.jQuery(this).bind(l.ON_ERROR,this,u.prototype.onErrorCallbackHandler);var n=e.amazonOrderReferenceId||e.amazonBillingAgreementId||null,g=s.others.DisplayModes.edit;if("undefined"!=typeof e.displayMode)switch(e.displayMode.toLowerCase()){case s.others.DisplayModes.read.toLowerCase():g=s.others.DisplayModes.read;break;case s.others.DisplayModes.edit.toLowerCase():g=s.others.DisplayModes.edit;break;default:this.error=new d(s.constants.INVALID_PARAMETER_VALUE,null,"displayMode",e.displayMode)}var p=s.others.PaymentInstrumentsDisplayOptions.ShowAll;this.getDisplayMode=function(){return g},this.getPaymentInstrumentsDisplayOptions=function(){return p},this.design=new a(e.design,this),this.agreementType=r.isEmptyOrUndefined(e.agreementType)?"":e.agreementType,this.getContractId=function(){return n},this.setContractId=function(e){n=e},this.onOrderReferenceCreate=e.onOrderReferenceCreate,this.onBillingAgreementCreate=e.onBillingAgreementCreate,this.onReady=e.onReady,"function"==typeof this.onOrderReferenceCreate&&i.jQuery(this).bind(l.EXPRESS_CHK_ONAUTHORIZE,this,this.onOrderReferenceCreateHandler),"function"==typeof this.onBillingAgreementCreate&&i.jQuery(this).bind(l.EXPRESS_CHK_ONAUTHORIZE,this,this.onBillingAgreementCreateHandler),"function"==typeof this.onReady&&i.jQuery(this).bind(l.EXPRESS_CHK_ONAUTHORIZE,this,this.onReadyHandler),i.jQuery(this).bind(l.REFRESH,this,this.refreshEventHandler),i.jQuery(this).bind(l.WIDGET_REFRESH,this,this.widgetRefreshEventHandler),i.jQuery(this).bind(l.CHANGE_HEIGHT,this,this.widgetChangeHeightEventHandler)},i.Widgets.InlineWidget.prototype=r.createSubclass(o.prototype),i.Widgets.InlineWidget.prototype.constructor=i.Widgets.InlineWidget,i.Widgets.InlineWidget.prototype.refreshEventHandler=function(){var e=this.getID()+g,t=this.getID()+"IFrame";0!==i.jQuery("#"+t).length&&i.jQuery("#"+t).remove();var n=r.createIFrameString(t,this.design.width,this.design.height);i.jQuery("#"+this.getID()).append(n),i.jQuery("#"+e).submit()},i.Widgets.InlineWidget.prototype.hideEventHandler=function(){var e=this.getID()+"IFrame";r.hide(e)},i.Widgets.InlineWidget.prototype.widgetRefreshEventHandler=function(e){var t=e.data,n=t.eventValue;this.getID()===n&&this.refreshEventHandler()},i.Widgets.InlineWidget.prototype.widgetChangeHeightEventHandler=function(e){var t=e.data,n=t.eventValue.split(";"),i=n[0],o=n[1];this.getID()===i&&this.changeHeightEventHandler(o)},i.Widgets.InlineWidget.prototype.onOrderReferenceCreateHandler=function(e){i.jQuery(this).unbind(l.EXPRESS_CHK_ONAUTHORIZE);var t=e.data.eventValue,n={getAmazonOrderReferenceId:function(){return t}};this.onOrderReferenceCreate(n)},i.Widgets.InlineWidget.prototype.onBillingAgreementCreateHandler=function(e){i.jQuery(this).unbind(l.EXPRESS_CHK_ONAUTHORIZE);var t=e.data.eventValue,n={getAmazonBillingAgreementId:function(){return t}};this.onBillingAgreementCreate(n)},i.Widgets.InlineWidget.prototype.onReadyHandler=function(e){i.jQuery(this).unbind(l.EXPRESS_CHK_ONAUTHORIZE);var t=e.data.eventValue,n={},o=function(){return n.getAmazonBillingAgreementId=function(){return t},n.getAmazonOrderReferenceId=function(){return t},n}();this.onReady(o)},i.Widgets.InlineWidget.prototype.getBrowserWindowHeight=function(){var e=i.jQuery(window).height();return navigator.userAgent.match(/OS [0-9](_\d)+ like Mac OS X/i)&&navigator.userAgent.toLowerCase().indexOf(p.SAFARI)>-1&&(e+=60),e},i.Widgets.InlineWidget.prototype.changeHeightEventHandler=function(e){var t=this.getID(),n=t+"IFrame",o=t+g,s=1*e+2;if(i.jQuery("#"+t).height(s+"px"),i.jQuery("#"+n).height(e+"px"),document.getElementById(n).height=e,i.jQuery("#"+o).children("input:hidden[name='widgetHeight']").val(e),e>=document.body.clientHeight){var r=i.jQuery("#"+t).offset().top;i.jQuery(window).scrollTop(r)}},t.exports=i.Widgets.InlineWidget},{"./../widgets/MetricsCollector":37,"./CheckoutWidget":9,"./Constants":12,"./EventTypes":13,"./InlineWidgetError":17,"./Utilities":25,"./Widget":27,"./WidgetDesign":28,"./jquery":30}],17:[function(e,t,n){var i={Widgets:{InlineWidget:{}}},o=e("./Constants"),s=e("./Utilities");i.Widgets.InlineWidget.Error=function(e,t,n,i){this.errorType=e,this.errorMessage=t,this.errorElementName=n,this.errorElementValue=i},i.Widgets.InlineWidget.Error.SetErrorIfParameterExists=function(e,t,n,s,r){if(t){var a=o.constants.INVALID_PARAMETER_VALUE;"smartphone"===r?a=o.constants.INVALID_SMARTPHONE_PARAMETER_VALUE:"nonSmartphone"===r&&(a=o.constants.INVALID_NON_SMARTPHONE_PARAMETER_VALUE),s.error=new i.Widgets.InlineWidget.Error(a,n,e,t)}},i.Widgets.InlineWidget.Error.RaiseOnError=function(e,t,n,i){i||(i=o.constants.INVALID_PARAMETER_VALUE),e=s.formatMsg(e,t),s.sendOnErrorCallbackMessage(i,e,n.getID()),n.hasError=!0},i.Widgets.InlineWidget.Error.RaiseOnErrorIfUndefined=function(e,t,n,o,s){void 0===e&&i.Widgets.InlineWidget.Error.RaiseOnError(t,n,o,s)},i.Widgets.InlineWidget.Error.RaiseMissingParameterError=function(e,t){i.Widgets.InlineWidget.Error.RaiseOnError(o.constants.MISSING_PARAMETER_MSG,t,e,o.constants.MISSING_PARAMETER)},i.Widgets.InlineWidget.Error.isMissingParameter=function(e,t,n){return s.isEmptyOrUndefined(t)?(n.error=new i.Widgets.InlineWidget.Error(o.constants.MISSING_PARAMETER,o.constants.MISSING_PARAMETER_MSG,e,t),!0):!1},t.exports=i.Widgets.InlineWidget.Error},{"./Constants":12,"./Utilities":25}],18:[function(e,t,n){function i(e){return"undefined"==typeof e||void 0===e.type?"undefined_button_type":e.type.toLowerCase()}function o(e,t,n,o){var p=new l.Collector(n);a(p),p.addButtonInfoData(l.ProductTypes.LPA,l.PageActions.BUTTON_RENDER,e.type,n);var f=i(e),h=o?[l.Tags.DYNAMIC,f]:[f];p.addCounter("lpa-buttonrender",h),d.isSellerHidingButton(t)&&p.addCounter("lpa-seller-hiding-button");var m=e.color||u.constants.BUTTON_DEFAULT_COLOR_LWA,E=e.size||u.constants.BUTTON_DEFAULT_SIZE_LWA,T=e.type||u.constants.BUTTON_DEFAULT_TYPE;p.addCounter(m),p.addCounter(E),p.addCounter(T),p.addCounter(m.toLowerCase()+"_"+E.toLowerCase()+"_"+T.toLowerCase()),p.addTiming("lwa-button-clickable",g()+e.buttonConstructorStartTime,e.buttonConstructorEndTime+c.getWidgetCoreExecutionEndTime(),h),p.addTiming("lwa-button-clickable-js-load",g(),e.buttonConstructorEndTime,h),r(p,n,e),s(p,e),p.publish()}function s(e,t){e.addInfoOrEntry("additional-request-data","|is-bml-merchant:"+d.isValidLanguagePassedBySeller(t),"info")}function r(e,t,n){var i=d.getLanguageForSeller(t,n);if(e.addInfoOrEntry("additional-request-data","|language:"+i,"info"),d.isSellerAllowedForMultiLanguage(t,n)){var o=d.getBrowserLanguagePreference();d.isValidLanguagePassedBySeller(n)?e.addCounter("lpa-buttonrender-in-seller-language"):d.isBrowserLanguageSupported(o)?e.addCounter("lpa-buttonrender-in-browser-language"):e.addCounter("lpa-buttonrender-in-default-language"),e.addCounter("lpa-buttonrender-in-"+i)}}function a(e){e.addTiming("widgets-js-loading",g(),c.getWidgetCoreExecutionEndTime())}var d=e("./Utilities"),l=e("../widgets/MetricsCollector"),u=e("./Constants"),c=e("./Config"),g=e("./ZeroTime");t.exports={getLpaButtonType:i,publishMetricsForLPAButton:o,publishMetricsForLPAButtonLanguage:r,addWidgetsLoadLatencyMetric:a}},{"../widgets/MetricsCollector":37,"./Config":10,"./Constants":12,"./Utilities":25,"./ZeroTime":29}],19:[function(e,t,n){t.exports=function(){return window.amazon}},{}],20:[function(e,t,n){var i={jQuery:e("./jquery"),Widgets:{}},o=e("./Constants");i.Widgets.Mediator=function(){this.widgetCount=0,this.registry={}},i.Widgets.Mediator.Reset=function(){i.Widgets.mediator.widgetCount=0,i.Widgets.mediator.registry={}},i.Widgets.Mediator.prototype.generateUniqWidgetID=function(){return this.widgetCount++},i.Widgets.Mediator.prototype.getNumWidgetCount=function(){return this.widgetCount},i.Widgets.Mediator.prototype.register=function(e){this.registry[e.getID()]=e},i.Widgets.Mediator.prototype.notifyListeners=function(e){for(var t in this.registry)if(this.registry.hasOwnProperty(t)){var n=this.registry[t];n.eventValue=e.eventValue,n.error=e.error,i.jQuery(n).trigger(e.eventName,n)}},i.Widgets.Mediator.prototype.getWalletWidgets=function(){return this.getWidgetsHelper(o.others.WidgetTypes.Wallet)},i.Widgets.Mediator.prototype.getAddressWidgets=function(){return this.getWidgetsHelper(o.others.WidgetTypes.AddressBook)},i.Widgets.Mediator.prototype.getWidgetsHelper=function(e){var t=[];for(var n in this.registry)if(this.registry.hasOwnProperty(n)){var i=this.registry[n];i.type===e&&t.push(i)}return t},i.Widgets.mediator=new i.Widgets.Mediator,t.exports={Mediator:i.Widgets.Mediator,instance:i.Widgets.mediator}},{"./Constants":12,"./jquery":30}],21:[function(e,t,n){var i={Widgets:{},jQuery:e("./jquery")},o=e("./Constants"),s=e("./Utilities"),r=e("./InlineWidgetError"),a=e("./InlineWidget"),d=e("./EventTypes"),l=e("./Mediator").instance,u=e("./LwaLogin"),c=e("./Config"),g=e("../widgets/MetricsCollector"),p="spaPaymentAuthorizationWidget",f={min_width:400,max_width:600,default_width:400,min_height:400,max_height:500,default_height:400};i.Widgets.PaymentAuthorization=function(e){g.Collector.time("paymentAuthorizationWidget-pre-render"),a.call(this,e),this.type=o.others.WidgetTypes.PaymentAuthorization,this.onPaymentAuthorization=e.onPaymentAuthorization;var t=this.design.width,n=this.design.height;l.register(this),this.design.checkWidth&&(void 0===t?r.RaiseMissingParameterError(this,s.buildParamNameValueMap("design.width",t)):(this.design.width=s.verifySize(t,void 0,f.min_width,f.max_width),r.RaiseOnErrorIfUndefined(this.design.width,o.constants.INVALID_PARAMETER_VALUE_MSG,s.buildParamNameValueMap("design.width",t),this))),this.design.checkHeight&&(void 0===n?r.RaiseMissingParameterError(this,s.buildParamNameValueMap("design.height",n)):(this.design.height=s.verifySize(n,void 0,f.min_height,f.max_height),r.RaiseOnErrorIfUndefined(this.design.height,o.constants.INVALID_PARAMETER_VALUE_MSG,s.buildParamNameValueMap("design.height",n),this))),i.jQuery(this).bind(d.ON_PAYMENT_AUTHORIZATION,this,this.onPaymentAuthorizationHandler)},i.Widgets.PaymentAuthorization.prototype=s.createSubclass(a.prototype),i.Widgets.PaymentAuthorization.prototype.constructor=i.Widgets.PaymentAuthorization,i.Widgets.PaymentAuthorization.prototype.onPaymentAuthorizationHandler=function(e){var t=e.data,n=t.eventValue.widgetID;this.getID()===n&&void 0!==this.onPaymentAuthorization&&this.onPaymentAuthorization(t)},i.Widgets.PaymentAuthorization.prototype.renderElements=function(){if(void 0!==this.hasError&&this.hasError)return i.jQuery("#"+this.locationID).empty(),!1;var e=this;s.setLwaSandboxMode(),"undefined"!=typeof u()&&"undefined"!=typeof u().Login&&"undefined"!=typeof u().Login.getClientId&&"undefined"!=typeof u().Login.getClientId()?s.getAccessToken(e,e.renderPaymentAuthorization):e.renderPaymentAuthorization(e,"")},i.Widgets.PaymentAuthorization.prototype.renderPaymentAuthorization=function(e,t){var n=e.getID()+"IFrame",a=s.createIFrameString(n,e.design.width,e.design.height),d=e.getID()+"Form",l=c.WIDGET_ENDPOINT+o.constants.INLINE_WIDGETS_URI,u={action:p,referringURL:window.top.location,cartOwnerId:e.getSellerId(),marketplaceSellerId:e.getMarketplaceSellerId(),access_token:t,agreementType:e.agreementType,displayMode:e.getDisplayMode(),widgetId:e.getID(),widgetWidth:e.design.width,widgetHeight:e.design.height,widgetDesignMode:e.design.designMode,widgetPadding:e.design.padding,browserWindowHeight:e.getBrowserWindowHeight(),paymentInstrumentsDisplayOptions:e.getPaymentInstrumentsDisplayOptions(),clientId:s.getClientId()};"undefined"!=typeof e.getContractId()&&null!==e.getContractId()&&(u.contractId=e.getContractId()),r.isMissingParameter("sellerId",e.getSellerId(),e),e.error&&e.error.errorType&&(u.clientErrorType=e.error.errorType,u.clientErrorElementName=e.error.errorElementName,u.clientErrorElementValue=e.error.errorElementValue,u.clientErrorMessage=e.error.errorMessage);var f=s.createFormString(d,l,n,u);i.jQuery("#"+d).remove(),s.createWidgetContainer(e.locationID,e.getID(),e.design.width,e.design.height,a,e.type),s.createWidgetForm(e.locationID,e.getID(),e.design.width,e.design.height,f,d),o.constants.READY_TO_RENDER&&(g.Collector.timeEnd("paymentAuthorizationWidget-pre-render"),i.jQuery("#"+d).submit())},t.exports=i.Widgets.PaymentAuthorization},{"../widgets/MetricsCollector":37,"./Config":10,"./Constants":12,"./EventTypes":13,"./InlineWidget":16,"./InlineWidgetError":17,"./LwaLogin":19,"./Mediator":20,"./Utilities":25,"./jquery":30}],22:[function(e,t,n){function i(e,t){r.call(s,e)||(s[e]=[]);var n=s[e].push(t)-1;return{remove:function(){delete s[e][n]}}}function o(e){if(!r.call(s,e))return!1;for(var t,n=Array.prototype.slice.call(arguments,1),i=s[e].length,o=0;i>o;o++)t=s[e][o],"function"==typeof t&&t.apply(null,n);return!0}var s={},r=s.hasOwnProperty;t.exports={subscribe:i,publish:o}},{}],23:[function(e,t,n){var i={SessionStabilizer:{},jQuery:e("./jquery")},o=e("./utilities/Cookie"),s=e("./utilities/MetricsStore"),r=e("./Config"),a={LOADED:"loaded",COMPLETE:"complete"};i.SessionStabilizer=i.SessionStabilizer||{},i.SessionStabilizer.constants={},i.SessionStabilizer.constants.SESSION_STABILIZER_URI="/gp/widgets/sessionstabilizer",i.SessionStabilizer.constants.SESSION_SET_COOKIE_NAME="session-set",i.SessionStabilizer.constants.SESSION_SET_COOKIE_VALUE="true",i.SessionStabilizer.constants.SESSION_SET_COOKIE_MAX_AGE=175316,i.SessionStabilizer.constants.SESSIONSTABILIZER_CALL_ID="sessionfix",i.SessionStabilizer.constants.SESSIONSTABILIZER_METRIC_NAME="session-stabilizer-time",i.SessionStabilizer.isCallFinished=!1,i.SessionStabilizer.toDoFunctions=[],i.SessionStabilizer.END_TIME=0,i.SessionStabilizer.START_TIME=0,i.SessionStabilizer.setSession=function(){function e(){if(i.SessionStabilizer.isCallFinished=!0,!o.isCookiePresent(i.SessionStabilizer.constants.SESSION_SET_COOKIE_NAME)){i.SessionStabilizer.END_TIME=(new Date).getTime();var e={name:i.SessionStabilizer.constants.SESSIONSTABILIZER_METRIC_NAME,startTime:i.SessionStabilizer.START_TIME,endTime:i.SessionStabilizer.END_TIME};s.add(e),o.createCookie(i.SessionStabilizer.constants.SESSION_SET_COOKIE_NAME,i.SessionStabilizer.constants.SESSION_SET_COOKIE_VALUE,i.SessionStabilizer.constants.SESSION_SET_COOKIE_MAX_AGE);
}for(var t=0;t<i.SessionStabilizer.toDoFunctions.length;t++){var n=i.SessionStabilizer.toDoFunctions[t];n.call()}}var t=r.WIDGET_ENDPOINT+i.SessionStabilizer.constants.SESSION_STABILIZER_URI;o.isCookiePresent(i.SessionStabilizer.constants.SESSION_SET_COOKIE_NAME)?e():(i.SessionStabilizer.START_TIME=(new Date).getTime(),i.SessionStabilizer.addScriptNodetoBody({URI:t,id:i.SessionStabilizer.constants.SESSIONSTABILIZER_CALL_ID},e))},i.SessionStabilizer.setSessionDone=function(e){"function"==typeof e&&(i.SessionStabilizer.isCallFinished?e.call():i.SessionStabilizer.toDoFunctions.push(e))},i.SessionStabilizer.addScriptNodetoBody=function(e,t){var n=e.id,o=e.URI,s=function(e){e.readyState?e.onreadystatechange=function(){(e.readyState===a.LOADED||e.readyState===a.COMPLETE)&&t()}:e.onload=t};if("undefined"!=typeof n&&null!==n&&"undefined"!=typeof o&&null!==o){var r=i.jQuery("#"+n);if(null===r||"undefined"==typeof r||0===r.length){var d=document.createElement("script");d.id=n,d.type="text/javascript",d.src=o,"function"==typeof t&&s(d);var l=document.getElementsByTagName("body")[0];if(null!==l&&"undefined"!=typeof l)l.appendChild(d);else{var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(d,u)}}}},t.exports={SessionStabilizer:i.SessionStabilizer,setSession:i.SessionStabilizer.setSession,setSessionDone:i.SessionStabilizer.setSessionDone}},{"./Config":10,"./jquery":30,"./utilities/Cookie":32,"./utilities/MetricsStore":34}],24:[function(e,t,n){var i={Widgets:{}};i.Widgets.TaskQueue=function(){this.taskQueue=[]},i.Widgets.TaskQueue.prototype.push=function(e){this.taskQueue.push(e)},i.Widgets.TaskQueue.prototype.pop=function(){return this.taskQueue.length>0?this.taskQueue.shift():null},i.Widgets.TaskQueue.prototype.isEmpty=function(){return 0===this.taskQueue.length},i.Widgets.Task=function(){},i.Widgets.Task.prototype.execute=function(){},i.Widgets.taskQueue=new i.Widgets.TaskQueue,t.exports={TaskQueue:i.Widgets.TaskQueue,getTaskQueue:function(){return i.Widgets.taskQueue},setTaskQueue:function(e){i.Widgets.taskQueue=e},Task:i.Widgets.Task}},{}],25:[function(e,t,n){function i(e){e=e.toLowerCase();var t=(e.indexOf("ipod")>=0||e.indexOf("iphone")>=0||e.indexOf("ipad")>=0)&&!e.match(/\sos\s*6_0/);return t===!0}var o={jQuery:e("./jquery"),Widgets:{}},s=e("./Constants"),r=e("./EventTypes"),a=e("./Mediator").instance,d=e("./LwaLogin"),l=e("./TaskQueue"),u=e("./Config"),c=e("./SessionStabilizer"),g="never",p={ERROR:"ERROR"},f={WINDOW_ALREADY_OPEN:"Error caught in popup window already opened",IS_INVALID_DOCUMENT:"Error caught in isValidDocInclusion"},h={LOADED:"loaded",COMPLETE:"complete"};o.Widgets.Mobile=function(){var e=navigator.userAgent.toLowerCase(),t=new Array("iphone","ipod","series60","symbian","android","windows ce","blackberry","palm");return{isMobile:function(){for(var n=0;n<t.length;n++){var i=t[n];if(e.search(i)>-1)return!0}return!1}}}(),o.Widgets.Utilities=function(){},o.Widgets.Utilities.isIE=function(){return navigator.userAgent.match(/Trident\/|MSIE|Edge\//i)?!0:!1},o.Widgets.Browser=function(){},o.Widgets.Browser.isFF=function(){return navigator.userAgent.match(/Firefox/i)},o.Widgets.Utilities.isWin=function(){return navigator.userAgent.match(/Windows/i)},o.Widgets.Utilities.isiOS=function(){return navigator.userAgent.toLowerCase().match(/(ipad|iphone|ipod)/g)?!0:!1},o.Widgets.Utilities.getClientId=function(){return"undefined"!=typeof d()&&"undefined"!=typeof d().Login&&"undefined"!=typeof d().Login.getClientId&&"undefined"!=typeof d().Login.getClientId()?d().Login.getClientId():null},o.Widgets.Utilities.isAmazonPaymentsButtonImage=function(e){return 0===e.indexOf(u.WIDGET_ENDPOINT+s.constants.BUTTON_URI)||0===e.indexOf(s.constants.BUTTON_BASE_PATH_PREFIX)},o.Widgets.Utilities.getLanguageForSeller=function(e,t){if(o.Widgets.Utilities.isSellerAllowedForMultiLanguage(e,t)){if(o.Widgets.Utilities.isValidLanguagePassedBySeller(t))return s.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP[t.language.toLowerCase()];var n=o.Widgets.Utilities.getBrowserLanguagePreference();return o.Widgets.Utilities.isBrowserLanguageSupported(n)?o.Widgets.Utilities.getBrowserLanguageToInternalLanguageMapping(n):s.constants.FALLBACK_MULTILANGUAGE_BUYER_LANGUAGE_PREFERENCE[u.COUNTRY_CODE]}return s.constants.COUNTRY_CODE_TO_REALM_MAP[u.COUNTRY_CODE.toLowerCase()]},o.Widgets.Utilities.isValidLanguagePassedBySeller=function(e){return!o.Widgets.Utilities.isEmptyOrUndefined(e.language)&&o.Widgets.Utilities.isElementInArray(e.language.toLowerCase(),s.constants.MULTILANGUAGE_ALLOWED_SELLER_LANGUAGE_CODES)?!0:!1},o.Widgets.Utilities.isBrowserLanguageSupported=function(e){return!o.Widgets.Utilities.isEmptyOrUndefined(e)&&(e in s.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP||e.substr(0,2)in s.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP)?!0:!1},o.Widgets.Utilities.getLanguageCountryForSeller=function(e,t){return s.constants.REALM_TO_LANGUAGE_COUNTRY_MAP[o.Widgets.Utilities.getLanguageForSeller(e,t)]},o.Widgets.Utilities.isSellerBlacklistedForMultiLanguage=function(e){var t=[];return o.Widgets.Utilities.isEmptyOrUndefined(u.MULTI_LANGUAGE_SELLER_BLACKLIST)||(t=o.Widgets.Utilities.stringToArray(u.MULTI_LANGUAGE_SELLER_BLACKLIST)),o.Widgets.Utilities.isElementInArray(e,t)},o.Widgets.Utilities.isSellerWhitelistedForNAAccountDomain=function(e){var t=[];return o.Widgets.Utilities.isEmptyOrUndefined(u.NA_ACCOUNT_DOMAIN_WHITELISTED_SELLERS)||(t=o.Widgets.Utilities.stringToArray(u.NA_ACCOUNT_DOMAIN_WHITELISTED_SELLERS)),o.Widgets.Utilities.isElementInArray(e,t)},o.Widgets.Utilities.isSellerAllowedForMultiLanguage=function(e,t){return o.Widgets.Utilities.isSellerBlacklistedForMultiLanguage(e)||o.Widgets.Utilities.isSellerAllowed(e,t)||!o.Widgets.Utilities.isElementInArray(u.COUNTRY_CODE,s.constants.MULTILANGUAGE_ALLOWED_COUNTRY_CODES)?!1:!0},o.Widgets.Utilities.getNavigatorLanguages=function(){return navigator.languages},o.Widgets.Utilities.getBrowserLanguagePreference=function(){var e,t=o.Widgets.Utilities.getNavigatorLanguages();if(!o.Widgets.Utilities.isEmptyOrUndefined(t))for(var n=0;n<t.length;n++)if(t[n].toLowerCase()in s.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP){e=t[n];break}return e?e:navigator.language||navigator.browserLanguage||navigator.userLanguage},o.Widgets.Utilities.getBrowserLanguageToInternalLanguageMapping=function(e){var t;return"undefined"!=typeof e&&(t=o.Widgets.Utilities.getValueFromMap(s.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP,e,void 0)||o.Widgets.Utilities.getValueFromMap(s.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP,e.substr(0,2),void 0)),t},o.Widgets.Utilities.getValueFromMap=function(e,t,n){return"undefined"!=typeof t&&"undefined"!=typeof e&&t.toLowerCase()in e?e[t.toLowerCase()]:n},o.Widgets.Utilities.addLoadEventHandler=function(e){var t=e.element,n=e.method,i=e.params;t.addEventListener?t.addEventListener("load",function(){n(i)},!1):t.attachEvent?t.onreadystatechange=function(){(t.readyState===h.LOADED||t.readyState===h.COMPLETE)&&"function"==typeof n&&n(i)}:n(i)},o.Widgets.Utilities.getCartOwnerId=function(){var e=s.constants.CartOwnerId;return o.Widgets.Utilities.isEmptyOrUndefined(e)&&(e=o.Widgets.Utilities.getUrlQueryParamValue(o.Widgets.Utilities.getWidgetsJsSrc(),"sellerId")),e},o.Widgets.Utilities.getWidgetsJsSrc=function(){var e="",t=/.*OffAmazonPayments.*\/Widgets\.js.*/g,n=document.scripts;return o.jQuery(n).each(function(n,i){var s=t.exec(i.src);return o.Widgets.Utilities.isEmptyOrUndefined(s)?void 0:(e=s[0],!1)}),e},o.Widgets.Utilities.getUrlQueryParamValue=function(e,t){var n="",i=e.match(t+"=(.*)&")||e.match(t+"=(.*)");return o.Widgets.Utilities.isEmptyOrUndefined(i)||(n=i[1]),n},o.Widgets.Utilities.openPopUp=function(e){var t=(window.screen.width-s.constants.POPUP_WIN_WIDTH)/2,n=(window.screen.height-s.constants.POPUP_WIN_HEIGHT)/2,i="top="+n+",left="+t+",width="+s.constants.POPUP_WIN_WIDTH+",height="+s.constants.POPUP_WIN_HEIGHT+", resizable=yes,menubar=no,toolbar=no";(o.jQuery.browser.safari||o.jQuery.browser.msie)&&(i+=",location=yes,status=yes");var r;r=o.Widgets.Mobile.isMobile()?window.open("",e):window.open("",e,i);try{r.document.write(s.constants.POPUP_LOADING_HTML)}catch(a){if(window.ueLogError){var d={logLevel:p.ERROR,attribution:"Widget_core.js",message:f.WINDOW_ALREADY_OPEN};window.ueLogError(a,d)}}return r.focus(),r},o.Widgets.Utilities.jsonp_=function(e){e.url&&(e.id?o.Widgets.Utilities.addScriptNodetoBody({URI:e.url,id:e.id}):o.jQuery.ajax({url:e.url,dataType:"jsonp",crossDomain:!0,success:function(t){e.success(t)},error:e.error}))},o.Widgets.Utilities.jsonp=function(e){c.setSessionDone(function(){o.Widgets.Utilities.jsonp_(e)})},o.Widgets.Utilities.addScriptNodetoBody=function(e,t){var n=e.id,i=e.URI,s=function(e){e.readyState?e.onreadystatechange=function(){(e.readyState===h.LOADED||e.readyState===h.COMPLETE)&&t()}:e.onload=t};if("undefined"!=typeof n&&null!==n&&"undefined"!=typeof i&&null!==i){var r=o.jQuery("#"+n);if(null===r||"undefined"==typeof r||0===r.length){var a=document.createElement("script");a.id=n,a.type="text/javascript",a.src=i,"function"==typeof t&&s(a);var d=document.getElementsByTagName("body")[0];if(null!==d&&"undefined"!=typeof d)d.appendChild(a);else{var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(a,l)}}}},o.Widgets.Utilities.setNewHash=function(e){var t=window.top.location.href;t=t.replace(/#.*$/,"#"),e.length>0&&(t+=e),window.top.location.replace(t)},o.Widgets.Utilities.removeFromHash=function(e,t){return e=decodeURIComponent(e),e=e.replace(t,""),e=encodeURIComponent(e)},o.Widgets.Utilities.pollTaskQueue=function(){for(;!l.getTaskQueue().isEmpty();){var e=l.getTaskQueue().pop();"function"==typeof e.execute&&e.execute()}window.setTimeout(o.Widgets.Utilities.pollTaskQueue,s.constants.TIMER_INTERVAL)},o.Widgets.Utilities.pollEvents=function(){var e=window.top.location.hash;if(e){e=e.replace(/#/,"");var t=o.Widgets.Utilities.parseMessage(e);"undefined"!=typeof t.stringToBeRemoved&&(e=o.Widgets.Utilities.removeFromHash(e,t.stringToBeRemoved),o.Widgets.Utilities.setNewHash(e),a.notifyListeners(t))}},o.Widgets.Utilities.handleMessage=function(e){if("undefined"!=typeof e&&e.origin===u.WIDGET_ENDPOINT){var t=e.data;if("undefined"!=typeof t){var n=o.Widgets.Utilities.parseMessage(t);"undefined"!=typeof n.eventName&&a.notifyListeners(n)}}},o.Widgets.Utilities.parseMessage=function(e){var t,n,i,o={};if(e.indexOf(r.EXPRESS_CHK_ONAUTHORIZE,0)>=0){i=e.indexOf(r.EXPRESS_CHK_ONAUTHORIZE,0);var a=e.substring(i+r.EXPRESS_CHK_ONAUTHORIZE.length);o.eventName=r.EXPRESS_CHK_ONAUTHORIZE,o.eventValue=a,o.stringToBeRemoved=r.EXPRESS_CHK_ONAUTHORIZE+a}else if(e.indexOf(r.REFRESH,0)>=0)o.eventName=r.REFRESH,o.eventValue="",o.stringToBeRemoved=r.REFRESH;else if(e.indexOf(r.WIDGET_REFRESH,0)>=0)i=e.indexOf(r.WIDGET_REFRESH,0),t=e.substring(i+r.WIDGET_REFRESH.length),o.eventName=r.WIDGET_REFRESH,o.eventValue=t,o.stringToBeRemoved=r.WIDGET_REFRESH+t;else if(e.indexOf(r.ON_ADDRESS_SELECT,0)>=0)i=e.indexOf(r.ON_ADDRESS_SELECT,0),t=e.substring(i+r.ON_ADDRESS_SELECT.length),o.eventName=r.ON_ADDRESS_SELECT,o.eventValue=t,o.stringToBeRemoved=r.ON_ADDRESS_SELECT+t;else if(e.indexOf(r.ON_ADDRESS_SELECT_PRE,0)>=0)i=e.indexOf(r.ON_ADDRESS_SELECT_PRE,0),t=e.substring(i+r.ON_ADDRESS_SELECT_PRE.length),o.eventName=r.ON_ADDRESS_SELECT_PRE,o.eventValue=t,o.stringToBeRemoved=r.ON_ADDRESS_SELECT_PRE+t;else if(e.indexOf(r.ON_PAYMENT_SELECT,0)>=0)i=e.indexOf(r.ON_PAYMENT_SELECT,0),t=e.substring(i+r.ON_PAYMENT_SELECT.length),o.eventName=r.ON_PAYMENT_SELECT,o.eventValue=t,o.stringToBeRemoved=r.ON_PAYMENT_SELECT+t;else if(e.indexOf(r.ON_CLOSE,0)>=0)i=e.indexOf(r.ON_CLOSE,0),t=e.substring(i+r.ON_CLOSE.length),o.eventName=r.ON_CLOSE,o.eventValue=t,o.stringToBeRemoved=r.ON_CLOSE+t;else if(e.indexOf(r.ON_PPH_WIDGET_CLOSE,0)>=0)o.eventName=r.ON_PPH_WIDGET_CLOSE,o.eventValue="",o.stringToBeRemoved=r.ON_PPH_WIDGET_CLOSE;else if(e.indexOf(r.ON_CONSENT_WIDGET_READY,0)>=0)i=e.indexOf(r.ON_CONSENT_WIDGET_READY,0),o.eventName=r.ON_CONSENT_WIDGET_READY,o.eventValue=e.substring(i+r.ON_CONSENT_WIDGET_READY.length),o.stringToBeRemoved=o.eventName+o.eventValue;else if(e.indexOf(r.ON_CONSENT_STATUS_CHANGED,0)>=0)i=e.indexOf(r.ON_CONSENT_STATUS_CHANGED,0),o.eventName=r.ON_CONSENT_STATUS_CHANGED,o.eventValue=e.substring(i+r.ON_CONSENT_STATUS_CHANGED.length),o.stringToBeRemoved=o.eventName+o.eventValue;else if(e.indexOf(r.ON_PAYMENT_AUTHORIZATION,0)>=0){var d={};i=e.indexOf(r.ON_PAYMENT_AUTHORIZATION),n=e.substring(i+r.ON_PAYMENT_AUTHORIZATION.length),i=n.indexOf(s.constants.WIDGETID_PARAM_NAME),d.widgetID=n.substring(i+s.constants.WIDGETID_PARAM_NAME.length),o.eventName=r.ON_PAYMENT_AUTHORIZATION,o.stringToBeRemoved=n,d.paymentAuthorizationResult=n.substring(1,i),o.eventValue=d}else if(e.indexOf(r.ON_ERROR,0)>=0){i=e.indexOf(r.ON_ERROR),n=e.substring(i+r.ON_ERROR.length),i=n.indexOf(s.constants.WIDGETID_PARAM_NAME),t=n.substring(i+s.constants.WIDGETID_PARAM_NAME.length),o.eventName=r.ON_ERROR,o.eventValue=t,o.stringToBeRemoved=n;var l=n.substring(0,i);i=l.indexOf("=");var u=l.substring(0,i),c=l.substring(i+"=".length);o.error=function(e,t){return{getErrorCode:function(){return e},getErrorMessage:function(){return t}}}(u,c)}else if(e.indexOf(r.REDIRECT_URL,0)>=0){i=e.indexOf(r.REDIRECT_URL,0);var g=e.substring(i+r.REDIRECT_URL.length);o.eventName=r.REDIRECT_URL,o.eventValue=g,o.stringToBeRemoved=r.REDIRECT_URL+g}else if(e.indexOf(r.CHANGE_HEIGHT,0)>=0){i=e.indexOf(r.CHANGE_HEIGHT),n=e.substring(i+r.CHANGE_HEIGHT.length),i=n.indexOf(s.constants.WIDGETID_PARAM_NAME),t=n.substring(i+s.constants.WIDGETID_PARAM_NAME.length),o.eventName=r.CHANGE_HEIGHT,o.stringToBeRemoved=n;var p=n.substring(1,i);o.eventValue=t+";"+p}return o},o.Widgets.Utilities.eraseCookie=function(e){o.Widgets.Utilities.createCookie(e,"",-1)},o.Widgets.Utilities.createCookie=function(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+60*n*60*1e3),i="; expires="+o.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},o.Widgets.Utilities.isCookiePresent=function(e){var t=o.Widgets.Utilities.readCookie(e);return void 0!==t&&null!==t?!0:!1},o.Widgets.Utilities.readCookie=function(e){if(document.cookie&&""!==document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n],o=i.split("="),s=o[0].replace(/ /,"");if(0===s.indexOf(e))return o[1]}return null},o.Widgets.Utilities.createWidgetContainer=function(e,t,n,i,r,a){var d=u.PAY_WITH_AMAZON;a===s.others.WidgetTypes.Wallet?d=u.PAYMENT_METHOD:a===s.others.WidgetTypes.AddressBook&&(d=u.ADDRESS_BOOK);var l=o.Widgets.Utilities.getDefaultWidgetContainerStyle(n,i,"block"),c='id="'+t+'"',g='<div class="widget-container" '+l+" "+c+">";return g+="<h1 style='font-family: Arial, Helvetica, san-serif; margin: 7px; font-size: 14px; font-weight: bold; padding: 0 0 0 30px; background: url(https://images-na.ssl-images-amazon.com/images/G/01/ep/background-image-1x._V313533909_.png) no-repeat -128px 0px; height: 22px; line-height: 22px; position: absolute; z-index: 11; color: #2f3841; top: 0; left: 0'>"+d+"</h1>",void 0!==r&&(g+=r),g+="</div>",o.jQuery("#"+e).html(g),o.jQuery("#"+t)},o.Widgets.Utilities.isEmptyOrUndefined=function(e){return"undefined"==typeof e||null===e||0===e.length},o.Widgets.Utilities.isBoolean=function(e){return"boolean"==typeof e||"true"===e.toLowerCase()||"false"===e.toLowerCase()},o.Widgets.Utilities.getDefaultWidgetContainerStyle=function(e,t,n){n=o.Widgets.Utilities.isEmptyOrUndefined(n)?"block":n;var i='style="padding: 0; margin: 0; overflow: hidden; display: '+n+"; ";return i+=/%/.test(String(e))&&/%/.test(String(t))?"width: "+e+"; height: "+t+"; ":"width: "+e+"px; height: "+t+"px; ",i+="background: url(https://images-na.ssl-images-amazon.com/images/G/01/ep/loading-large._V364197283_.gif) no-repeat 50% 50%; ",i+='position: relative;"'},o.Widgets.Utilities.createWidgetForm=function(e,t,n,i,s){var r,a,d=o.jQuery("#"+e),l=d.closest("form");if("undefined"!=typeof l&&l.length>0){t+="WidgetForm",r=o.Widgets.Utilities.getDefaultWidgetContainerStyle(n,i,"none"),a='id="'+t+'"';var u="<span "+r+" "+a+">"+s+"</span>";o.jQuery(u).insertAfter(l)}else{var c=o.jQuery("#"+t);if(0===c.length){r=o.Widgets.Utilities.getDefaultWidgetContainerStyle(n,i),a='id="'+t+'"';var g="<span "+r+" "+a+"></span>";d.html(g)}c=o.jQuery("#"+t),c.append(s)}},o.Widgets.Utilities.createIFrameString=function(e,t,n){return o.Widgets.Utilities.createTransparentIframeStringWithSrc(e,"",t,n)},o.Widgets.Utilities.createTransparentIframeStringWithSrc=function(e,t,n,i){var o='style="margin: 0; padding: 0; box-sizing: border-box; -moz-box-sizing: border-box; border: 1px solid #bbb; border-radius: 6px; overflow: hidden; position: absolute; z-index: 12; visibility: visible; top: 0; left: 0"',s='<iframe id="'+e+'" name="'+e+'" ';return s+='src="'+t+'" ',s+=o,s+='frameborder="no" ',s+='scrolling="no" ',s+='allowTransparency="true" ',s+="width="+n+" height="+i+" onload=\"OffAmazonPayments.Widgets.Utilities.show('"+e+"')\";></iframe>"},o.Widgets.Utilities.createIframeStringWithSrc=function(e,t,n,i){var o='style="margin: 0; padding: 0; border-width: 0; overflow: hidden;"',s='<iframe id="'+e+'" name="'+e+'" ';return s+='src="'+t+'" ',s+=o,s+='frameborder="no" ',s+='scrolling="no" ',s+='allowtransparency="true" ',s+="width="+n+" height="+i+" onload=\"OffAmazonPayments.Widgets.Utilities.show('"+e+"')\";></iframe>"},o.Widgets.Utilities.hide=function(e){o.jQuery("#"+e).css("visibility","hidden")},o.Widgets.Utilities.show=function(e){o.jQuery("#"+e).css("visibility","visible")},o.Widgets.Utilities.createFormString=function(e,t,n,i){var s='style="display: none; margin: 0; padding: 0; border-width: 0; overflow: hidden;"',r="<form "+s+' id="'+e+'" ';return r+='action="'+t+'" ',r+='method="POST" ',null!==n&&""!==n&&void 0!==n&&(r+='target="'+n+'"'),r+=">",o.jQuery.each(i,function(e,t){r+='<input type="hidden" name="'+e+'" value="'+t+'"/>'}),r+="</form>"},o.Widgets.Utilities.isValidSizeValue=function(e){return void 0===e?!1:(e.toUpperCase().endsWith(s.constants.UNIT_PX)&&(e=e.substring(0,e.length-s.constants.UNIT_PX.length)),null===e||"undefined"==typeof e||isNaN(e)?!1:!0)},o.Widgets.Utilities.verifySize=function(e,t,n,i){return this.isValidSizeValue(e)?(e=parseFloat(e),n>e?n:e>i?i:e):t},o.Widgets.Utilities.sendOnErrorCallbackMessage=function(e,t,n){var i={};i.eventName=r.ON_ERROR,i.eventValue=n,i.error=function(e,t){return{getErrorCode:function(){return e},getErrorMessage:function(){return t}}}(e,t),a.notifyListeners(i)},o.Widgets.Utilities.baseDomainsMatch=function(e,t){if("string"!=typeof e||"string"!=typeof t)return!1;var n=!0,i=e.split("."),o=t.split(".");return i.length>=2&&o.length>=2&&(n=i[i.length-1]===o[o.length-1]&&i[i.length-2]===o[o.length-2]),n},o.Widgets.Utilities.formatMsg=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(n,t[n]));return e},o.Widgets.Utilities.buildParamNameValueMap=function(e,t){var n={};return n[s.constants.PARAM_NAME]=e,n[s.constants.PARAM_VALUE]=t,n},o.Widgets.Utilities.getValueBasedOnInput=function(e,t,n){return"undefined"!=typeof t&&e.indexOf(t.toLowerCase())>-1?t.toLowerCase():n},o.Widgets.Utilities.getLWAButtonPath=function(e,t,n){var i=o.Widgets.Utilities.getLWAButtonBasePath(t),r="lwa/",a=s.constants.BUTTON_DEFAULT_TYPE;n&&(r="donation/"),r+=o.Widgets.Utilities.getValueBasedOnInput(s.constants.BUTTON_LWA_COLOR_SET,e.color,s.constants.BUTTON_DEFAULT_COLOR_LWA),r+="/",r+=o.Widgets.Utilities.getValueBasedOnInput(s.constants.BUTTON_LWA_SIZE_SET,e.size,s.constants.BUTTON_DEFAULT_SIZE_LWA),r+="/","undefined"!=typeof e.type&&s.constants.BUTTON_LWA_TEXT_SET.indexOf(e.type.toLowerCase())>-1?(r+=s.constants.BUTTON_LWA_TEXT_IMAGE_SET[s.constants.BUTTON_LWA_TEXT_SET.indexOf(e.type.toLowerCase())],a=e.type):r+=s.constants.BUTTON_DEFAULT_TEXT;var d=i+r;return-1!==d.indexOf(a+".svg")&&(d=d.replace(/x-large|large|medium|small/,"svg")),d},o.Widgets.Utilities.getLWAButtonBasePath=function(e){var t=s.constants.BUTTON_BASE_PATH_PREFIX+s.constants.COUNTRY_CODE_TO_LANGUAGE_COUNTRY_MAP[u.COUNTRY_CODE],n=s.constants.REALM_TO_COUNTRY_CODE_MAP[e];return n.toLowerCase()!==u.COUNTRY_CODE.toLowerCase()&&(t+="/"+e),t+=s.constants.BUTTON_BASE_PATH_SUFFIX},o.Widgets.Utilities.getButtonPath=function(e,t){var n="",i="",r="",a="";if(void 0!==e?(n=o.Widgets.Utilities.getValueBasedOnInput(s.constants.BUTTON_COLOR_SET,e.color,s.constants.BUTTON_DEFAULT_COLOR),i=o.Widgets.Utilities.getValueBasedOnInput(s.constants.BUTTON_SIZE_SET,e.size,s.constants.BUTTON_DEFAULT_SIZE),r=o.Widgets.Utilities.getValueBasedOnInput(s.constants.BUTTON_BACKGROUND_SET,e.background,s.constants.BUTTON_DEFAULT_BACKGROUND)):(n=s.constants.BUTTON_DEFAULT_COLOR,i=s.constants.BUTTON_DEFAULT_SIZE,r=s.constants.BUTTON_DEFAULT_BACKGROUND),o.ABTest.Utilities.isSellerInABTest(o.Widgets.Utilities.getCartOwnerId(),o.ABTest.Tests.Default))a=o.ABTest.Utilities.getButtonPath(n,i);else{var d=s.constants.BUTTON_BASE_PATH,l="";l=t?"donation/":"pwa/",l+=n+"/"+i+"/"+r+"/",a=d+l}return a},o.Widgets.Utilities.isValidDocInclusion=function(){var e=!0;try{var t=window.top.document.domain,n=document.domain;e=o.Widgets.Utilities.baseDomainsMatch(t,n)}catch(i){if(window.ueLogError){var s={logLevel:p.ERROR,attribution:"Widget_core.js",message:f.IS_INVALID_DOCUMENT};window.ueLogError(i,s)}e=!1}return e},o.Widgets.Utilities.performContractAction=function(e,t){var n=o.Widgets.Utilities.createIframeStringWithSrc(s.constants.CONTRACT_FRAME_ID,"",0,0);o.jQuery("#"+s.constants.CONTRACT_FRAME_ID).remove(),o.jQuery("body").append(n);var i=u.WIDGET_ENDPOINT+s.constants.INLINE_WIDGETS_URI,r=o.Widgets.Utilities.createFormString(s.constants.CONTRACT_FORM_ID,i,s.constants.CONTRACT_FRAME_ID,e);o.jQuery("#"+s.constants.CONTRACT_FORM_ID).remove(),o.jQuery("#"+t).append(r),o.jQuery("#"+s.constants.CONTRACT_FORM_ID).submit()},o.Widgets.Utilities.getAccessToken=function(e,t){var n="";"undefined"!=typeof e&&null!==e&&(n=e.getSellerId()),o.Widgets.Utilities.setLwADomain(n);var i={scope:"payments:widget",interactive:g};e&&e.scope&&(i.scope=e.scope);var s=d().Login.authorize(i);s.onComplete(function(n){n.error?t(e,n.error):t(e,n.access_token)})},o.Widgets.Utilities.setLwaSandboxMode=function(){"true"===u.IS_SANDBOX&&"undefined"!=typeof d()&&"undefined"!=typeof d().Login&&d().Login.setSandboxMode(!0)},o.Widgets.Utilities.setLanguage=function(e,t){if("undefined"!=typeof d()&&"undefined"!=typeof d().Login){var n=o.Widgets.Utilities.getLanguageForSeller(e,t);o.Widgets.Utilities.isSellerAllowedForMultiLanguage(e,t)&&!o.Widgets.Utilities.isEmptyOrUndefined(t.language)&&d().Login.setLanguageHint(n)}},o.Widgets.Utilities.setLwADomain=function(e){"undefined"!=typeof d()&&"undefined"!=typeof d().Login&&(o.Widgets.Utilities.isSellerWhitelistedForNAAccountDomain(e)?(d().Login.setDomain(u.NA_ACCOUNT_DOMAIN_ENDPOINT),d().Login.setLanguage(s.constants.COUNTRY_CODE_TO_REALM_MAP[u.COUNTRY_CODE.toLowerCase()])):d().Login.setDomain(u.LWA_ENDPOINT))},o.Widgets.Utilities.validationException=function(){return s.constants.PARAMETER_VALIDATION_FAILED_MSG},o.Widgets.Utilities.isSellerHidingButton=function(e){var t=o.jQuery("#"+e).css("display"),n=o.jQuery("#"+e+" > img").css("display"),i="none"===t||"none"===n,s=o.jQuery("#"+e).css("opacity"),r=o.jQuery("#"+e+" > img").css("opacity"),a="0"===s||"0"===r,d=o.jQuery("#"+e).css("visibility"),l=o.jQuery("#"+e+" > img").css("visibility"),u="hidden"===d||"hidden"===l,c=o.jQuery("#"+e).css("position"),g=parseInt(o.jQuery("#"+e).css("left")),p=parseInt(o.jQuery("#"+e).css("right")),f="absolute"===c&&(0>g||0>p);return i||a||u||f},o.Widgets.Utilities.isSVGSupported=function(){return!!("createElementNS"in document&&document.createElementNS(s.constants.SVG_NAMESPACE,"svg").createSVGRect)},o.Widgets.Utilities.isSellerAllowed=function(e,t){return"undefined"!=typeof t.height||"undefined"!=typeof t.width?!0:!1},o.Widgets.Utilities.createSubclass=function(e){function t(){}return t.prototype=e,new t},o.Widgets.Utilities.imageInDOM=function(e){return void 0!==e&&e.width>1&&e.height>1},o.Widgets.Utilities.isElementInArray=function(e,t){return o.Widgets.Utilities.isEmptyOrUndefined(e)||o.Widgets.Utilities.isEmptyOrUndefined(t)?!1:o.jQuery.inArray(e,t)>=0},o.Widgets.Utilities.removeWhiteSpacesInString=function(e){if(void 0!==e){var t=e.replace(/\s+/g,"");return t}return e},o.Widgets.Utilities.stringToArray=function(e){var t=o.Widgets.Utilities.removeWhiteSpacesInString(e);return t.split(",")},o.Widgets.Utilities.createQueryString=function(e){var t="?",n=!0;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];n?(t+=i+"="+encodeURIComponent(o),n=!1):t+="&"+i+"="+encodeURIComponent(o)}return t},o.Widgets.Utilities.shouldInvokeSetTimeoutOnSigninForUserAgent=i,t.exports=o.Widgets.Utilities},{"./Config":10,"./Constants":12,"./EventTypes":13,"./LwaLogin":19,"./Mediator":20,"./SessionStabilizer":23,"./TaskQueue":24,"./jquery":30}],26:[function(e,t,n){var i={Widgets:{},jQuery:e("./jquery")},o=e("./Utilities"),s=e("./Constants"),r=e("./LwaLogin"),a=e("./InlineWidgetError"),d=e("./InlineWidget"),l=e("./Mediator").instance,u=e("./EventTypes"),c=e("./Config"),g=e("../widgets/MetricsCollector"),p=e("../widgets/ABTest").ABTest,f=e("./PubSub"),h="Form";i.Widgets.Wallet=function(e){g.Collector.time("walletwidget-pre-render"),this.type=s.others.WidgetTypes.Wallet,d.call(this,e),this.onPaymentSelect=e.onPaymentSelect;var t=this.design.width,n=this.design.height;switch(this.getDisplayMode()){case s.others.DisplayModes.read:this.design.checkWidth&&(void 0===t?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.width",t)):(this.design.width=o.verifySize(t,void 0,s.constants.WALLET_WIDGET.READ.min_width,s.constants.WALLET_WIDGET.READ.max_width),a.RaiseOnErrorIfUndefined(this.design.width,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.width",t),this))),this.design.checkHeight&&(void 0===n?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.height",n)):(this.design.height=o.verifySize(n,void 0,s.constants.WALLET_WIDGET.READ.min_height,s.constants.WALLET_WIDGET.READ.max_height),a.RaiseOnErrorIfUndefined(this.design.height,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.height",n),this)));break;case s.others.DisplayModes.edit:this.design.checkWidth&&(void 0===t?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.width",t)):(this.design.width=o.verifySize(t,void 0,s.constants.WALLET_WIDGET.EDIT.min_width,s.constants.WALLET_WIDGET.EDIT.max_width),a.RaiseOnErrorIfUndefined(this.design.width,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.width",t),this))),this.design.checkHeight&&(void 0===n?a.RaiseMissingParameterError(this,o.buildParamNameValueMap("design.height",n)):(this.design.height=o.verifySize(n,void 0,s.constants.WALLET_WIDGET.EDIT.min_height,s.constants.WALLET_WIDGET.EDIT.max_height),a.RaiseOnErrorIfUndefined(this.design.height,s.constants.INVALID_PARAMETER_VALUE_MSG,o.buildParamNameValueMap("design.height",n),this)))}i.jQuery(this).bind(u.ON_PAYMENT_SELECT,this,this.onPaymentSelectHandler)},i.Widgets.Wallet.prototype=o.createSubclass(d.prototype),i.Widgets.Wallet.prototype.constructor=i.Widgets.Wallet,i.Widgets.Wallet.prototype.onPaymentSelectHandler=function(e){f.publish("WALLET_RENDER_COMPLETE",this.getID(),this.getSellerId());var t=e.data,n=t.eventValue;this.getID()===n&&void 0!==this.onPaymentSelect&&this.onPaymentSelect(t)},i.Widgets.Wallet.prototype.renderElements=function(){if(f.publish("WALLET_RENDER_START",this.getID()),void 0!==this.hasError&&this.hasError)return i.jQuery("#"+this.locationID).empty(),!1;var e=this;o.setLwaSandboxMode(),"undefined"!=typeof r()&&"undefined"!=typeof r().Login&&"undefined"!=typeof r().Login.getClientId&&"undefined"!=typeof r().Login.getClientId()?o.getAccessToken(e,e.renderWallet):e.renderWallet(e,"")},i.Widgets.Wallet.prototype.renderWallet=function(e,t){var n=e.getID()+"IFrame",r=o.createIFrameString(n,e.design.width,e.design.height),d=e.getID()+h,u=c.WIDGET_ENDPOINT+s.constants.INLINE_WIDGETS_URI,f={action:c.WALLET_WIDGET_ACTION,referringURL:window.top.location,cartOwnerId:e.getSellerId(),marketplaceSellerId:e.getMarketplaceSellerId(),access_token:t,agreementType:e.agreementType,displayMode:e.getDisplayMode(),widgetId:e.getID(),widgetWidth:e.design.width,widgetHeight:e.design.height,widgetDesignMode:e.design.designMode,widgetPadding:e.design.padding,browserWindowHeight:e.getBrowserWindowHeight(),paymentInstrumentsDisplayOptions:e.getPaymentInstrumentsDisplayOptions(),clientId:o.getClientId()};"undefined"!=typeof e.getContractId()&&null!==e.getContractId()?f.contractId=e.getContractId():"function"==typeof e.onOrderReferenceCreate?f.createContract=!0:"function"==typeof e.onBillingAgreementCreate?f.createContract=!0:"function"==typeof e.onReady&&(f.createContract=!0),a.isMissingParameter("sellerId",e.getSellerId(),e),e.error&&e.error.errorType&&(f.clientErrorType=e.error.errorType,f.clientErrorElementName=e.error.errorElementName,f.clientErrorElementValue=e.error.errorElementValue,f.clientErrorMessage=e.error.errorMessage);var m=o.createFormString(d,u,n,f);i.jQuery("#"+d).remove(),o.createWidgetContainer(e.locationID,e.getID(),e.design.width,e.design.height,r,e.type),o.createWidgetForm(e.locationID,e.getID(),e.design.width,e.design.height,m,d);var E=l.getAddressWidgets();s.constants.READY_TO_RENDER&&(0===E.length||E[0].rendered===!0?(g.Collector.timeEnd("walletwidget-pre-render"),i.jQuery("#"+d).submit()):p.Utilities.getExperimentValueAndCallback(f.cartOwnerId,p.Tests.WALLET_WIDGET_SETTIMEOUT,function(e){e&&e!==p.Constants.TREATMENT_C?g.Collector.timeEnd("walletwidget-pre-render"):s.constants.TIMEOUT_ID=window.setTimeout(function(){g.Collector.timeEnd("walletwidget-pre-render"),i.jQuery("#"+d).submit()},5e3)}))},t.exports=i.Widgets.Wallet},{"../widgets/ABTest":35,"../widgets/MetricsCollector":37,"./Config":10,"./Constants":12,"./EventTypes":13,"./InlineWidget":16,"./InlineWidgetError":17,"./LwaLogin":19,"./Mediator":20,"./PubSub":22,"./Utilities":25,"./jquery":30}],27:[function(e,t,n){var i={jQuery:e("./jquery"),Widgets:{}},o=e("./Utilities"),s=e("./Constants"),r=e("./Mediator").instance,a=e("./EventTypes");i.Metrics=e("../widgets/MetricsCollector"),i.Widgets.Widget=function(e){this.collector=new i.Metrics.Collector;var t=s.constants.WIDGETID_PREFIX+r.generateUniqWidgetID();this.getID=function(){return t},this.getWidgetCount=function(){return r.getNumWidgetCount()},r.register(this),i.jQuery(this).bind(a.DOCUMENT_READY,this,this.documentReadyEventHandler),this.getSellerId=function(){return o.isEmptyOrUndefined(e.sellerId)?"":e.sellerId},this.getMarketplaceSellerId=function(){return o.isEmptyOrUndefined(e.marketplaceSellerId)?"":e.marketplaceSellerId}},i.Widgets.Widget.prototype.renderImpl=function(){this.renderElements(),this.type===s.others.WidgetTypes.Button&&this.bindClickHandler(this)},i.Widgets.Widget.prototype.removeEventListener=i.Widgets.Widget.prototype.detachEvent=function(){},i.Widgets.Widget.prototype.bind=function(e){var t=o.isValidDocInclusion();return t&&(this.locationID=e,this.renderRequested=!0,"undefined"!=typeof this.design&&null!==this.design.designMode&&void 0!==this.design.designMode&&("smartphoneCollapsible"!==this.design.designMode&&"smartphoneNonCollapsible"!==this.design.designMode||null===i.jQuery("#"+e).width()||(this.design.width=i.jQuery("#"+e).width())),this.type!==s.others.WidgetTypes.Button?this.renderImpl():i.jQuery("#"+this.locationID).length>0&&(this.renderImpl(),i.jQuery(this).unbind(a.DOCUMENT_READY,this.documentReadyEventHandler))),this},i.Widgets.Widget.prototype.renderElements=function(){return""},i.Widgets.Widget.prototype.bindClickHandler=function(){return""},i.Widgets.Widget.prototype.documentReadyEventHandler=function(e,t){this.renderRequested&&t.renderImpl()},i.Widgets.Widget.prototype.getLocation=function(){return this.locationID},i.Widgets.Widget.prototype.getWidgetType=function(){return this.type},i.Widgets.Widget.prototype.encodeShippingRestrictions=function(){var e=JSON.stringify(this.shippingRestrictions),t=e.replace(/\"/g,"&quot;");
return t},t.exports=i.Widgets.Widget},{"../widgets/MetricsCollector":37,"./Constants":12,"./EventTypes":13,"./Mediator":20,"./Utilities":25,"./jquery":30}],28:[function(e,t,n){var i={Widgets:{},jQuery:e("./jquery")},o=e("./InlineWidgetError"),s=e("./Utilities"),r=e("./Constants"),a={RESPONSIVE:"responsive",SMART_PHONE_COLLAPSIBLE:"smartphoneCollapsible",SMART_PHONE_NON_COLLAPSIBLE:"smartphoneNonCollapsible"};i.Widgets.Design=function(e,t){"undefined"!=typeof e?(this.checkWidth=!0,this.checkHeight=!0,this.name=e.name,this.colorTheme=e.colorTheme,null!==e.size&&void 0!==e.size&&(this.width=e.size.width,this.height=e.size.height),null!==e.designMode&&void 0!==e.designMode?(e.designMode===a.SMART_PHONE_COLLAPSIBLE||e.designMode===a.SMART_PHONE_NON_COLLAPSIBLE||e.designMode===a.RESPONSIVE?(this.designMode=e.designMode,o.SetErrorIfParameterExists("design.width",this.width,null,t,"smartphone"),this.width=document.body.clientWidth,this.checkWidth=!1,null!==e.padding&&void 0!==e.padding&&(s.isValidSizeValue(e.padding)?this.padding=parseFloat(e.padding):o.RaiseOnError(r.constants.INVALID_PARAMETER_VALUE_MSG,s.buildParamNameValueMap("design.padding",e.padding),t))):t.error=new o(r.constants.INVALID_PARAMETER_VALUE,null,"design.designMode",e.designMode),e.designMode===a.SMART_PHONE_COLLAPSIBLE?(this.height=135,this.checkHeight=!1):e.designMode===a.RESPONSIVE&&(this.height="100%",this.width="100%",this.checkHeight=!1,this.checkWidth=!1)):(this.designMode="",o.SetErrorIfParameterExists("design.padding",e.padding,null,t,"nonSmartphone"))):o.RaiseOnErrorIfUndefined(e,r.constants.INVALID_PARAMETER_VALUE_MSG,s.buildParamNameValueMap("design",""),t)},t.exports=i.Widgets.Design},{"./Constants":12,"./InlineWidgetError":17,"./Utilities":25,"./jquery":30}],29:[function(e,t,n){t.exports=function(){return window.OffAmazonPayments?window.OffAmazonPayments.ZERO_TIME:0}},{}],30:[function(e,t,n){var i=window.$,o=i.noConflict(!0);t.exports=o},{}],31:[function(e,t,n){function i(e){return function(t){a[e+";"+t]=(new Date).getTime()}}function o(e){return function(t){var n,i=(new Date).getTime(),o=e+";"+t,s=a[o];s&&(n=new r,n.addTiming(d[e],s,i,[]),n.publish(),delete a[o])}}var s=e("../PubSub"),r=e("../../widgets/MetricsCollector").Collector,a={},d={address:"address_render_time",wallet:"wallet_render_time"};t.exports=function(){s.subscribe("ADDRESS_RENDER_START",i("address")),s.subscribe("ADDRESS_RENDER_COMPLETE",o("address")),s.subscribe("WALLET_RENDER_START",i("wallet")),s.subscribe("WALLET_RENDER_COMPLETE",o("wallet"))}},{"../../widgets/MetricsCollector":37,"../PubSub":22}],32:[function(e,t,n){var i={Widgets:{}};i.Widgets.Cookie=function(){},i.Widgets.Cookie.eraseCookie=function(e){i.Widgets.Cookie.createCookie(e,"",-1)},i.Widgets.Cookie.createCookie=function(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+60*n*60*1e3),i="; expires="+o.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},i.Widgets.Cookie.readCookie=function(e){if(document.cookie&&""!==document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n],o=i.split("="),s=o[0].replace(/ /,"");if(0===s.indexOf(e))return o[1]}return null},i.Widgets.Cookie.isCookiePresent=function(e){var t=i.Widgets.Cookie.readCookie(e);return void 0!==t&&null!==t?!0:!1},t.exports=i.Widgets.Cookie},{}],33:[function(e,t,n){var i={};i.constants={},i.constants.LOCALSTORAGEUTILS_EPS_METRICS_PREFIX="amz-eps-metrics-",i.doesLocalStorageExist=function(){return void 0===typeof localStorage?!1:!0},i.insertEntry=function(e,t){var n=i.constants.LOCALSTORAGEUTILS_EPS_METRICS_PREFIX+e;try{localStorage.setItem(n,t)}catch(o){return!1}return!0},i.filterAndProcessMetrics=function(){var e="",t="",n=[];if(i.doesLocalStorageExist()){for(e in localStorage)0===e.indexOf(i.constants.LOCALSTORAGEUTILS_EPS_METRICS_PREFIX)&&(t=e.replace(i.constants.LOCALSTORAGEUTILS_EPS_METRICS_PREFIX,""),n.push({url:localStorage.getItem(e),id:t}),localStorage.removeItem(e));return n}},t.exports={LocalStorageUtils:i,filterAndProcessMetricss:i.filterAndProcessMetrics,insertEntry:i.insertEntry,doesLocalStorageExist:i.doesLocalStorageExist}},{}],34:[function(e,t,n){var i={MetricsStore:{}};i.MetricsStore=i.MetricsStore||{},i.MetricsStore.toExecute=[],i.MetricsStore.onAdd=function(e){i.MetricsStore.toExecute.push(e)},i.MetricsStore.add=function(e){for(var t=0;t<i.MetricsStore.toExecute.length;t++){var n=i.MetricsStore.toExecute[t];n(e)}},t.exports={MetricsStore:i.MetricsStore,onAdd:i.MetricsStore.onAdd,add:i.MetricsStore.add}},{}],35:[function(e,t,n){if(!i||"undefined"==typeof i){var i={};i.jQuery=e("../core/jquery")}var o=e("../core/Utilities"),s=e("../core/Constants"),r=e("../core/ButtonCallbacks"),a=e("../core/Config"),d=e("../widgets/MetricsCollector");i.ABTest=i.ABTest||{},i.ABTest.Utilities=i.ABTest.Utilities||{},i.ABTest._bepCallback,i.ABTest.Constants={},i.ABTest.Constants.IMG_PATH_PREFIX="ABTesting",i.ABTest.Constants.ABTEST_URI="/gp/widgets/abtests",i.ABTest.Constants.TREATMENT_C="C",i.ABTest.Constants.TREATMENT_T1="T1",i.ABTest.Constants.COOKIE_TIME_TO_LIVE=24,i.ABTest.Utilities.createCookieForABTest=function(e,t){void 0!=e&&void 0!=t&&o.createCookie(t,e,i.ABTest.Constants.COOKIE_TIME_TO_LIVE)},i.ABTest.Utilities.buildQueryParamMap=function(e,t,n){var i=e||{};return i[t]=n,i},i.ABTest.Utilities.ajaxCallForJSONPResponse=function(e,t,n){o.jsonp({url:e,success:t,error:n})},i.ABTest.Utilities.getExperimentValueAndCallback=function(e,t,n){function s(n){var i=new Array(m,h,E);if(!o.isEmptyOrUndefined(n)){for(var s=0;s<i.length;s++)if(!n.hasOwnProperty(i[s]))return!1;if(n.merchantId===e&&n.abtestName===t.testName)return!0}return!1}function l(e){s(e)&&(f=e.treatment,u(e)),"function"==typeof n&&n(f),o.isEmptyOrUndefined(t.cookieName)||c(e)}function u(t){var n=new d.Collector(e);r.before_publish_click_metric_callbacks.push(function(e){e.addInfoOrEntry("weblab-name",t.abtestName,"info"),e.addInfoOrEntry("weblab-treatment",t.treatment,"info")}),n.addInfoOrEntry("weblab-name",t.abtestName,"info"),n.addInfoOrEntry("weblab-treatment",t.treatment,"info"),n.addInfoOrEntry("merchant-id",e,"info"),n.addCounter("lpa-buttonrender-metric"),n.publish()}function c(e){s(e)?i.ABTest.Utilities.createCookieForABTest(e.treatment,t.cookieName):o.isCookiePresent(t.cookieName)&&o.eraseCookie(t.cookieName),i.ABTest.triggerBEPCallback()}function g(){"function"==typeof n&&n(f),o.isEmptyOrUndefined(t)||o.isEmptyOrUndefined(t.cookieName)||p(t.cookieName)}function p(e){o.eraseCookie(e),i.ABTest.triggerBEPCallback()}var f=i.ABTest.Constants.TREATMENT_C,h="merchantId",m="abtestName",E="treatment";if(o.isEmptyOrUndefined(t)||o.isEmptyOrUndefined(e))g();else{var T,y;T=i.ABTest.Utilities.buildQueryParamMap(T,h,e),T=i.ABTest.Utilities.buildQueryParamMap(T,m,t.testName),y=a.WIDGET_ENDPOINT+i.ABTest.Constants.ABTEST_URI+o.createQueryString(T),i.ABTest.Utilities.ajaxCallForJSONPResponse(y,l,g)}},i.ABTest.Utilities.getExperimentValueForABTestDefault=function(e){return o.imageInDOM(e)?i.ABTest.Constants.TREATMENT_C:i.ABTest.Constants.TREATMENT_T1},i.ABTest.Utilities.getButtonPath=function(e,t){var n=a.WIDGET_ENDPOINT+s.constants.BUTTON_URI,i="?sellerId="+s.constants.CartOwnerId+"&size="+t+"&color="+e;return n+i},i.ABTest.triggerBEPCallback=function(){"function"==typeof i.ABTest._bepCallback&&i.ABTest._bepCallback.call()},i.ABTest.cookieReady=function(e){"function"==typeof e&&(i.ABTest.Utilities.isSellerInABTest(o.getCartOwnerId(),i.ABTest.Tests.Default)?i.ABTest._bepCallback=e:e())},i.ABTest.Utilities.bindButtonOnloadActions=function(e){var t=!1;e.complete?!t&&(e.height>0||e.width>0)&&(t=!0,i.ABTest.Utilities.buttonOnloadActions(e)):i.jQuery(e).load(function(){t||(t=!0,i.ABTest.Utilities.buttonOnloadActions(e))})},i.ABTest.Utilities.buttonOnloadActions=function(e){i.ABTest.Utilities.createCookieForABTest(i.ABTest.Utilities.getExperimentValueForABTestDefault(e),i.ABTest.Tests.Default.cookieName),i.ABTest.triggerBEPCallback()},i.ABTest.Utilities.getSellersForABTest=function(e){return o.isEmptyOrUndefined(e)||o.isEmptyOrUndefined(e.sellersInTest)?[]:o.stringToArray(e.sellersInTest)},i.ABTest.Utilities.isSellerInABTest=function(e,t){if(!o.isEmptyOrUndefined(t)){var n=i.ABTest.Utilities.getSellersForABTest(t);if(!o.isEmptyOrUndefined(n))return o.isElementInArray(e,n)}return!1},i.ABTest.Utilities.isAllowedTreatmentforABTest=function(e,t){var n=o.stringToArray(t);return o.isElementInArray(e,n)},i.ABTest.Utilities._abTestAfter=function(e,t){for(var n in i.ABTest.Tests){var o=i.ABTest.Tests[n];o.ignoreCheckWhiteList||i.ABTest.Utilities.isSellerInABTest(e,o)&&i.ABTest.Utilities.getExperimentValueAndCallback(e,o,o.callback(t))}},i.ABTest.Utilities._abTestBefore=function(e,t){for(var n in i.ABTest.Tests){var s=i.ABTest.Tests[n];s.ignoreCheckWhiteList||(i.ABTest.Utilities.isSellerInABTest(e,s)?i.jQuery("#"+t).hide():o.isCookiePresent(s.cookieName)&&o.eraseCookie(s.cookieName))}},i.ABTest.Utilities._MULTI_BUTTONS_AbTestCallback=function(e){return function(t){function n(e){return 2===e.length}function s(e){for(var t=e.getElementsByTagName("img"),n=0;n<t.length;n++)imgEle=t[n],imgSrc=imgEle.getAttribute("src"),o.isAmazonPaymentsButtonImage(imgSrc)&&r(imgSrc)}function r(e){var o="offAmazonPayments",s=e.split(o);if(n(s)){var r=s[0]+o+"/"+i.ABTest.Constants.IMG_PATH_PREFIX+"/"+i.ABTest.Tests.MULTI_BUTTONS.testName+"/"+t+s[1];imgEle.setAttribute("src",r)}}if(i.ABTest.Utilities.isAllowedTreatmentforABTest(t,i.ABTest.Tests.MULTI_BUTTONS.allowedTreatments)){var a=document.getElementById(e);s(a)}i.jQuery("#"+e).show()}},r.before_callbacks.push(i.ABTest.Utilities._abTestBefore),r.after_callbacks.push(i.ABTest.Utilities._abTestAfter),i.ABTest.Tests={Default:{testName:"DEFAULT",cookieName:"amz_abtest_default",sellersInTest:a.DEFAULT_ABTEST_MERCHANTS,callback:""},MULTI_BUTTONS:{testName:"MULTI_BUTTONS",cookieName:"",allowedTreatments:a.MULTI_BUTTONS_ABTEST_ALLOWED_TREATMENTS,sellersInTest:a.MULTI_BUTTONS_ABTEST_MERCHANTS,callback:i.ABTest.Utilities._MULTI_BUTTONS_AbTestCallback},WALLET_WIDGET_SETTIMEOUT:{testName:"WALLET_WIDGET_SETTIMEOUT",cookieName:"",allowedTreatments:a.WALLET_WIDGET_ABTEST_ALLOWED_TREATMENTS,sellersInTest:a.WALLET_WIDGET_ABTEST_MERCHANTS,ignoreCheckWhiteList:!0,callback:""},SVG_WEBLAB:{testName:"SVG_BUTTONS",cookieName:"",allowedTreatments:a.SVG_WEBLAB_ABTEST_ALLOWED_TREATMENTS,sellersInTest:a.SVG_WEBLAB_ABTEST_MERCHANTS,ignoreCheckWhiteList:!0,callback:""}},t.exports={ABTest:i.ABTest}},{"../core/ButtonCallbacks":7,"../core/Config":10,"../core/Constants":12,"../core/Utilities":25,"../core/jquery":30,"../widgets/MetricsCollector":37}],36:[function(e,t,n){if(!i||"undefined"==typeof i)var i={};var o=e("../core/jquery"),s=e("../core/Constants"),r=e("../core/LPAMetricsHelper"),a=e("../core/Config");i.DynamicButton=i.DynamicButton||{},i.DynamicButton.Utilities=i.DynamicButton.Utilities||{},i.DynamicButton.Constants={BUTTON_SCRIPT_BASE_PATH:"https://images-na.ssl-images-amazon.com/images/G/02/EP/offAmazonPayments/live/prod/js/",USER_REQUESTED_DEFAULT_SIZE_PX:0,DEFAULT_SMILEY_WIDTH_PX:20.2,DEFAULT_SMILEY_HEIGHT_PX:21.21,DEFAULT_SANDBOX_WATERMARK_HEIGHT_PX:21,SMILEY_VERTICAL_POSITION_PCT:17.67,TEXT_VERTICAL_POSITION_PCT:33,SANDBOX_WATERMARK_VERTICAL_POSITION_PCT:66,CONSTRAINT_MIN_HEIGHT_PX:34,MANDATORY_BUFFER_PX:2,WIDTH_INDEX:0,HEIGHT_INDEX:1,BGCOLOR_START_INDEX:0,BGCOLOR_END_INDEX:1,BGCOLOR_BORDER_INDEX:2,STANDARD_SPACING_DIVIDER:4,SPACING_TUNER_MULTIPLIER:.85,DEFAULT_BACKGROUND_COLOR:"Gold",DEFAULT_SIZE:"medium",DEFAULT_TYPE:"LwA",TEXT_INDEX_FOR_ONLY_SMILEY_BUTTON:7,RATIO_INDEX:0,SCALEX_INDEX:1,SCALEY_INDEX:2};var d={GOLD:"gold",LIGHTGREY:"lightgray",DARKGREY:"darkgray"};i.DynamicButton.Constants.ButtonCount=0,i.DynamicButton.Constants.BGCOLOR_ARRAY=[["#FAE69B","#EFC332","#AA8426"],["#FEFEFE","#E2E2E2","#BBBBBB"],["#7F8891","#434B57","#313142"]],i.DynamicButton.Utilities.getButtonSize=function(e,t){var n=s.constants.BUTTON_SVG_TEXT_SET,o=s.constants.BUTTON_LWA_SIZE_SET,r=e&&-1!==n.indexOf(e.toLowerCase())?n.indexOf(e.toLowerCase()):3,a=t&&-1!==o.indexOf(t.toLowerCase())?o.indexOf(t.toLowerCase()):1;return i.DynamicButton.Constants.BUTTON_SIZE_WxH_ARRAY[r][a]},i.DynamicButton.Constants.BUTTON_SIZE_WxH_ARRAY=[[[76,32],[101,46],[152,64],[202,92]],[[156,32],[174,41],[312,64],[390,92]],[[72,30],[90,45],[144,60],[180,90]],[[148,30],[200,45],[296,60],[400,90]],[[120,35],[150,50],[240,70],[300,100]],[[168,30],[253,45],[338,60],[505,90]],[[134,22],[150,30],[270,44],[300,60]],[[32,32],[46,46],[64,64],[92,92]]],i.DynamicButton.Constants.BUTTON_ASPECT_RATIO_DESKTOP=[[.421,.205,.416,.2027,.35,.178,.262,1],[.421,.205,.3,.2027,.35,.21,.163,1],[.2,.125,.35,.2027,.23,.135,.23,1],[.3,.165,.35,.202,.3,.165,.175,1],[.38,.205,.38,.2027,.35,.18,.22,1],[.421,.157,.416,.155,.35,.178,.262,1]],i.DynamicButton.Constants.BUTTON_ASPECT_RATIO_TOUCH=[[.455,.234,.5,.225,.33,.178,.272,1],[.455,.235,.326,.215,.33,.178,.2,1],[.2,.125,.35,.2027,.23,.135,.23,1],[.3,.165,.35,.202,.3,.165,.175,1],[.38,.205,.38,.2027,.35,.18,.22,1],[.455,.162,.5,.155,.33,.178,.272,1]],i.DynamicButton.Constants.TEXT_SIZE_WxH_ARRAY=[[[149,58],[503,58],[104,58],[545,58],[196,49],[550,49],[60,10],[0,0]],[[149,58],[474,58],[246,49],[572,57],[238,59],[567,60],[120,12],[0,0]],[[428,43],[800,45],[155,53],[523,53],[322,44],[693,42],[337,43],[0,0]],[[180,42],[528,43],[181,53],[523,53],[185,44],[528,42],[508,45],[0,0]],[[140,53],[490,53],[152,53],[493,53],[160,45],[499,45],[355,45],[0,0]],[[149,58],[825,58],[104,58],[870,58],[196,49],[550,49],[60,10],[0,0]]],i.DynamicButton.Constants.TEXT_PATH_ADJUSTMENT=[[[1.1,0,-29],[1,0,-30],[1.2,0,-12],[1.15,0,-12],[1,0,-28],[1,0,-28],[1.1,-61,-73],[0,0,0]],[[1.1,0,-29],[1,0,-30],[1,0,-30],[1,0,-30],[1,0,-28],[1,0,-28],[1.1,-91,-497],[0,0,0]],[[1,-838,-758],[1,-837,-331],[1,-838,-548],[1,-853,-162],[1,-970,-1405],[1,-969,-1576],[1,-965,-1790],[0,0,0]],[[1,-2168,-759],[1,-2169,-332],[1,-2174,-548],[1,-2161,-162],[1,-2050,-1417],[1,-2048,-1587],[1,-2044,-1802],[0,0,0]],[[1,-3630,-759],[1,-3630,-332],[1,-3629,-548],[1,-3630,-162],[1,-2969,-1417],[1,-2973,-1587],[1,-2965,-1802],[0,0,0]],[[1.1,0,-29],[2.505,0,-1.054],[1.2,0,-12],[2.48,0,-.0831],[1,0,-28],[1,0,-28],[1.1,-61,-73],[0,0,0]]],i.DynamicButton.Constants.FILEPATH_FOR_TEXT_SVG=[["buttons_en/text_svg_login_en.js","buttons_en/text_svg_loginwithamazon_en.js","buttons_en/text_svg_pay_en.js","buttons_en/text_svg_paywithamazon_en.js","buttons_en/text_svg_donate_en.js","buttons_en/text_svg_donatewithamazon_en.js","buttons_en/text_svg_editorupdate_en.js"],["buttons_de/text_svg_login_de.js","buttons_de/text_svg_loginwithamazon_de.js","buttons_de/text_svg_pay_de.js","buttons_de/text_svg_paywithamazon_de.js","buttons_de/text_svg_donate_de.js","buttons_de/text_svg_donatewithamazon_de.js","buttons_de/text_svg_editorupdate_de.js"],["buttons_fr/text_svg_login_fr.js","buttons_fr/text_svg_loginwithamazon_fr.js","buttons_fr/text_svg_pay_fr.js","buttons_fr/text_svg_paywithamazon_fr.js","buttons_fr/text_svg_donate_fr.js","buttons_fr/text_svg_donatewithamazon_fr.js","buttons_fr/text_svg_editorupdate_fr.js"],["buttons_it/text_svg_login_it.js","buttons_it/text_svg_loginwithamazon_it.js","buttons_it/text_svg_pay_it.js","buttons_it/text_svg_paywithamazon_it.js","buttons_it/text_svg_donate_it.js","buttons_it/text_svg_donatewithamazon_it.js","buttons_it/text_svg_editorupdate_it.js"],["buttons_es/text_svg_login_es.js","buttons_es/text_svg_loginwithamazon_es.js","buttons_es/text_svg_pay_es.js","buttons_es/text_svg_paywithamazon_es.js","buttons_es/text_svg_donate_es.js","buttons_es/text_svg_donatewithamazon_es.js","buttons_es/text_svg_editorupdate_es.js"],["buttons_jp/text_svg_login_jp.js","buttons_jp/text_svg_loginwithamazon_jp.js","buttons_jp/text_svg_pay_jp.js","buttons_jp/text_svg_paywithamazon_jp.js","buttons_jp/text_svg_donate_jp.js","buttons_jp/text_svg_donatewithamazon_jp.js","buttons_jp/text_svg_editorupdate_jp.js"]],i.DynamicButton.Constants.A_WITH_SMILEY_SVG="<g id='a-smile-22x23-svgtest' sketch:type='MSLayerGroup'><g id='Fill-1-+-Fill-2-+-Fill-3' sketch:type='MSShapeGroup'><g id='largearrowtest'><path d='M18.0205355,17.7001083 C15.8375936,19.8531453 12.6735141,21 9.94880581,21 C6.12995073,21 2.69159865,19.1113744 0.0889082165,15.9706025 C-0.116327928,15.7235978 0.0655393031,15.3870055 0.312161615,15.578006 C3.1200882,17.7621669 6.59251251,19.0772232 10.1775893,19.0772232 C12.5973421,19.0772232 15.2564034,18.408201 17.7033605,17.0179364 C18.072625,16.8084885 18.3826645,17.344974 18.0205355,17.7001083' id='Fill-1'></path><path d='M19.2496138,16.3784711 C18.9033645,15.9727011 16.9612157,16.1863688 16.0881456,16.2816746 C15.8241916,16.3108924 15.7817937,16.1004048 16.0208525,15.9472597 C17.5704405,14.9519654 20.1097472,15.2385783 20.4054452,15.5724963 C20.7027739,15.9076069 20.3271722,18.2354925 18.874447,19.3461675 C18.6516951,19.5173005 18.439597,19.425473 18.5380905,19.1997802 C18.8650977,18.4552225 19.5965154,16.7842411 19.2496138,16.3784711' id='Fill-2'></path><path d='M14.9183645,15.2944706 C14.7291152,15.4566817 14.4559166,15.4672362 14.2454983,15.3577113 C13.2961629,14.6084259 13.1284461,14.261251 12.6083058,13.5473493 C11.042979,15.066337 9.93455785,15.5217391 7.90660145,15.5217391 C5.50487092,15.5217391 3.63636364,14.1115843 3.63636364,11.2887656 C3.63636364,9.08373326 4.89160514,7.58542207 6.6784345,6.85084385 C8.2262265,6.20277819 10.388102,6.08486156 12.0416482,5.90976012 L12.0416482,5.55713489 C12.0416482,4.90950179 12.0957065,4.14542278 11.6958572,3.58534041 C11.3486125,3.08728755 10.681561,2.88095507 10.0940069,2.88095507 C9.00648229,2.88095507 8.03906686,3.41214225 7.80166486,4.51128444 C7.75251275,4.7567206 7.56453543,4.99878277 7.30541927,5.01124058 L4.54190736,4.72557607 C4.3087755,4.67695601 4.0475697,4.49709638 4.11561949,4.15865921 C4.75187139,0.964182585 7.78058669,0 10.4944014,0 C11.8819266,0 13.696103,0.35219267 14.789079,1.35297007 C16.1767859,2.58707187 16.0450473,4.23383863 16.0450473,6.02655209 L16.0450473,10.2582279 C16.0450473,11.5314334 16.6008932,12.0892664 17.1210335,12.7749651 C17.3050132,13.0219584 17.3438988,13.3169663 17.1124023,13.4967394 C16.5289367,13.9615715 15.4932898,14.8178729 14.9259054,15.3003535 L14.9183645,15.2944706 Z M12.1816051,8.78803298 C12.1816051,9.81572532 12.2100293,10.6702186 11.6098116,11.5833964 C11.1248483,12.3268174 10.351652,12.7826087 9.49542198,12.7826087 C8.32185346,12.7826087 7.63636329,12.0114826 7.63636329,10.8712907 C7.63636329,8.62558019 9.97220853,8.2173913 12.1816051,8.2173913 L12.1816051,8.78803298 Z' id='Fill-3'></path></g></g></g>",i.DynamicButton.Constants.SANDBOX_WATERMARK_SVG="<g id='sandbox-wrapper' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g id='Sandbox-watermark' sketch:type='MSLayerGroup'><rect id='Rectangle-31' stroke='#F30B08' fill='#FFFFFF' sketch:type='MSShapeGroup' x='1' y='1' width='19' height='19' rx='4'></rect><text id='S' sketch:type='MSTextLayer' font-size='17' font-weight='620' letter-spacing='0.70' fill='#FF0000'><tspan x='5.5' y='16'>S</tspan></text></g></g></g></svg>",i.DynamicButton.Utilities.ButtonSpecification=function(e,t,n,o,s,r,a,d){this.text=e,this.size=t,this.language=r,this.bgColor=a,this.textColor=d,this.heightRequested=n,this.widthRequested=o,this.isAspectRatioToBeMaintained=s,this.smileyHorizontalPositionInPercentage=0,this.textHorizontalPositionInPercentage=0,this.smileyVerticalPositionInPercentage=i.DynamicButton.Constants.SMILEY_VERTICAL_POSITION_PCT,this.textVerticalPositionInPercentage=i.DynamicButton.Constants.TEXT_VERTICAL_POSITION_PCT,this.textHeightInPx=0,this.textWidthInPx=0,this.size%2===0?this.aspectRatio=i.DynamicButton.Constants.BUTTON_ASPECT_RATIO_DESKTOP[this.language][this.text]:this.aspectRatio=i.DynamicButton.Constants.BUTTON_ASPECT_RATIO_TOUCH[this.language][this.text],(0!==this.heightRequested||0!==this.widthRequested)&&(this.aspectRatio=i.DynamicButton.Constants.BUTTON_ASPECT_RATIO_DESKTOP[this.language][this.text]),this.text===i.DynamicButton.Constants.TEXT_INDEX_FOR_ONLY_SMILEY_BUTTON?this.isTextOnButton=!1:this.isTextOnButton=!0,this.smileyTransformationRatio=0,this.buttonHeightInPx=0,this.buttonWidthInPx=0,this.input={},this.sellerId,i.DynamicButton.Constants.ButtonCount+=1,this.buttonCount=i.DynamicButton.Constants.ButtonCount},i.DynamicButton.Utilities.calculateSpacingWithText=function(e){e.textWidthInPx=i.DynamicButton.Constants.TEXT_SIZE_WxH_ARRAY[e.language][e.text][i.DynamicButton.Constants.WIDTH_INDEX]/i.DynamicButton.Constants.TEXT_SIZE_WxH_ARRAY[e.language][e.text][i.DynamicButton.Constants.HEIGHT_INDEX]*e.textHeightInPx;var t=i.DynamicButton.Utilities.getSmileyTextSpacingInPx(e.buttonHeightInPx),n=i.DynamicButton.Constants.DEFAULT_SMILEY_WIDTH_PX*e.smileyTransformationRatio,o=i.DynamicButton.Utilities.getButtonPaddingInPx(t),s=n+t+e.textWidthInPx+2*o,r=e.buttonWidthInPx/2-s/2;return e.smileyHorizontalPositionInPercentage=(r+o/2)/e.buttonWidthInPx*100,e.textHorizontalPositionInPercentage=(r+o/2+n+t)/e.buttonWidthInPx*100,e},i.DynamicButton.Utilities.calculateSpacingWithoutText=function(e){var t=e.buttonHeightInPx-2*i.DynamicButton.Utilities.getSmileyVerticalSpacingInPx(e);e.smileyTransformationRatio=t/i.DynamicButton.Constants.DEFAULT_SMILEY_HEIGHT_PX;var n=i.DynamicButton.Constants.DEFAULT_SMILEY_WIDTH_PX*e.smileyTransformationRatio;return e.smileyHorizontalPositionInPercentage=(e.buttonWidthInPx-n)/2/e.buttonWidthInPx*100,e.textHorizontalPositionInPercentage=0,e},i.DynamicButton.Utilities.precomputeValues=function(e){return e=i.DynamicButton.Utilities.computeDimensions(e),e=i.DynamicButton.Utilities.calculateSmileyTransformation(e),e=i.DynamicButton.Utilities.calculateTextTransformation(e),e=e.isTextOnButton?i.DynamicButton.Utilities.calculateSpacingWithText(e):i.DynamicButton.Utilities.calculateSpacingWithoutText(e)},i.DynamicButton.Utilities.computeDimensions=function(e){var t,n=e.widthRequested,o=e.heightRequested;0===o&&0===n?(n=i.DynamicButton.Constants.BUTTON_SIZE_WxH_ARRAY[e.text][e.size][i.DynamicButton.Constants.WIDTH_INDEX],o=i.DynamicButton.Constants.BUTTON_SIZE_WxH_ARRAY[e.text][e.size][i.DynamicButton.Constants.HEIGHT_INDEX]):0===o?(t=i.DynamicButton.Constants.CONSTRAINT_MIN_HEIGHT_PX/e.aspectRatio,n=n>t?n:t,o=n*e.aspectRatio):0===n?(o=o>i.DynamicButton.Constants.CONSTRAINT_MIN_HEIGHT_PX?o:i.DynamicButton.Constants.CONSTRAINT_MIN_HEIGHT_PX,n=o/e.aspectRatio):(o=o>i.DynamicButton.Constants.CONSTRAINT_MIN_HEIGHT_PX?o:i.DynamicButton.Constants.CONSTRAINT_MIN_HEIGHT_PX,t=o/e.aspectRatio,n=n>t?n:t);var s=o/e.aspectRatio,r=n*e.aspectRatio;return e.isAspectRatioToBeMaintained?(e.buttonWidthInPx=n>s?s:n,e.buttonHeightInPx=o>r?r:o):(e.buttonWidthInPx=n>s?n:s,e.buttonHeightInPx=o),e},i.DynamicButton.Utilities.calculateSmileyTransformation=function(e){var t=e.buttonHeightInPx-2*i.DynamicButton.Utilities.getSmileyVerticalSpacingInPx(e);return e.smileyTransformationRatio=t/i.DynamicButton.Constants.DEFAULT_SMILEY_HEIGHT_PX,e},i.DynamicButton.Utilities.calculateTextTransformation=function(e){return e.textHeightInPx=e.buttonHeightInPx-2*i.DynamicButton.Utilities.getTextVerticalSpacingInPx(e),e},i.DynamicButton.Utilities.getSmileyVerticalSpacingInPx=function(e){return e.buttonHeightInPx/(100/e.smileyVerticalPositionInPercentage)},i.DynamicButton.Utilities.getTextVerticalSpacingInPx=function(e){return e.buttonHeightInPx/(100/e.textVerticalPositionInPercentage)},i.DynamicButton.Utilities.getButtonPaddingInPx=function(e){return e/i.DynamicButton.Constants.STANDARD_SPACING_DIVIDER},i.DynamicButton.Utilities.getSmileyTextSpacingInPx=function(e){return e/i.DynamicButton.Constants.STANDARD_SPACING_DIVIDER*i.DynamicButton.Constants.SPACING_TUNER_MULTIPLIER},i.DynamicButton.Utilities.createBackgroundSVG=function(e){var t="0 0 "+(e.buttonWidthInPx+2).toFixed(2)+" "+e.buttonHeightInPx.toFixed(2),n="<svg width='"+e.buttonWidthInPx.toFixed(2)+"px' height='"+e.buttonHeightInPx.toFixed(2)+"px' viewBox='"+t+"' version='1.1'><defs><linearGradient x1='50%' y1='0%' x2='50%' y2='100%' id='LPABtnBgLinearGradient-"+e.buttonCount+"'>",o=i.DynamicButton.Constants.BGCOLOR_ARRAY[e.bgColor][i.DynamicButton.Constants.BGCOLOR_START_INDEX],s=i.DynamicButton.Constants.BGCOLOR_ARRAY[e.bgColor][i.DynamicButton.Constants.BGCOLOR_END_INDEX],r=i.DynamicButton.Constants.BGCOLOR_ARRAY[e.bgColor][i.DynamicButton.Constants.BGCOLOR_BORDER_INDEX],a="<stop stop-color='"+o+"' offset='0%'></stop><stop stop-color='"+s+"' offset='100%'></stop></linearGradient></defs><g id='Page-5' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' sketch:type='MSPage'>",d="<g id='Artboard' sketch:type='MSArtboardGroup' stroke='"+r+"' stroke-width='1' fill='url(#LPABtnBgLinearGradient-"+e.buttonCount+")'><rect id='Rectangle-16' sketch:type='MSShapeGroup' x='1' y='1' width='"+(e.buttonWidthInPx-i.DynamicButton.Constants.MANDATORY_BUFFER_PX).toFixed(2)+"' height='"+(e.buttonHeightInPx-i.DynamicButton.Constants.MANDATORY_BUFFER_PX).toFixed(2)+"' rx='2'>",l="</rect></g></g></svg>";return n+a+d+l},i.DynamicButton.Utilities.createASmileySVG=function(e){var t=e.textColor,n="<svg x='"+e.smileyHorizontalPositionInPercentage.toFixed(2)+"%' y='"+e.smileyVerticalPositionInPercentage.toFixed(2)+"%'><g id='Page-5' stroke='none' stroke-width='1' fill-rule='evenodd' sketch:type='MSPage' transform='scale("+e.smileyTransformationRatio+")' fill='"+t+"'>",o="</g></svg>",s=i.DynamicButton.Constants.A_WITH_SMILEY_SVG;return n+s+o},i.DynamicButton.Utilities.getSandboxWatermarkSign=function(e){var t=(e.buttonHeightInPx*(100-i.DynamicButton.Constants.SANDBOX_WATERMARK_VERTICAL_POSITION_PCT)/100).toFixed(2),n=((e.buttonWidthInPx-t-i.DynamicButton.Constants.MANDATORY_BUFFER_PX)/e.buttonWidthInPx*100).toFixed(2),o=i.DynamicButton.Constants.SANDBOX_WATERMARK_VERTICAL_POSITION_PCT,s=(t/i.DynamicButton.Constants.DEFAULT_SANDBOX_WATERMARK_HEIGHT_PX).toFixed(2),r="<svg x='"+n+"%' y='"+o+"%'><svg width='"+t+"px' height='"+t+"px' viewBox='0 0 "+t+" "+t+"' version='1.1'><g transform='scale("+s+")'> "+i.DynamicButton.Constants.SANDBOX_WATERMARK_SVG;return r},i.DynamicButton.Utilities.createTextWrapperSVG=function(e,t,n){var s,d=i.DynamicButton.Constants.TEXT_SIZE_WxH_ARRAY[n.language][n.text][i.DynamicButton.Constants.WIDTH_INDEX],l=i.DynamicButton.Constants.TEXT_SIZE_WxH_ARRAY[n.language][n.text][i.DynamicButton.Constants.HEIGHT_INDEX],u=i.DynamicButton.Constants.TEXT_PATH_ADJUSTMENT[n.language][n.text][i.DynamicButton.Constants.RATIO_INDEX],c=i.DynamicButton.Constants.TEXT_PATH_ADJUSTMENT[n.language][n.text][i.DynamicButton.Constants.SCALEX_INDEX],g=i.DynamicButton.Constants.TEXT_PATH_ADJUSTMENT[n.language][n.text][i.DynamicButton.Constants.SCALEY_INDEX],p=u*n.textWidthInPx/d,f=(d*p).toFixed(2),h=(l*p).toFixed(2),m=c*p,E=g*p,T="<svg width='"+f+"px' height='"+h+"px' viewBox='0 0 "+f+" "+h+"' version='1.1'><g id='Page-5' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' sketch:type='MSPage'><g id='Artboard' sketch:type='MSArtboardGroup' transform='translate("+m+", "+E+") scale("+p+")' fill='"+n.textColor+"'>",y="</g></g></svg>";s="true"===a.IS_SANDBOX?i.DynamicButton.Utilities.getSandboxWatermarkSign(n):"";var _=i.DynamicButton.Constants.BUTTON_SCRIPT_BASE_PATH+i.DynamicButton.Constants.FILEPATH_FOR_TEXT_SVG[n.language][n.text];return o.ajaxSetup({cache:!0}),o.getScript(_,function(){var a=T+i.DynamicButton.Utilities.getTextSVG()+y,d="<svg x='"+n.textHorizontalPositionInPercentage.toFixed(2)+"%' y='"+n.textVerticalPositionInPercentage.toFixed(2)+"%'>"+a+"</svg>";o("#"+t+" div").html(e+d+s+"</svg>"),r.publishMetricsForLPAButton(n.input,t,n.sellerId,!0)}),n},i.DynamicButton.Utilities.mapSelectionBasedOnInput=function(e,t){var n=e.color||i.DynamicButton.Constants.DEFAULT_BACKGROUND_COLOR,o=e.size||i.DynamicButton.Constants.DEFAULT_SIZE,s=e.type||i.DynamicButton.Constants.DEFAULT_TYPE;switch(t){case"US":languageSelected=0;break;case"DE":languageSelected=1;break;case"FR":languageSelected=2;break;case"IT":languageSelected=3;break;case"ES":languageSelected=4;break;case"JP":languageSelected=5;break;default:languageSelected=0}switch(n.toLowerCase()){case d.GOLD:bgcolorSelected=0,textColor="#000000";break;case d.LIGHTGREY:bgcolorSelected=1,textColor="#000000";break;case d.DARKGREY:bgcolorSelected=2,textColor="#FFFFFF";break;default:bgcolorSelected=0,textColor="#000000"}var r=["small","medium","large","x-large"];r.indexOf(o.toLowerCase())>-1?sizeSelected=r.indexOf(o.toLowerCase()):sizeSelected=r.indexOf(i.DynamicButton.Constants.DEFAULT_SIZE.toLowerCase());var a=["login","lwa","pay","pwa","donate","dwa","editorupdate","a"];a.indexOf(s.toLowerCase())>-1?textSelected=a.indexOf(s.toLowerCase()):textSelected=a.indexOf(i.DynamicButton.Constants.DEFAULT_TYPE.toLowerCase());var l="number"==typeof e.height?e.height:i.DynamicButton.Constants.USER_REQUESTED_DEFAULT_SIZE_PX,u="number"==typeof e.width?e.width:i.DynamicButton.Constants.USER_REQUESTED_DEFAULT_SIZE_PX,c="boolean"==typeof e.aspectRatio?e.aspectRatio:!0;return new i.DynamicButton.Utilities.ButtonSpecification(textSelected,sizeSelected,l,u,c,languageSelected,bgcolorSelected,textColor)},i.DynamicButton.Utilities.getNontextSVGComponent=function(e){var t="<svg xmlns='https://www.w3.org/2000/svg' xmlns:xlink='https://www.w3.org/1999/xlink' width='"+e.buttonWidthInPx.toFixed(2)+"px' height='"+e.buttonHeightInPx.toFixed(2)+"px'>",n=i.DynamicButton.Utilities.createBackgroundSVG(e),o=i.DynamicButton.Utilities.createASmileySVG(e);return t+n+o},i.DynamicButton.Utilities.createDynamicButton=function(e,t,n,o){var s=new i.DynamicButton.Utilities.mapSelectionBasedOnInput(e,t);s.input=e,s.sellerId=o,s=i.DynamicButton.Utilities.precomputeValues(s);var r=i.DynamicButton.Utilities.getNontextSVGComponent(s);return s.isTextOnButton?i.DynamicButton.Utilities.createTextWrapperSVG(r,n,s):document.getElementById(n).innerHTML=r+"</svg>",s},t.exports=i.DynamicButton},{"../core/Config":10,"../core/Constants":12,"../core/LPAMetricsHelper":18,"../core/jquery":30}],37:[function(e,t,n){var i=e("../core/jquery"),o=e("../core/Utilities"),s=e("../core/Constants"),r=e("../core/Config"),a=e("../core/utilities/MetricsStore"),d=e("../core/utilities/LocalStorageUtils").LocalStorageUtils,l={Metrics:{}},u={};l.Metrics.QueryLogInfoKeys={SUB_PAGE_TYPE:"sub-page-type",PAGE_ACTION:"page-action",PAGE_TYPE_ID:"page-type-id",SELLER_ID:"merchant-id",WEBLAB_NAME:"weblab-name",WEBLAB_TREATMENT:"weblab-treatment"},l.Metrics.PageActions={BUTTON_RENDER:"buttonrender",BUTTON_CLICK:"buttonclick"},l.Metrics.ProductTypes={APA:"apa",LPA:"lpa"},l.Metrics.MetricKeys={INFO:"info",ENTRIES:"entries"},l.Metrics.Tags={DYNAMIC:"dynamic"},l.Metrics.Collector=function(e){l.Metrics.Collector.prototype.constructor=l.Metrics.Collector,this.sellerId=e,this.metrics={},this.metrics.counters=[],this.metrics.timings=[],this.metrics.info=[],this.metrics.entries=[],this.id=(new Date).getTime()},l.Metrics.Collector.prototype.addTiming=function(e,t,n,i){o.isEmptyOrUndefined(e)||null===t||null===n||this.metrics.timings.push(this.createTiming(e,t,n,i))},l.Metrics.Collector.prototype.createTiming=function(e,t,n,i){var o={};return o.name=e,o.time=n-t,o.tags=i||[],o},l.Metrics.Collector.prototype.addCounter=function(e,t){o.isEmptyOrUndefined(e)||this.metrics.counters.push(this.createCounter(e,t))},l.Metrics.Collector.prototype.createCounter=function(e,t){var n={};return n.name=e,n.tags=t||[],n},l.Metrics.Collector.prototype.addInfoOrEntry=function(e,t,n){o.isEmptyOrUndefined(e)||o.isEmptyOrUndefined(t)||this.metrics[n].push(this.createInfo(e,t))},l.Metrics.Collector.prototype.createInfo=function(e,t){var n={};return n.name=e,n.value=t,e!==l.Metrics.QueryLogInfoKeys.SELLER_ID&&(n.value=n.value.toLowerCase()),n},l.Metrics.Collector.prototype.createUrl=function(){var e=i.param({sellerId:this.sellerId,data:this.toJSON()});return r.WIDGET_ENDPOINT+s.constants.CSM_URI+e},l.Metrics.Collector.prototype.publish=function(){var e=this.createUrl();o.jsonp({url:e,id:this.id})},l.Metrics.Collector.prototype.safePublish=function(){var e=this.createUrl();d.doesLocalStorageExist()?d.insertEntry(this.id,e):o.jsonp({
url:e,id:this.id})},l.Metrics.Collector.prototype.publishPendingMetrics=function(){for(var e=d.filterAndProcessMetrics(),t=0;t<e.length;t++)o.jsonp({url:e[t].url,id:e[t].id})},l.Metrics.Collector.prototype.publishAndInvokeEvent=function(e){var t=e.param,n=e.method,s=this.id,r=this.createUrl(),a=!1;if("undefined"!=typeof s&&null!==s&&"undefined"!=typeof r&&null!==r){var d=i("#"+s);if(null===d||"undefined"==typeof d||0===d.length){var l=document.createElement("script");l.type="text/javascript",l.src=r,l.async=!1,o.addLoadEventHandler({element:l,method:n,params:t});var u=document.body;null!==u&&"undefined"!=typeof u&&(u.appendChild(l),a=!0)}}a||n(t)},l.Metrics.Collector.prototype.toJSON=function(){return JSON.stringify(this.metrics).replace(/"/g,"'")},l.Metrics.Collector.prototype.addButtonInfoData=function(e,t,n,i){this.addInfoOrEntry(l.Metrics.QueryLogInfoKeys.SUB_PAGE_TYPE,e,l.Metrics.MetricKeys.INFO),this.addInfoOrEntry(l.Metrics.QueryLogInfoKeys.PAGE_ACTION,t,l.Metrics.MetricKeys.INFO),this.addInfoOrEntry(l.Metrics.QueryLogInfoKeys.PAGE_TYPE_ID,n,l.Metrics.MetricKeys.INFO),this.addInfoOrEntry(l.Metrics.QueryLogInfoKeys.SELLER_ID,i,l.Metrics.MetricKeys.INFO)},l.Metrics.Collector.time=function(e,t){u[e]={startTime:(new Date).getTime(),tags:t||[]}},l.Metrics.Collector.timeEnd=function(e,t){var n,i=u[e];return void 0!==i&&null!==i&&(n=new l.Metrics.Collector,i.endTime=(new Date).getTime(),i.tags=i.tags.concat(t||[]),n.addTiming(e,i.startTime,i.endTime,t),n.publish(),delete u[e]),n},l.Metrics.Collector.collect=function(e){var t=new l.Metrics.Collector;t.addTiming(e.name,e.startTime,e.endTime,[]),t.publish()},a.onAdd(l.Metrics.Collector.collect),t.exports=l.Metrics},{"../core/Config":10,"../core/Constants":12,"../core/Utilities":25,"../core/jquery":30,"../core/utilities/LocalStorageUtils":33,"../core/utilities/MetricsStore":34}],38:[function(e,t,n){function i(e,t,n){return r.isSellerAllowed(t,n)&&r.isSVGSupported()&&!r.isSellerAllowedForMultiLanguage(t,n)&&!r.isSellerHidingButton(e)&&!p.isHostedPaymentsInput(n.type)}e("../core/ArrayPolyfill")();var o=e("./ABTest").ABTest,s=e("./DynamicButtons"),r=e("../core/Utilities"),a=e("../core/LPAMetricsHelper"),d=e("../core/Constants"),l=e("../core/EventTypes"),u=e("../core/BridgeHelper"),c=e("../core/LwaLogin"),g=e("../core/CheckoutWidget"),p=e("../core/HostedPayments"),f=e("../core/ButtonCallbacks"),h=e("../core/Config"),m=e("../core/ZeroTime"),E=e("../core/BrowserSupport"),T=e("../core/HighResButtons"),y="never",_="donation";if(!A||"undefined"==typeof A)var A={};if(A.Metrics=e("./MetricsCollector"),String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},!A.Widgets||"undefined"==typeof A.Widgets){A.Widgets={},A.jQuery=e("../core/jquery"),A.Widgets.mainCollector=new A.Metrics.Collector;var v=e("../core/Mediator").instance;A.Button=function(e,t,n){d.constants.CartOwnerId=t;for(var u=r.getLanguageForSeller(t,n),g=0;g<f.before_callbacks.length;g++)f.before_callbacks[g].call(null,t,e);var m=(new Date).getTime();n.buttonConstructorStartTime=m,d.constants.IS_DYNAMIC_BUTTON_USED=i(e,t,n);var _,S=document.getElementById(e);"undefined"==typeof t&&(_=r.buildParamNameValueMap("sellerId","undefined")),p.isHostedPaymentsInput(n.type)||"function"==typeof n.authorization||(_=r.buildParamNameValueMap("authorization","undefined")),p.isHostedPaymentsInput(n.type)&&"function"!=typeof n.hostedParametersProvider&&(_=r.buildParamNameValueMap("hostedParametersProvider","undefined"));for(var I,C,O=function(){var e=(new Date).getTime(),i=new A.Metrics.Collector(t),o=a.getLpaButtonType(n),s=d.constants.IS_DYNAMIC_BUTTON_USED?[A.Metrics.Tags.DYNAMIC,o]:[o];i.addTiming("lpa-button-loading",m,e,s),i.publish()},N=S.getElementsByTagName("img"),D=0;D<N.length;D++)if(C=N[D],L=C.getAttribute("src"),0===L.indexOf(h.WIDGET_ENDPOINT+d.constants.BUTTON_URI)||0===L.indexOf(d.constants.BUTTON_BASE_PATH)){I=C;break}var b=d.constants.WIDGETID_PREFIX+v.generateUniqWidgetID(),P=function(){o.Utilities.isSellerInABTest(t,o.Tests.MULTI_BUTTONS)||T.useRetinaImage(b,t,n)};if("undefined"==typeof I){var L=r.getLWAButtonPath(n,u,p.isHostedDonation(n.type));if(d.constants.IS_DYNAMIC_BUTTON_USED){var W=document.createElement("img");W.setAttribute("style","height: 1px; width: 1px; display:none;"),W.onclick=function(){G(),p.isHostedPaymentsInput(n.type)?F():j(W)},S.appendChild(W),I=document.createElement("div"),I.setAttribute("style","cursor:pointer; display: inline-block;"),A.jQuery(I).load(O),S.appendChild(I);var R=r.getLanguageCountryForSeller(t,n);s.Utilities.createDynamicButton(n,R,e,t)}else{I=document.createElement("img"),I.setAttribute("src",L);var w=s.Utilities.getButtonSize(n.type,n.size),M=w[0],B=w[1];I.setAttribute("style","cursor:pointer; max-height:"+B+"px;");var U=L.replace(/\.svg/,".png").replace(/svg/,n.size?n.size:"medium");o.Utilities.getExperimentValueAndCallback(t,o.Tests.SVG_WEBLAB,function(e){var n=new A.Metrics.Collector(t),i=[];!e||e===o.Constants.TREATMENT_C||o.Utilities.isSellerInABTest(t,o.Tests.MULTI_BUTTONS)?(L=U,I.src=L,P()):(-1!==L.indexOf("svg")&&(0===I.clientHeight?(I.setAttribute("height",B),I.setAttribute("style","cursor:pointer; max-height:"+B+"px;")):I.setAttribute("height",I.clientHeight),0===I.clientWidth?I.setAttribute("width",M):I.setAttribute("width",I.clientWidth)),I.onload=function(){i.push("success-onload")},I.onerror=function(){I.setAttribute("src",U),I.setAttribute("style","cursor:pointer;"),i.push("error-onload"),P()},I.src=L,n.addCounter("svg-pwa-button",i),n.publish())}),I.src=U,A.jQuery(I).load(O),S.appendChild(I)}for(g=0;g<f.after_callbacks.length;g++)f.after_callbacks[g].call(null,t,e)}I.id=b,I.onErrorCallback=n.onError,I.getID=function(){return this.id},v.register(I),A.Button.bindOnError(I);var x,H;"undefined"!=typeof _&&(x=d.constants.INVALID_PARAMETER_VALUE,H=r.formatMsg(d.constants.INVALID_PARAMETER_VALUE_MSG,_),r.sendOnErrorCallbackMessage(x,H,b));var k=function(e){var t=e.data;A.jQuery(t).unbind(l.EXPRESS_CHK_ONAUTHORIZE,t.onSignInEventHandler);var i=t.eventValue,o={},s=function(){return"BillingAgreement"===n.agreementType?o.getAmazonBillingAgreementId=function(){return i}:o.getAmazonOrderReferenceId=function(){return i},o}();n.onSignIn(s)},G=function(){var i=new A.Metrics.Collector(t);i.addButtonInfoData(A.Metrics.ProductTypes.LPA,A.Metrics.PageActions.BUTTON_CLICK,n.type,t);var o=a.getLpaButtonType(n),s=d.constants.IS_DYNAMIC_BUTTON_USED?[A.Metrics.Tags.DYNAMIC,o]:[o];i.addCounter("lpa-buttonclick",s),i.addInfoOrEntry("additional-request-data","|language:"+u,"info");for(var r=0;r<f.before_publish_click_metric_callbacks.length;r++)f.before_publish_click_metric_callbacks[r].call(null,i,e);i.safePublish()},F=function(){var e=d.constants.HOSTED_INTERFACE_TYPE_KEY,t=d.constants.HOSTED_EXPERIENCE_TYPE_KEY;d.constants.HOSTED_PAYMENTS_WIDGET_ID=b,n.hostedParametersProvider(function(i){i[t]=p.inputTypeToExperienceTypeMap[n.type],i[e]!==d.constants.HOSTED_HTML_INTERFACE&&(i[e]=d.constants.HOSTED_JAVASCRIPT_INTERFACE),p.done(i)})},j=function(i){r.setLanguage(t,n),r.setLwaSandboxMode(),r.setLwADomain(t),n.authorization(),"function"==typeof n.onSignIn&&("undefined"==typeof n.useAmazonAddressBook&&(n.useAmazonAddressBook=!0),A.jQuery(i).bind(l.EXPRESS_CHK_ONAUTHORIZE,i,k),c().Login.authorize({scope:"payments:widget",interactive:y},function(i){var o;i.error||(o={action:"connect-lwa",access_token:i.access_token,cartOwnerId:t,clientId:r.getClientId(),referringUrl:window.location,useAmazonAddressBook:n.useAmazonAddressBook},"undefined"!=typeof n.language&&n.language.toLowerCase()in d.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP&&(o.language=d.constants.BUTTON_LWA_LANGUAGE_TO_REALM_MAP[n.language.toLowerCase()]),r.isEmptyOrUndefined(n.agreementType)||(o.agreementType=n.agreementType),r.performContractAction(o,e))}))};I.onclick=function(){var e=p.isHostedPaymentsInput(n.type);E.isSupportedBrowser()?(G(),e?F():j(I)):e?E.iOSFBSupportedBrowserHandler(t):E.notSupportedBrowserHandler(t)},n.buttonConstructorEndTime=(new Date).getTime(),d.constants.IS_DYNAMIC_BUTTON_USED||a.publishMetricsForLPAButton(n,e,t,!1)},A.Button.after_callbacks=[],A.Button.before_callbacks=[],A.Button.bindOnError=function(e){var t=function(t){"undefined"!=typeof e.onErrorCallback&&e.onErrorCallback(t.data.error)};A.jQuery(e).bind(l.ON_ERROR,e,t)},A.Widgets.Button=function(e){this.BUTTON_START_TIME=(new Date).getTime();for(var t=0;t<f.APA_before_callbacks.length;t++)f.APA_before_callbacks[t].call(null,this);g.call(this,e),!o.Utilities.isSellerInABTest(r.getCartOwnerId(),o.Tests.Default)&&r.isCookiePresent(o.Tests.Default.cookieName)&&r.eraseCookie(o.Tests.Default.cookieName);var n;this.useAmazonAddressBook=d.constants.DEFAULT_ADDRESSBOOK_PREF,this.hasError=!1,this.onSignIn=e.onSignIn,this.onOpen=e.onOpen,this.onErrorCallback=e.onError,this.authorizationToken=e.authorizationToken,this.agreementType=r.isEmptyOrUndefined(e.agreementType)?"":e.agreementType,this.type=d.others.WidgetTypes.Button,this.buttonType=d.others.ButtonTypes.BIG_FISH_CHECKOUT,this.getContractId=function(){return n},this.setContractId=function(e){n=e},this.validateAndSetUseAmazonAddressBookField=function(e){void 0!==e&&("boolean"==typeof e?this.useAmazonAddressBook=e:(r.sendOnErrorCallbackMessage(d.constants.INVALID_PARAMETER_VALUE,d.constants.INVALID_VALUE_FOR_USE_AMAZON_ADDRESSBOOK,this.getID()),this.hasError=!0))},this.setButtonType=function(){r.isEmptyOrUndefined(e.buttonType)||_===e.buttonType.toLowerCase()&&(this.buttonType=d.others.ButtonTypes.DONATION)},this.validateSellerId=function(e){r.isEmptyOrUndefined(e)&&(r.sendOnErrorCallbackMessage(d.constants.MISSING_PARAMETER,d.constants.MISSING_SELLERID,this.getID()),this.hasError=!0)},A.jQuery(this).bind(l.ON_ERROR,this,g.prototype.onErrorCallbackHandler),this.getAmazonOrderReferenceId=this.getContractId,this.getAmazonBillingAgreementId=this.getContractId,this.validateAndSetUseAmazonAddressBookField(e.useAmazonAddressBook),this.validateSellerId(e.sellerId),this.setButtonType()},A.Widgets.Button.prototype=r.createSubclass(g.prototype),A.Widgets.Button.prototype.constructor=A.Widgets.Button,A.Widgets.Button.prototype.shouldSkipPopup=function(){return this.contractId&&this.authorizationToken},A.Widgets.Button.prototype.onClickHandler=function(e){var t=e.data.getSellerId(),n=new A.Metrics.Collector(t);n.addButtonInfoData(A.Metrics.ProductTypes.APA,A.Metrics.PageActions.BUTTON_CLICK,e.data.buttonType,t),n.addCounter("apa-buttonclick"),n.publish(),e.data.shouldSkipPopup()?"function"==typeof e.data.onOpen?e.data.onOpen(e.data):e.data.submit():(e.data.isMobile=!1,e.data.showCashbackTermsAndConditions=!1,g.prototype.onClickHandler.call(this,e))},A.Widgets.Button.prototype.delayedEventHandler=function(e,t){null!==t&&void 0!==t&&("undefined"==typeof t.closed||t.closed===!0?e.onSignIn(e):setTimeout(function(){A.Widgets.Button.prototype.delayedEventHandler(e,t)},d.constants.TIMER_INTERVAL))},A.Widgets.Button.prototype.onSignInEventHandler=function(e){var t=e.data;if(t.shouldSkipPopup()||t.setContractId(t.eventValue),"function"==typeof t.onSignIn)if(r.shouldInvokeSetTimeoutOnSigninForUserAgent(navigator.userAgent))setTimeout(function(){A.Widgets.Button.prototype.delayedEventHandler(t,e.data.popupWindow)},d.constants.TIMER_INTERVAL);else{var n=new A.Metrics.Collector(t.getSellerId());n.addCounter("onSignInTriggered-"+t.eventValue),n.publishAndInvokeEvent({method:t.onSignIn,param:t})}A.jQuery(t).unbind(l.EXPRESS_CHK_ONAUTHORIZE,t.onSignInEventHandler)},A.Widgets.Button.prototype.submit=function(){A.jQuery(this).bind(l.EXPRESS_CHK_ONAUTHORIZE,this,this.onSignInEventHandler),this.shouldSkipPopup()?A.jQuery(this).trigger(l.EXPRESS_CHK_ONAUTHORIZE):this.popupForm()},A.Widgets.Button.prototype.popupForm=function(){var e=this.getPopupWindowName(),t=this.getID()+"Form",n=window.top.location,i=h.WIDGET_ENDPOINT+d.constants.INLINE_WIDGETS_URI,o={action:"connect",referringURL:n,cartOwnerId:this.getSellerId(),useAmazonAddressBook:this.useAmazonAddressBook,agreementType:this.agreementType};void 0!==this.getContractId()&&(o.contractId=this.getContractId());var s=r.createFormString(t,i,e,o);A.jQuery("#"+t).remove(),A.jQuery("#"+this.getLocation()).append(s),A.jQuery("#"+t).submit()},A.jQuery(document).ready(function(){u.setup(),window.setTimeout(r.pollTaskQueue,d.constants.TIMER_INTERVAL),d.config.POLL_FOR_EVENTS&&r.isValidDocInclusion()&&setInterval(r.pollEvents,d.constants.TIMER_INTERVAL),"undefined"!=typeof window.postMessage&&(window.addEventListener?window.addEventListener("message",r.handleMessage,!1):window.attachEvent&&window.attachEvent("onmessage",r.handleMessage)),A.Widgets.mainCollector.addCounter("_V1475087910_"),A.Widgets.mainCollector.publish()});var S=new A.Metrics.Collector;S.publishPendingMetrics(),A.Widgets.mainCollector.addTiming("js-loaded",m(),(new Date).getTime())}t.exports={Widgets:A.Widgets,Button:A.Button,isDynamicButtonUsed:i}},{"../core/ArrayPolyfill":4,"../core/BridgeHelper":5,"../core/BrowserSupport":6,"../core/ButtonCallbacks":7,"../core/CheckoutWidget":9,"../core/Config":10,"../core/Constants":12,"../core/EventTypes":13,"../core/HighResButtons":14,"../core/HostedPayments":15,"../core/LPAMetricsHelper":18,"../core/LwaLogin":19,"../core/Mediator":20,"../core/Utilities":25,"../core/ZeroTime":29,"../core/jquery":30,"./ABTest":35,"./DynamicButtons":36,"./MetricsCollector":37}]},{},[1]),OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap={},OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-seller-id"]="sellerId",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-access-key"]="accessKey",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-lwa-client-id"]="lwaClientId",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-return-url"]="returnURL",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-cancel-return-url"]="cancelReturnURL",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-amount"]="amount",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-currency-code"]="currencyCode",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-note"]="sellerNote",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-scope"]="scope",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-signature"]="signature",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-shipping-address-required"]="shippingAddressRequired",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-payment-action"]="paymentAction",OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap["data-ap-seller-order-id"]="sellerOrderId",OffAmazonPayments.HostedPayments.DonationsParameterProviderFunction=function(e,t,n){var i={};i.interfaceType=OffAmazonPayments.Widgets.Constants.HOSTED_HTML_INTERFACE,e.each(OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap,function(e,n){t.attr(e)&&(i[OffAmazonPayments.HostedPayments.htmlAttrToJsParamMap[e]]=t.attr(e))}),n(i)},OffAmazonPayments.HostedPayments.LoadButtonInEl=function(e,t,n){void 0===n&&(n=t);var i=t.attr("id"),o={expressPaymentButton:"hostedPayment",expressDonationButton:"hostedDonation",expressDonationWidget:"hostedDonation"};OffAmazonPayments.Button(i,n.attr("data-ap-seller-id"),{type:o[n.attr("data-ap-widget-type")],hostedParametersProvider:function(t){OffAmazonPayments.HostedPayments.DonationsParameterProviderFunction(e,n,t)},onError:function(e){console.debug(e.getErrorCode()+e.getErrorMessage())}})},OffAmazonPayments.HostedPayments.HtmlButtonLoader=function(e){e("div[data-ap-widget-type=expressPaymentButton],div[data-ap-widget-type=expressDonationButton]").each(function(){var t=e(this);(""===t.attr("id")||void 0===t.attr("id")||null===t.attr("id"))&&t.attr("id","ap-button-"+Math.floor(1e9*Math.random()+1).toString()),OffAmazonPayments.HostedPayments.LoadButtonInEl(e,t)})},"undefined"==typeof OffAmazonPayments&&(OffAmazonPayments={}),"undefined"==typeof OffAmazonPayments.HostedPayments&&(OffAmazonPayments.HostedPayments={}),OffAmazonPayments.HostedPayments.Donations=function(e){function t(){n(i)}function n(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",o),document.getElementsByTagName("head")[0].appendChild(t),e()}function i(){e(s).each(function(){new OffAmazonPayments.HostedPayments.Donations.widget(e(this),e)})}var o="https://images-eu.ssl-images-amazon.com/images/G/01/EP/offAmazonPayments/common/uk/prod/css/donations.css",s="div[data-ap-widget-type='expressDonationWidget']";return t(),{cssFileName:o,widgetSelector:s}},"undefined"==typeof OffAmazonPayments&&(OffAmazonPayments={}),"undefined"==typeof OffAmazonPayments.HostedPayments&&(OffAmazonPayments.HostedPayments={}),"undefined"==typeof OffAmazonPayments.HostedPayments.Donations&&(OffAmazonPayments.HostedPayments.Donations={}),OffAmazonPayments.HostedPayments.Donations.widget=function(e,t){function n(){v(),S(),A(),T(),s(),i()}function i(){D.preSelectedAmountsList?(U=t(".ap-dw-selected",x),b=g(U.html())):(U=t(M,x),b=g(U.val())),P=!1,r(),u()}function o(e){return e=parseInt(e),isNaN(e)||0>e||e>3?1:e}function s(){R&&R.find(".ap-dw-list-item-link").click(p),M.blur(h),M.focus(f)}function r(){M.val(E(b))}function a(e){e&&(U.removeClass("ap-dw-selected"),U=e),U.addClass("ap-dw-selected"),b=g(U.html()),B.removeClass("ap-dw-selected ap-dw-value-set"),l(),r(),u()}function d(e){w.addClass("ap-dw-error-active").html(e),B.addClass("ap-dw-error-active"),W.addClass("ap-dw-error-active"),P=!0}function l(){w.removeClass("ap-dw-error-active"),B.removeClass("ap-dw-error-active"),W.removeClass("ap-dw-error-active"),P=!1}function u(){x.attr("data-ap-amount",b)}function c(){return b}function g(e){return e=Number(e.replace(/[\$,]/g,"")),Math.round(100*e)/100}function p(e){U.hasClass("ap-dw-selected")&&U.get(0)===e.currentTarget||a(t(e.currentTarget))}function f(){(M.val()===D.strings.defaultInputAmount||P)&&M.val("$"),B.addClass("ap-dw-selected"),U.removeClass("ap-dw-selected")}function h(){_()&&(b=g(M.val()),M.val(E(b)),B.addClass("ap-dw-value-set"),u())}function m(e){return P?(e.preventDefault(),e.stopPropagation(),!1):(L(e),!0)}function E(e){return"string"!=typeof e&&(e=e.toString()),e=e.replace(/[,\$]/g,""),e="$"+e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function T(){var e=t("img",W);L=e.get(0).onclick,e.get(0).onclick=null,e.bind("click",m)}function y(e){return isNaN(e)||0>e?(d(D.errors.invalid),!1):e<D.minValue?(d(D.errors.minValue),!1):e>D.maxValue?(d(D.errors.maxValue),!1):(l(),!0)}function _(){var e=g(M.val());return""===M.val()||0===e?(M.val(D.strings.defaultInputAmount),!0):y(e)}function A(){OffAmazonPayments.HostedPayments.LoadButtonInEl(t,W,x)}function v(){var e=x.attr("data-ap-widget-amount-presets"),t=x.attr("data-ap-widget-default-amount"),n=x.attr("data-ap-widget-theme");D={minValue:5,maxValue:15e4,cssTheme:n&&H[n]?n:"ap-light",strings:{defaultInputAmount:"$0",defaultAmountOther:"other",donate:"Donate",otherOptions:"Other Options"},errors:{minValue:"The amount you entered is less than the minimum value",maxValue:"The amount you entered is more than the maximum amount",invalid:"You entered an invalid amount"}},e?(D.preSelectedAmount=o(t),D.preSelectedAmountsList=e.split(",")):t===D.strings.defaultAmountOther&&(D.preSelectedAmount=t)}function S(){var e,n=x.get(0),i=document.createElement("div"),o=document.createElement("span"),s=document.createElement("div");n.className="ap-dw-container "+D.cssTheme,i.className="ap-dw-main",o.className="ap-dw-error",s.className="ap-dw-button",s.id="ap-button-"+Math.floor(1e9*Math.random()+1).toString(),D.preSelectedAmountsList?(e=I(i),C(e),O(e),i.appendChild(e)):N(i,!0),i.appendChild(o),w=t(o),i.appendChild(s),W=t(s),n.appendChild(i)}function I(e){var t=document.createElement("h3"),n=document.createElement("div");return t.className="ap-dw-main-heading",t.innerHTML=D.strings.donate,e.appendChild(t),n.className="ap-dw-content-container ap-dw-cf",n}function C(e){var n,i,o=document.createElement("ul");o.className="ap-dw-list ap-dw-cf";for(var s=0;4>s;s++)n=document.createElement("li"),i=document.createElement("a"),n.className="ap-dw-list-item",s===D.preSelectedAmount?i.className="ap-dw-list-item-link ap-dw-selected":i.className="ap-dw-list-item-link",i.innerHTML="$"+D.preSelectedAmountsList[s],n.appendChild(i),o.appendChild(n);e.appendChild(o),R=t(o)}function O(e){var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("h4");t.className="ap-dw-optional ap-dw-cf",n.className="ap-dw-optional-container",i.className="ap-dw-optional-container",o.className="ap-dw-optional-heading",o.innerHTML=D.strings.otherOptions,N(i,!1),n.appendChild(o),t.appendChild(n),t.appendChild(i),e.appendChild(t)}function N(e,n){var i=document.createElement("div"),o=document.createElement("input");n=n?" ap-dw-input-only ap-dw-selected":"",i.className="ap-dw-optional-input-container"+n,o.className="ap-dw-optional-input",o.type="text",o.value=D.strings.defaultInputAmount,i.appendChild(o),e.appendChild(i),B=t(i),M=t(o)}var D,b,P,L,W,R,w,M,B,U,x=e,H={"ap-light":!0,"ap-dark":!0};return n(),{applyInputFormatRules:E,getAmount:c,getNumberValue:g,handleButtonClick:m}};var LOGIN_STATE={LOADED:"loaded",COMPLETE:"complete"};"undefined"==typeof OffAmazonPayments&&(OffAmazonPayments={}),void 0===OffAmazonPayments.Loader&&(OffAmazonPayments.Loader={loginJsUrl:"https://eu.account.amazon.com/lwa/js/sdk/login1.js"}),void 0===OffAmazonPayments.HostedPayments&&(OffAmazonPayments.HostedPayments={}),OffAmazonPayments.Loader.LOGINJS_NAME="OffAmazonPaymentsLoginJS",OffAmazonPayments.Loader.CanLoadChildScriptsAsynchronously=function(){function e(e){var t=e.getAttribute("src");return null!==t&&-1!==t.indexOf("OffAmazonPayments")&&-1!==t.indexOf("Widgets.js")}function t(){var t,n,i,o=document.getElementsByTagName("script");for(n=0;n<o.length;n++)if(t=o[n],e(t))return i=t.getAttribute("async"),null!==i&&void 0!==i&&i!==!1;return!1}return document.currentScript?document.currentScript.async:t()},OffAmazonPayments.Loader.AddLwaScriptIfMissingAndPerformCallback=function(e,t,n,i){function o(t){var n;return function(){if(t&&t.length>0)for(var i=0;i<t.length;i++)n=t[i],"function"==typeof n&&n(e)}}var s=o(n),r=o(i);"undefined"!=typeof t&&void 0!==t.Login?(OffAmazonPayments.Loader.SetScriptLoadMetrics(),s(),e(document).ready(r)):(OffAmazonPayments.Loader.ReplaceLoginReadyCallback(),OffAmazonPayments.Loader.LoadLoginJS(e,s,r))},OffAmazonPayments.Loader.SetScriptLoadMetrics=function(){OffAmazonPayments.WIDGET_CORE_EXECUTION_END_TIME=(new Date).getTime()},OffAmazonPayments.Loader.ReplaceLoginReadyCallback=function(){var e=window.onAmazonLoginReady||function(){};window.onAmazonLoginReady=function(){OffAmazonPayments.Loader.SetScriptLoadMetrics(),e()}},OffAmazonPayments.Loader.loginJSLoaded=function(e){var t=new OffAmazonPayments.Metrics.Collector;t.addTiming("login1js-load-time",e,(new Date).getTime()),t.publish()},OffAmazonPayments.Loader.LoadLoginJS=function(e,t,n){function i(){t(),e(document).ready(n),r&&OffAmazonPayments.Loader.loginJSLoaded(r)}function o(e,t){e.readyState?e.onreadystatechange=function(){(e.readyState===LOGIN_STATE.LOADED||e.readyState===LOGIN_STATE.COMPLETE)&&t()}:e.onload=t}function s(){var e=document.createElement("script");e.setAttribute("src",OffAmazonPayments.Loader.loginJsUrl),o(e,i),document.getElementsByTagName("script")[0].parentNode.appendChild(e)}var r;if(!OffAmazonPayments.Loader.loginJsUrl)return void i();if(OffAmazonPayments.Loader.CanLoadChildScriptsAsynchronously())s();else{r=(new Date).getTime(),document.write("<script type='text/javascript' src='"+OffAmazonPayments.Loader.loginJsUrl+"' id= '"+OffAmazonPayments.Loader.LOGINJS_NAME+"'></script>");var a=document.getElementById(OffAmazonPayments.Loader.LOGINJS_NAME);a?o(a,i):s()}},OffAmazonPayments.Loader.WrappedInUserErrorMetrics=function(e){return function(){try{e()}catch(t){var n=new OffAmazonPayments.Metrics.Collector;throw n.addCounter("js-user-error",window.location.host),n.publish(),t}}},function(e){var t;"undefined"!=typeof amazon&&(t=amazon);var n=OffAmazonPayments.Loader.WrappedInUserErrorMetrics,i=n(window.onAmazonPaymentsReady||function(){}),o=n(window.AmazonPaymentReady||function(){}),s=[i,o],r=[OffAmazonPayments.HostedPayments.HtmlButtonLoader,OffAmazonPayments.HostedPayments.Donations];OffAmazonPayments.Loader.AddLwaScriptIfMissingAndPerformCallback(e,t,s,r)}(OffAmazonPayments.jQuery);